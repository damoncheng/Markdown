{"code":"!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=19)}([function(e,t){\"function\"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){e.exports=n(17),e.exports.Collection=n(6)},function(e,t,n){var i;\n/*! Hammer.JS - v2.0.7 - 2016-04-22\n * http://hammerjs.github.io/\n *\n * Copyright (c) 2016 Jorik Tangelder;\n * Licensed under the MIT license */\n/*! Hammer.JS - v2.0.7 - 2016-04-22\n * http://hammerjs.github.io/\n *\n * Copyright (c) 2016 Jorik Tangelder;\n * Licensed under the MIT license */\n!function(o,r,a,s){\"use strict\";var c,p=[\"\",\"webkit\",\"Moz\",\"MS\",\"ms\",\"o\"],l=r.createElement(\"div\"),u=\"function\",h=Math.round,d=Math.abs,m=Date.now;function f(e,t,n){return setTimeout(w(e,n),t)}function y(e,t,n){return!!Array.isArray(e)&&(g(e,n[t],n),!0)}function g(e,t,n){var i;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==s)for(i=0;i<e.length;)t.call(n,e[i],i,e),i++;else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)}function v(e,t,n){var i=\"DEPRECATED METHOD: \"+t+\"\\n\"+n+\" AT \\n\";return function(){var t=new Error(\"get-stack-trace\"),n=t&&t.stack?t.stack.replace(/^[^\\(]+?[\\n$]/gm,\"\").replace(/^\\s+at\\s+/gm,\"\").replace(/^Object.<anonymous>\\s*\\(/gm,\"{anonymous}()@\"):\"Unknown Stack Trace\",r=o.console&&(o.console.warn||o.console.log);return r&&r.call(o.console,i,n),e.apply(this,arguments)}}c=\"function\"!=typeof Object.assign?function(e){if(e===s||null===e)throw new TypeError(\"Cannot convert undefined or null to object\");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==s&&null!==i)for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])}return t}:Object.assign;var b=v(function(e,t,n){for(var i=Object.keys(t),o=0;o<i.length;)(!n||n&&e[i[o]]===s)&&(e[i[o]]=t[i[o]]),o++;return e},\"extend\",\"Use `assign`.\"),x=v(function(e,t){return b(e,t,!0)},\"merge\",\"Use `assign`.\");function _(e,t,n){var i,o=t.prototype;(i=e.prototype=Object.create(o)).constructor=e,i._super=o,n&&c(i,n)}function w(e,t){return function(){return e.apply(t,arguments)}}function E(e,t){return typeof e==u?e.apply(t&&t[0]||s,t):e}function S(e,t){return e===s?t:e}function P(e,t,n){g(M(t),function(t){e.addEventListener(t,n,!1)})}function C(e,t,n){g(M(t),function(t){e.removeEventListener(t,n,!1)})}function T(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function R(e,t){return e.indexOf(t)>-1}function M(e){return e.trim().split(/\\s+/g)}function A(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var i=0;i<e.length;){if(n&&e[i][n]==t||!n&&e[i]===t)return i;i++}return-1}function k(e){return Array.prototype.slice.call(e,0)}function B(e,t,n){for(var i=[],o=[],r=0;r<e.length;){var a=t?e[r][t]:e[r];A(o,a)<0&&i.push(e[r]),o[r]=a,r++}return n&&(i=t?i.sort(function(e,n){return e[t]>n[t]}):i.sort()),i}function N(e,t){for(var n,i,o=t[0].toUpperCase()+t.slice(1),r=0;r<p.length;){if((i=(n=p[r])?n+o:t)in e)return i;r++}return s}var D=1;function O(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||o}var L=\"ontouchstart\"in o,j=N(o,\"PointerEvent\")!==s,I=L&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),z=25,F=1,$=2,V=4,H=8,W=1,G=2,q=4,U=8,K=16,Y=G|q,X=U|K,Z=Y|X,Q=[\"x\",\"y\"],J=[\"clientX\",\"clientY\"];function ee(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){E(e.options.enable,[e])&&n.handler(t)},this.init()}function te(e,t,n){var i=n.pointers.length,o=n.changedPointers.length,r=t&F&&i-o==0,a=t&(V|H)&&i-o==0;n.isFirst=!!r,n.isFinal=!!a,r&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,i=t.pointers,o=i.length;n.firstInput||(n.firstInput=ne(t));o>1&&!n.firstMultiple?n.firstMultiple=ne(t):1===o&&(n.firstMultiple=!1);var r=n.firstInput,a=n.firstMultiple,c=a?a.center:r.center,p=t.center=ie(i);t.timeStamp=m(),t.deltaTime=t.timeStamp-r.timeStamp,t.angle=se(c,p),t.distance=ae(c,p),function(e,t){var n=t.center,i=e.offsetDelta||{},o=e.prevDelta||{},r=e.prevInput||{};t.eventType!==F&&r.eventType!==V||(o=e.prevDelta={x:r.deltaX||0,y:r.deltaY||0},i=e.offsetDelta={x:n.x,y:n.y});t.deltaX=o.x+(n.x-i.x),t.deltaY=o.y+(n.y-i.y)}(n,t),t.offsetDirection=re(t.deltaX,t.deltaY);var l=oe(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=l.x,t.overallVelocityY=l.y,t.overallVelocity=d(l.x)>d(l.y)?l.x:l.y,t.scale=a?(u=a.pointers,h=i,ae(h[0],h[1],J)/ae(u[0],u[1],J)):1,t.rotation=a?function(e,t){return se(t[1],t[0],J)+se(e[1],e[0],J)}(a.pointers,i):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,i,o,r,a=e.lastInterval||t,c=t.timeStamp-a.timeStamp;if(t.eventType!=H&&(c>z||a.velocity===s)){var p=t.deltaX-a.deltaX,l=t.deltaY-a.deltaY,u=oe(c,p,l);i=u.x,o=u.y,n=d(u.x)>d(u.y)?u.x:u.y,r=re(p,l),e.lastInterval=t}else n=a.velocity,i=a.velocityX,o=a.velocityY,r=a.direction;t.velocity=n,t.velocityX=i,t.velocityY=o,t.direction=r}(n,t);var u,h;var f=e.element;T(t.srcEvent.target,f)&&(f=t.srcEvent.target);t.target=f}(e,n),e.emit(\"hammer.input\",n),e.recognize(n),e.session.prevInput=n}function ne(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:h(e.pointers[n].clientX),clientY:h(e.pointers[n].clientY)},n++;return{timeStamp:m(),pointers:t,center:ie(t),deltaX:e.deltaX,deltaY:e.deltaY}}function ie(e){var t=e.length;if(1===t)return{x:h(e[0].clientX),y:h(e[0].clientY)};for(var n=0,i=0,o=0;o<t;)n+=e[o].clientX,i+=e[o].clientY,o++;return{x:h(n/t),y:h(i/t)}}function oe(e,t,n){return{x:t/e||0,y:n/e||0}}function re(e,t){return e===t?W:d(e)>=d(t)?e<0?G:q:t<0?U:K}function ae(e,t,n){n||(n=Q);var i=t[n[0]]-e[n[0]],o=t[n[1]]-e[n[1]];return Math.sqrt(i*i+o*o)}function se(e,t,n){n||(n=Q);var i=t[n[0]]-e[n[0]],o=t[n[1]]-e[n[1]];return 180*Math.atan2(o,i)/Math.PI}ee.prototype={handler:function(){},init:function(){this.evEl&&P(this.element,this.evEl,this.domHandler),this.evTarget&&P(this.target,this.evTarget,this.domHandler),this.evWin&&P(O(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(O(this.element),this.evWin,this.domHandler)}};var ce={mousedown:F,mousemove:$,mouseup:V},pe=\"mousedown\",le=\"mousemove mouseup\";function ue(){this.evEl=pe,this.evWin=le,this.pressed=!1,ee.apply(this,arguments)}_(ue,ee,{handler:function(e){var t=ce[e.type];t&F&&0===e.button&&(this.pressed=!0),t&$&&1!==e.which&&(t=V),this.pressed&&(t&V&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:\"mouse\",srcEvent:e}))}});var he={pointerdown:F,pointermove:$,pointerup:V,pointercancel:H,pointerout:H},de={2:\"touch\",3:\"pen\",4:\"mouse\",5:\"kinect\"},me=\"pointerdown\",fe=\"pointermove pointerup pointercancel\";function ye(){this.evEl=me,this.evWin=fe,ee.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}o.MSPointerEvent&&!o.PointerEvent&&(me=\"MSPointerDown\",fe=\"MSPointerMove MSPointerUp MSPointerCancel\"),_(ye,ee,{handler:function(e){var t=this.store,n=!1,i=e.type.toLowerCase().replace(\"ms\",\"\"),o=he[i],r=de[e.pointerType]||e.pointerType,a=\"touch\"==r,s=A(t,e.pointerId,\"pointerId\");o&F&&(0===e.button||a)?s<0&&(t.push(e),s=t.length-1):o&(V|H)&&(n=!0),s<0||(t[s]=e,this.callback(this.manager,o,{pointers:t,changedPointers:[e],pointerType:r,srcEvent:e}),n&&t.splice(s,1))}});var ge={touchstart:F,touchmove:$,touchend:V,touchcancel:H},ve=\"touchstart\",be=\"touchstart touchmove touchend touchcancel\";function xe(){this.evTarget=ve,this.evWin=be,this.started=!1,ee.apply(this,arguments)}_(xe,ee,{handler:function(e){var t=ge[e.type];if(t===F&&(this.started=!0),this.started){var n=function(e,t){var n=k(e.touches),i=k(e.changedTouches);t&(V|H)&&(n=B(n.concat(i),\"identifier\",!0));return[n,i]}.call(this,e,t);t&(V|H)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:\"touch\",srcEvent:e})}}});var _e={touchstart:F,touchmove:$,touchend:V,touchcancel:H},we=\"touchstart touchmove touchend touchcancel\";function Ee(){this.evTarget=we,this.targetIds={},ee.apply(this,arguments)}_(Ee,ee,{handler:function(e){var t=_e[e.type],n=function(e,t){var n=k(e.touches),i=this.targetIds;if(t&(F|$)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var o,r,a=k(e.changedTouches),s=[],c=this.target;if(r=n.filter(function(e){return T(e.target,c)}),t===F)for(o=0;o<r.length;)i[r[o].identifier]=!0,o++;o=0;for(;o<a.length;)i[a[o].identifier]&&s.push(a[o]),t&(V|H)&&delete i[a[o].identifier],o++;if(!s.length)return;return[B(r.concat(s),\"identifier\",!0),s]}.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:\"touch\",srcEvent:e})}});var Se=2500,Pe=25;function Ce(){ee.apply(this,arguments);var e=w(this.handler,this);this.touch=new Ee(this.manager,e),this.mouse=new ue(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function Te(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var i=this.lastTouches;setTimeout(function(){var e=i.indexOf(n);e>-1&&i.splice(e,1)},Se)}}_(Ce,ee,{handler:function(e,t,n){var i=\"touch\"==n.pointerType,o=\"mouse\"==n.pointerType;if(!(o&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)(function(e,t){e&F?(this.primaryTouch=t.changedPointers[0].identifier,Te.call(this,t)):e&(V|H)&&Te.call(this,t)}).call(this,t,n);else if(o&&function(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var o=this.lastTouches[i],r=Math.abs(t-o.x),a=Math.abs(n-o.y);if(r<=Pe&&a<=Pe)return!0}return!1}.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Re=N(l.style,\"touchAction\"),Me=Re!==s,Ae=\"auto\",ke=\"manipulation\",Be=\"none\",Ne=\"pan-x\",De=\"pan-y\",Oe=function(){if(!Me)return!1;var e={},t=o.CSS&&o.CSS.supports;return[\"auto\",\"manipulation\",\"pan-y\",\"pan-x\",\"pan-x pan-y\",\"none\"].forEach(function(n){e[n]=!t||o.CSS.supports(\"touch-action\",n)}),e}();function Le(e,t){this.manager=e,this.set(t)}Le.prototype={set:function(e){\"compute\"==e&&(e=this.compute()),Me&&this.manager.element.style&&Oe[e]&&(this.manager.element.style[Re]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return g(this.manager.recognizers,function(t){E(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),function(e){if(R(e,Be))return Be;var t=R(e,Ne),n=R(e,De);if(t&&n)return Be;if(t||n)return t?Ne:De;if(R(e,ke))return ke;return Ae}(e.join(\" \"))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var i=this.actions,o=R(i,Be)&&!Oe[Be],r=R(i,De)&&!Oe[De],a=R(i,Ne)&&!Oe[Ne];if(o){var s=1===e.pointers.length,c=e.distance<2,p=e.deltaTime<250;if(s&&c&&p)return}if(!a||!r)return o||r&&n&Y||a&&n&X?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var je=1,Ie=2,ze=4,Fe=8,$e=Fe,Ve=16;function He(e){this.options=c({},this.defaults,e||{}),this.id=D++,this.manager=null,this.options.enable=S(this.options.enable,!0),this.state=je,this.simultaneous={},this.requireFail=[]}function We(e){return e&Ve?\"cancel\":e&Fe?\"end\":e&ze?\"move\":e&Ie?\"start\":\"\"}function Ge(e){return e==K?\"down\":e==U?\"up\":e==G?\"left\":e==q?\"right\":\"\"}function qe(e,t){var n=t.manager;return n?n.get(e):e}function Ue(){He.apply(this,arguments)}function Ke(){Ue.apply(this,arguments),this.pX=null,this.pY=null}function Ye(){Ue.apply(this,arguments)}function Xe(){He.apply(this,arguments),this._timer=null,this._input=null}function Ze(){Ue.apply(this,arguments)}function Qe(){Ue.apply(this,arguments)}function Je(){He.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function et(e,t){return(t=t||{}).recognizers=S(t.recognizers,et.defaults.preset),new tt(e,t)}He.prototype={defaults:{},set:function(e){return c(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(y(e,\"recognizeWith\",this))return this;var t=this.simultaneous;return t[(e=qe(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return y(e,\"dropRecognizeWith\",this)?this:(e=qe(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(y(e,\"requireFailure\",this))return this;var t=this.requireFail;return-1===A(t,e=qe(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(y(e,\"dropRequireFailure\",this))return this;e=qe(e,this);var t=A(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,n=this.state;function i(n){t.manager.emit(n,e)}n<Fe&&i(t.options.event+We(n)),i(t.options.event),e.additionalEvent&&i(e.additionalEvent),n>=Fe&&i(t.options.event+We(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|je)))return!1;e++}return!0},recognize:function(e){var t=c({},e);if(!E(this.options.enable,[this,t]))return this.reset(),void(this.state=32);this.state&($e|Ve|32)&&(this.state=je),this.state=this.process(t),this.state&(Ie|ze|Fe|Ve)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},_(Ue,He,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,i=t&(Ie|ze),o=this.attrTest(e);return i&&(n&H||!o)?t|Ve:i||o?n&V?t|Fe:t&Ie?t|ze:Ie:32}}),_(Ke,Ue,{defaults:{event:\"pan\",threshold:10,pointers:1,direction:Z},getTouchAction:function(){var e=this.options.direction,t=[];return e&Y&&t.push(De),e&X&&t.push(Ne),t},directionTest:function(e){var t=this.options,n=!0,i=e.distance,o=e.direction,r=e.deltaX,a=e.deltaY;return o&t.direction||(t.direction&Y?(o=0===r?W:r<0?G:q,n=r!=this.pX,i=Math.abs(e.deltaX)):(o=0===a?W:a<0?U:K,n=a!=this.pY,i=Math.abs(e.deltaY))),e.direction=o,n&&i>t.threshold&&o&t.direction},attrTest:function(e){return Ue.prototype.attrTest.call(this,e)&&(this.state&Ie||!(this.state&Ie)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Ge(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),_(Ye,Ue,{defaults:{event:\"pinch\",threshold:0,pointers:2},getTouchAction:function(){return[Be]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&Ie)},emit:function(e){if(1!==e.scale){var t=e.scale<1?\"in\":\"out\";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),_(Xe,He,{defaults:{event:\"press\",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Ae]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,o=e.deltaTime>t.time;if(this._input=e,!i||!n||e.eventType&(V|H)&&!o)this.reset();else if(e.eventType&F)this.reset(),this._timer=f(function(){this.state=$e,this.tryEmit()},t.time,this);else if(e.eventType&V)return $e;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===$e&&(e&&e.eventType&V?this.manager.emit(this.options.event+\"up\",e):(this._input.timeStamp=m(),this.manager.emit(this.options.event,this._input)))}}),_(Ze,Ue,{defaults:{event:\"rotate\",threshold:0,pointers:2},getTouchAction:function(){return[Be]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&Ie)}}),_(Qe,Ue,{defaults:{event:\"swipe\",threshold:10,velocity:.3,direction:Y|X,pointers:1},getTouchAction:function(){return Ke.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(Y|X)?t=e.overallVelocity:n&Y?t=e.overallVelocityX:n&X&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&d(t)>this.options.velocity&&e.eventType&V},emit:function(e){var t=Ge(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),_(Je,He,{defaults:{event:\"tap\",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ke]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,o=e.deltaTime<t.time;if(this.reset(),e.eventType&F&&0===this.count)return this.failTimeout();if(i&&o&&n){if(e.eventType!=V)return this.failTimeout();var r=!this.pTime||e.timeStamp-this.pTime<t.interval,a=!this.pCenter||ae(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,a&&r?this.count+=1:this.count=1,this._input=e,0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=f(function(){this.state=$e,this.tryEmit()},t.interval,this),Ie):$e}return 32},failTimeout:function(){return this._timer=f(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==$e&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),et.VERSION=\"2.0.7\",et.defaults={domEvents:!1,touchAction:\"compute\",enable:!0,inputTarget:null,inputClass:null,preset:[[Ze,{enable:!1}],[Ye,{enable:!1},[\"rotate\"]],[Qe,{direction:Y}],[Ke,{direction:Y},[\"swipe\"]],[Je],[Je,{event:\"doubletap\",taps:2},[\"tap\"]],[Xe]],cssProps:{userSelect:\"none\",touchSelect:\"none\",touchCallout:\"none\",contentZooming:\"none\",userDrag:\"none\",tapHighlightColor:\"rgba(0,0,0,0)\"}};function tt(e,t){var n;this.options=c({},et.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((n=this).options.inputClass||(j?ye:I?Ee:L?Ce:ue))(n,te),this.touchAction=new Le(this,this.options.touchAction),nt(this,!0),g(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function nt(e,t){var n,i=e.element;i.style&&(g(e.options.cssProps,function(o,r){n=N(i.style,r),t?(e.oldCssProps[n]=i.style[n],i.style[n]=o):i.style[n]=e.oldCssProps[n]||\"\"}),t||(e.oldCssProps={}))}tt.prototype={set:function(e){return c(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var i=this.recognizers,o=t.curRecognizer;(!o||o&&o.state&$e)&&(o=t.curRecognizer=null);for(var r=0;r<i.length;)n=i[r],2===t.stopped||o&&n!=o&&!n.canRecognizeWith(o)?n.reset():n.recognize(e),!o&&n.state&(Ie|ze|Fe)&&(o=t.curRecognizer=n),r++}},get:function(e){if(e instanceof He)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(y(e,\"add\",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(y(e,\"remove\",this))return this;if(e=this.get(e)){var t=this.recognizers,n=A(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==s&&t!==s){var n=this.handlers;return g(M(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==s){var n=this.handlers;return g(M(e),function(e){t?n[e]&&n[e].splice(A(n[e],t),1):delete n[e]}),this}},emit:function(e,t){this.options.domEvents&&function(e,t){var n=r.createEvent(\"Event\");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](t),i++}},destroy:function(){this.element&&nt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},c(et,{INPUT_START:F,INPUT_MOVE:$,INPUT_END:V,INPUT_CANCEL:H,STATE_POSSIBLE:je,STATE_BEGAN:Ie,STATE_CHANGED:ze,STATE_ENDED:Fe,STATE_RECOGNIZED:$e,STATE_CANCELLED:Ve,STATE_FAILED:32,DIRECTION_NONE:W,DIRECTION_LEFT:G,DIRECTION_RIGHT:q,DIRECTION_UP:U,DIRECTION_DOWN:K,DIRECTION_HORIZONTAL:Y,DIRECTION_VERTICAL:X,DIRECTION_ALL:Z,Manager:tt,Input:ee,TouchAction:Le,TouchInput:Ee,MouseInput:ue,PointerEventInput:ye,TouchMouseInput:Ce,SingleTouchInput:xe,Recognizer:He,AttrRecognizer:Ue,Tap:Je,Pan:Ke,Swipe:Qe,Pinch:Ye,Rotate:Ze,Press:Xe,on:P,off:C,each:g,merge:x,extend:b,assign:c,inherit:_,bindFn:w,prefixed:N}),(void 0!==o?o:\"undefined\"!=typeof self?self:{}).Hammer=et,(i=function(){return et}.call(t,n,t,e))===s||(e.exports=i)}(window,document)},function(e,t,n){(function(t){var n;n=void 0!==t?t:this,e.exports=function(e){if(e.CSS&&e.CSS.escape)return e.CSS.escape;var t=function(e){if(0==arguments.length)throw new TypeError(\"`CSS.escape` requires an argument.\");for(var t,n=String(e),i=n.length,o=-1,r=\"\",a=n.charCodeAt(0);++o<i;)0!=(t=n.charCodeAt(o))?r+=t>=1&&t<=31||127==t||0==o&&t>=48&&t<=57||1==o&&t>=48&&t<=57&&45==a?\"\\\\\"+t.toString(16)+\" \":0==o&&1==i&&45==t||!(t>=128||45==t||95==t||t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122)?\"\\\\\"+n.charAt(o):n.charAt(o):r+=\"�\";return r};return e.CSS||(e.CSS={}),e.CSS.escape=t,t}(n)}).call(this,n(7))},function(e,t,n){\"use strict\";var i=\"hasOwnProperty\",o=/,?([a-z]),?/gi,r=parseFloat,a=Math,s=a.PI,c=a.min,p=a.max,l=a.pow,u=a.abs,h=/([a-z])[\\s,]*((-?\\d*\\.?\\d*(?:e[-+]?\\d+)?[\\s]*,?[\\s]*)+)/gi,d=/(-?\\d*\\.?\\d*(?:e[-+]?\\\\d+)?)[\\s]*,?[\\s]*/gi;function m(e,t){return\"finite\"==(t=String.prototype.toLowerCase.call(t))?isFinite(e):!(\"array\"!=t||!(e instanceof Array||Array.isArray&&Array.isArray(e)))||(\"null\"==t&&null===e||t==typeof e&&null!==e||\"object\"==t&&e===Object(e)||Object.prototype.toString.call(e).slice(8,-1).toLowerCase()==t)}function f(e){if(\"function\"==typeof e||Object(e)!==e)return e;var t=new e.constructor;for(var n in e)e[i](n)&&(t[n]=f(e[n]));return t}function y(e){var t=y.ps=y.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var n in t)t[i](n)&&n!=e&&(t[n].sleep--,!t[n].sleep&&delete t[n])}),t[e]}function g(e,t,n,i){return null==e&&(e=t=n=i=0),null==t&&(t=e.y,n=e.width,i=e.height,e=e.x),{x:e,y:t,width:n,w:n,height:i,h:i,x2:e+n,y2:t+i,cx:e+n/2,cy:t+i/2,r1:a.min(n,i)/2,r2:a.max(n,i)/2,r0:a.sqrt(n*n+i*i)/2,path:T(e,t,n,i),vb:[e,t,n,i].join(\" \")}}function v(){return this.join(\",\").replace(o,\"$1\")}function b(e){var t=f(e);return t.toString=v,t}function x(e,t,n,i,o,r,c,p,u){var h=1-u,d=l(h,3),m=l(h,2),f=u*u,y=f*u,g=e+2*u*(n-e)+f*(o-2*n+e),v=t+2*u*(i-t)+f*(r-2*i+t),b=n+2*u*(o-n)+f*(c-2*o+n),x=i+2*u*(r-i)+f*(p-2*r+i);return{x:d*e+3*m*u*n+3*h*u*u*o+y*c,y:d*t+3*m*u*i+3*h*u*u*r+y*p,m:{x:g,y:v},n:{x:b,y:x},start:{x:h*e+u*n,y:h*t+u*i},end:{x:h*o+u*c,y:h*r+u*p},alpha:90-180*a.atan2(g-b,v-x)/s}}function _(e,t,n,i,o,r,s,l){m(e,\"array\")||(e=[e,t,n,i,o,r,s,l]);var h=function(e,t,n,i,o,r,s,l){for(var h,d,m,f,y,g,v,b,x=[],_=[[],[]],w=0;w<2;++w)if(0==w?(d=6*e-12*n+6*o,h=-3*e+9*n-9*o+3*s,m=3*n-3*e):(d=6*t-12*i+6*r,h=-3*t+9*i-9*r+3*l,m=3*i-3*t),u(h)<1e-12){if(u(d)<1e-12)continue;0<(f=-m/d)&&f<1&&x.push(f)}else v=d*d-4*m*h,b=a.sqrt(v),v<0||(0<(y=(-d+b)/(2*h))&&y<1&&x.push(y),0<(g=(-d-b)/(2*h))&&g<1&&x.push(g));var E,S=x.length,P=S;for(;S--;)f=x[S],E=1-f,_[0][S]=E*E*E*e+3*E*E*f*n+3*E*f*f*o+f*f*f*s,_[1][S]=E*E*E*t+3*E*E*f*i+3*E*f*f*r+f*f*f*l;return _[0][P]=e,_[1][P]=t,_[0][P+1]=s,_[1][P+1]=l,_[0].length=_[1].length=P+2,{min:{x:c.apply(0,_[0]),y:c.apply(0,_[1])},max:{x:p.apply(0,_[0]),y:p.apply(0,_[1])}}}.apply(null,e);return g(h.min.x,h.min.y,h.max.x-h.min.x,h.max.y-h.min.y)}function w(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function E(e,t,n,i,o){return e*(e*(-3*t+9*n-9*i+3*o)+6*t-12*n+6*i)-3*t+3*n}function S(e,t,n,i,o,r,s,c,p){null==p&&(p=1);for(var l=(p=p>1?1:p<0?0:p)/2,u=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,m=0;m<12;m++){var f=l*u[m]+l,y=E(f,e,n,o,s),g=E(f,t,i,r,c),v=y*y+g*g;d+=h[m]*a.sqrt(v)}return l*d}function P(e,t,n,i,o,r,a,s){if(!(p(e,n)<c(o,a)||c(e,n)>p(o,a)||p(t,i)<c(r,s)||c(t,i)>p(r,s))){var l=(e-n)*(r-s)-(t-i)*(o-a);if(l){var u=((e*i-t*n)*(o-a)-(e-n)*(o*s-r*a))/l,h=((e*i-t*n)*(r-s)-(t-i)*(o*s-r*a))/l,d=+u.toFixed(2),m=+h.toFixed(2);if(!(d<+c(e,n).toFixed(2)||d>+p(e,n).toFixed(2)||d<+c(o,a).toFixed(2)||d>+p(o,a).toFixed(2)||m<+c(t,i).toFixed(2)||m>+p(t,i).toFixed(2)||m<+c(r,s).toFixed(2)||m>+p(r,s).toFixed(2)))return{x:u,y:h}}}}function C(e,t,n){if(!function(e,t){return e=g(e),w(t=g(t),e.x,e.y)||w(t,e.x2,e.y)||w(t,e.x,e.y2)||w(t,e.x2,e.y2)||w(e,t.x,t.y)||w(e,t.x2,t.y)||w(e,t.x,t.y2)||w(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}(_(e),_(t)))return n?0:[];for(var i=~~(S.apply(0,e)/5),o=~~(S.apply(0,t)/5),r=[],a=[],s={},c=n?0:[],p=0;p<i+1;p++){var l=x.apply(0,e.concat(p/i));r.push({x:l.x,y:l.y,t:p/i})}for(p=0;p<o+1;p++)l=x.apply(0,t.concat(p/o)),a.push({x:l.x,y:l.y,t:p/o});for(p=0;p<i;p++)for(var h=0;h<o;h++){var d=r[p],m=r[p+1],f=a[h],y=a[h+1],v=u(m.x-d.x)<.01?\"y\":\"x\",b=u(y.x-f.x)<.01?\"y\":\"x\",E=P(d.x,d.y,m.x,m.y,f.x,f.y,y.x,y.y);if(E){if(s[E.x.toFixed(0)]==E.y.toFixed(0))continue;s[E.x.toFixed(0)]=E.y.toFixed(0);var C=d.t+u((E[v]-d[v])/(m[v]-d[v]))*(m.t-d.t),T=f.t+u((E[b]-f[b])/(y[b]-f[b]))*(y.t-f.t);C>=0&&C<=1&&T>=0&&T<=1&&(n?c++:c.push({x:E.x,y:E.y,t1:C,t2:T}))}}return c}function T(e,t,n,i,o){if(o)return[[\"M\",+e+ +o,t],[\"l\",n-2*o,0],[\"a\",o,o,0,0,1,o,o],[\"l\",0,i-2*o],[\"a\",o,o,0,0,1,-o,o],[\"l\",2*o-n,0],[\"a\",o,o,0,0,1,-o,-o],[\"l\",0,2*o-i],[\"a\",o,o,0,0,1,o,-o],[\"z\"]];var r=[[\"M\",e,t],[\"l\",n,0],[\"l\",0,i],[\"l\",-n,0],[\"z\"]];return r.toString=v,r}function R(e,t,n,i,o){if(null==o&&null==i&&(i=n),e=+e,t=+t,n=+n,i=+i,null!=o)var r=Math.PI/180,a=e+n*Math.cos(-i*r),s=e+n*Math.cos(-o*r),c=[[\"M\",a,t+n*Math.sin(-i*r)],[\"A\",n,n,0,+(o-i>180),0,s,t+n*Math.sin(-o*r)]];else c=[[\"M\",e,t],[\"m\",0,-i],[\"a\",n,i,0,1,1,0,2*i],[\"a\",n,i,0,1,1,0,-2*i],[\"z\"]];return c.toString=v,c}function M(e){var t=y(e);if(t.abs)return b(t.abs);if(m(e,\"array\")&&m(e&&e[0],\"array\")||(e=function(e){if(!e)return null;var t=y(e);if(t.arr)return f(t.arr);var n={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},i=[];return m(e,\"array\")&&m(e[0],\"array\")&&(i=f(e)),i.length||String(e).replace(h,function(e,t,o){var r=[],a=t.toLowerCase();if(o.replace(d,function(e,t){t&&r.push(+t)}),\"m\"==a&&r.length>2&&(i.push([t].concat(r.splice(0,2))),a=\"l\",t=\"m\"==t?\"l\":\"L\"),\"o\"==a&&1==r.length&&i.push([t,r[0]]),\"r\"==a)i.push([t].concat(r));else for(;r.length>=n[a]&&(i.push([t].concat(r.splice(0,n[a]))),n[a]););}),i.toString=y.toString,t.arr=f(i),i}(e)),!e||!e.length)return[[\"M\",0,0]];var n,i=[],o=0,r=0,a=0,s=0,c=0;\"M\"==e[0][0]&&(a=o=+e[0][1],s=r=+e[0][2],c++,i[0]=[\"M\",o,r]);for(var p,l,u=3==e.length&&\"M\"==e[0][0]&&\"R\"==e[1][0].toUpperCase()&&\"Z\"==e[2][0].toUpperCase(),g=c,x=e.length;g<x;g++){if(i.push(p=[]),(n=(l=e[g])[0])!=n.toUpperCase())switch(p[0]=n.toUpperCase(),p[0]){case\"A\":p[1]=l[1],p[2]=l[2],p[3]=l[3],p[4]=l[4],p[5]=l[5],p[6]=+l[6]+o,p[7]=+l[7]+r;break;case\"V\":p[1]=+l[1]+r;break;case\"H\":p[1]=+l[1]+o;break;case\"R\":for(var _=[o,r].concat(l.slice(1)),w=2,E=_.length;w<E;w++)_[w]=+_[w]+o,_[++w]=+_[w]+r;i.pop(),i=i.concat(N(_,u));break;case\"O\":i.pop(),(_=R(o,r,l[1],l[2])).push(_[0]),i=i.concat(_);break;case\"U\":i.pop(),i=i.concat(R(o,r,l[1],l[2],l[3])),p=[\"U\"].concat(i[i.length-1].slice(-2));break;case\"M\":a=+l[1]+o,s=+l[2]+r;default:for(w=1,E=l.length;w<E;w++)p[w]=+l[w]+(w%2?o:r)}else if(\"R\"==n)_=[o,r].concat(l.slice(1)),i.pop(),i=i.concat(N(_,u)),p=[\"R\"].concat(l.slice(-2));else if(\"O\"==n)i.pop(),(_=R(o,r,l[1],l[2])).push(_[0]),i=i.concat(_);else if(\"U\"==n)i.pop(),i=i.concat(R(o,r,l[1],l[2],l[3])),p=[\"U\"].concat(i[i.length-1].slice(-2));else for(var S=0,P=l.length;S<P;S++)p[S]=l[S];if(\"O\"!=(n=n.toUpperCase()))switch(p[0]){case\"Z\":o=+a,r=+s;break;case\"H\":o=p[1];break;case\"V\":r=p[1];break;case\"M\":a=p[p.length-2],s=p[p.length-1];default:o=p[p.length-2],r=p[p.length-1]}}return i.toString=v,t.abs=b(i),i}function A(e,t,n,i){return[e,t,n,i,n,i]}function k(e,t,n,i,o,r){return[1/3*e+2/3*n,1/3*t+2/3*i,1/3*o+2/3*n,1/3*r+2/3*i,o,r]}function B(e,t,n,o,r,c,p,l,h,d){var m,f,y,g,v=120*s/180,b=s/180*(+r||0),x=[],_=(f=function(e,t,n){return{x:e*a.cos(n)-t*a.sin(n),y:e*a.sin(n)+t*a.cos(n)}},function e(){var t=Array.prototype.slice.call(arguments,0),n=t.join(\"␀\"),o=e.cache=e.cache||{},r=e.count=e.count||[];return o[i](n)?(function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}(r,n),g?g(o[n]):o[n]):(r.length>=1e3&&delete o[r.shift()],r.push(n),o[n]=f.apply(y,t),g?g(o[n]):o[n])});if(d)A=d[0],k=d[1],R=d[2],M=d[3];else{e=(m=_(e,t,-b)).x,t=m.y;var w=(e-(l=(m=_(l,h,-b)).x))/2,E=(t-(h=m.y))/2,S=w*w/(n*n)+E*E/(o*o);S>1&&(n*=S=a.sqrt(S),o*=S);var P=n*n,C=o*o,T=(c==p?-1:1)*a.sqrt(u((P*C-P*E*E-C*w*w)/(P*E*E+C*w*w))),R=T*n*E/o+(e+l)/2,M=T*-o*w/n+(t+h)/2,A=a.asin(((t-M)/o).toFixed(9)),k=a.asin(((h-M)/o).toFixed(9));(A=e<R?s-A:A)<0&&(A=2*s+A),(k=l<R?s-k:k)<0&&(k=2*s+k),p&&A>k&&(A-=2*s),!p&&k>A&&(k-=2*s)}var N=k-A;if(u(N)>v){var D=k,O=l,L=h;k=A+v*(p&&k>A?1:-1),x=B(l=R+n*a.cos(k),h=M+o*a.sin(k),n,o,r,0,p,O,L,[k,D,R,M])}N=k-A;var j=a.cos(A),I=a.sin(A),z=a.cos(k),F=a.sin(k),$=a.tan(N/4),V=4/3*n*$,H=4/3*o*$,W=[e,t],G=[e+V*I,t-H*j],q=[l+V*F,h-H*z],U=[l,h];if(G[0]=2*W[0]-G[0],G[1]=2*W[1]-G[1],d)return[G,q,U].concat(x);for(var K=[],Y=0,X=(x=[G,q,U].concat(x).join().split(\",\")).length;Y<X;Y++)K[Y]=Y%2?_(x[Y-1],x[Y],b).y:_(x[Y],x[Y+1],b).x;return K}function N(e,t){for(var n=[],i=0,o=e.length;o-2*!t>i;i+=2){var r=[{x:+e[i-2],y:+e[i-1]},{x:+e[i],y:+e[i+1]},{x:+e[i+2],y:+e[i+3]},{x:+e[i+4],y:+e[i+5]}];t?i?o-4==i?r[3]={x:+e[0],y:+e[1]}:o-2==i&&(r[2]={x:+e[0],y:+e[1]},r[3]={x:+e[2],y:+e[3]}):r[0]={x:+e[o-2],y:+e[o-1]}:o-4==i?r[3]=r[2]:i||(r[0]={x:+e[i],y:+e[i+1]}),n.push([\"C\",(-r[0].x+6*r[1].x+r[2].x)/6,(-r[0].y+6*r[1].y+r[2].y)/6,(r[1].x+6*r[2].x-r[3].x)/6,(r[1].y+6*r[2].y-r[3].y)/6,r[2].x,r[2].y])}return n}function D(e,t){var n=!t&&y(e);if(!t&&n.curve)return b(n.curve);for(var i=M(e),o=t&&M(t),a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},c=function(e,t,n){var i,o;if(!e)return[\"C\",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case\"M\":t.X=e[1],t.Y=e[2];break;case\"A\":e=[\"C\"].concat(B.apply(0,[t.x,t.y].concat(e.slice(1))));break;case\"S\":\"C\"==n||\"S\"==n?(i=2*t.x-t.bx,o=2*t.y-t.by):(i=t.x,o=t.y),e=[\"C\",i,o].concat(e.slice(1));break;case\"T\":\"Q\"==n||\"T\"==n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=[\"C\"].concat(k(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case\"Q\":t.qx=e[1],t.qy=e[2],e=[\"C\"].concat(k(t.x,t.y,e[1],e[2],e[3],e[4]));break;case\"L\":e=[\"C\"].concat(A(t.x,t.y,e[1],e[2]));break;case\"H\":e=[\"C\"].concat(A(t.x,t.y,e[1],t.y));break;case\"V\":e=[\"C\"].concat(A(t.x,t.y,t.x,e[1]));break;case\"Z\":e=[\"C\"].concat(A(t.x,t.y,t.X,t.Y))}return e},l=function(e,t){if(e[t].length>7){e[t].shift();for(var n=e[t];n.length;)h[t]=\"A\",o&&(d[t]=\"A\"),e.splice(t++,0,[\"C\"].concat(n.splice(0,6)));e.splice(t,1),v=p(i.length,o&&o.length||0)}},u=function(e,t,n,r,a){e&&t&&\"M\"==e[a][0]&&\"M\"!=t[a][0]&&(t.splice(a,0,[\"M\",r.x,r.y]),n.bx=0,n.by=0,n.x=e[a][1],n.y=e[a][2],v=p(i.length,o&&o.length||0))},h=[],d=[],m=\"\",f=\"\",g=0,v=p(i.length,o&&o.length||0);g<v;g++){i[g]&&(m=i[g][0]),\"C\"!=m&&(h[g]=m,g&&(f=h[g-1])),i[g]=c(i[g],a,f),\"A\"!=h[g]&&\"C\"==m&&(h[g]=\"C\"),l(i,g),o&&(o[g]&&(m=o[g][0]),\"C\"!=m&&(d[g]=m,g&&(f=d[g-1])),o[g]=c(o[g],s,f),\"A\"!=d[g]&&\"C\"==m&&(d[g]=\"C\"),l(o,g)),u(i,o,a,s,g),u(o,i,s,a,g);var x=i[g],_=o&&o[g],w=x.length,E=o&&_.length;a.x=x[w-2],a.y=x[w-1],a.bx=r(x[w-4])||a.x,a.by=r(x[w-3])||a.y,s.bx=o&&(r(_[E-4])||s.x),s.by=o&&(r(_[E-3])||s.y),s.x=o&&_[E-2],s.y=o&&_[E-1]}return o||(n.curve=b(i)),o?[i,o]:i}e.exports=function(e,t,n){e=D(e),t=D(t);for(var i,o,r,a,s,c,p,l,u,h,d=n?0:[],m=0,f=e.length;m<f;m++){var y=e[m];if(\"M\"==y[0])i=s=y[1],o=c=y[2];else{\"C\"==y[0]?(u=[i,o].concat(y.slice(1)),i=u[6],o=u[7]):(u=[i,o,i,o,s,c,s,c],i=s,o=c);for(var g=0,v=t.length;g<v;g++){var b=t[g];if(\"M\"==b[0])r=p=b[1],a=l=b[2];else{\"C\"==b[0]?(h=[r,a].concat(b.slice(1)),r=h[6],a=h[7]):(h=[r,a,r,a,p,l,p,l],r=p,a=l);var x=C(u,h,n);if(n)d+=x;else{for(var _=0,w=x.length;_<w;_++)x[_].segment1=m,x[_].segment2=g,x[_].bez1=u,x[_].bez2=h;d=d.concat(x)}}}}}return d}},function(e,t,n){\"use strict\";var i=n(18);function o(e){if(!(this instanceof o))return new o(e);e=e||[128,36,1],this._seed=e.length?i.rack(e[0],e[1],e[2]):e}e.exports=o,o.prototype.next=function(e){return this._seed(e||!0)},o.prototype.nextPrefixed=function(e,t){var n;do{n=e+this.next(!0)}while(this.assigned(n));return this.claim(n,t),n},o.prototype.claim=function(e,t){this._seed.set(e,t||!0)},o.prototype.assigned=function(e){return this._seed.get(e)||!1},o.prototype.unclaim=function(e){delete this._seed.hats[e]},o.prototype.clear=function(){var e,t=this._seed.hats;for(e in t)this.unclaim(e)}},function(e,t,n){\"use strict\";e.exports.extend=function(e,t,n,i){var o=n.inverse;return Object.defineProperty(e,\"remove\",{value:function(e){var n=this.indexOf(e);return-1!==n&&(this.splice(n,1),t.unset(e,o,i)),e}}),Object.defineProperty(e,\"contains\",{value:function(e){return-1!==this.indexOf(e)}}),Object.defineProperty(e,\"add\",{value:function(e,n){var r=this.indexOf(e);if(void 0===n){if(-1!==r)return;n=this.length}-1!==r&&this.splice(r,1),this.splice(n,0,e),-1===r&&t.set(e,o,i)}}),Object.defineProperty(e,\"__refs_collection\",{value:!0}),e},e.exports.isExtended=function(e){return!0===e.__refs_collection}},function(e,t){var n;n=function(){return this}();try{n=n||new Function(\"return this\")()}catch(e){\"object\"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports='<?xml version=\"1.0\" encoding=\"UTF-8\"?>\\n<semantic:definitions xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:di=\"http://www.omg.org/spec/DD/20100524/DI\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:dc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:semantic=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" id=\"_1275940932088\" targetNamespace=\"http://www.trisotech.com/definitions/_1275940932088\">\\n  <semantic:message id=\"_1275940932310\" />\\n  <semantic:message id=\"_1275940932433\" />\\n  <semantic:process id=\"_6-1\" isExecutable=\"false\">\\n    <semantic:laneSet id=\"ls_6-438\">\\n      <semantic:lane id=\"_6-650\" name=\"clerk\">\\n        <semantic:flowNodeRef>OrderReceivedEvent</semantic:flowNodeRef>\\n        <semantic:flowNodeRef>_6-652</semantic:flowNodeRef>\\n        <semantic:flowNodeRef>_6-674</semantic:flowNodeRef>\\n        <semantic:flowNodeRef>CalmCustomerTask</semantic:flowNodeRef>\\n      </semantic:lane>\\n      <semantic:lane id=\"_6-446\" name=\"pizza chef\">\\n        <semantic:flowNodeRef>_6-463</semantic:flowNodeRef>\\n      </semantic:lane>\\n      <semantic:lane id=\"_6-448\" name=\"delivery boy\">\\n        <semantic:flowNodeRef>_6-514</semantic:flowNodeRef>\\n        <semantic:flowNodeRef>_6-565</semantic:flowNodeRef>\\n        <semantic:flowNodeRef>_6-616</semantic:flowNodeRef>\\n      </semantic:lane>\\n    </semantic:laneSet>\\n    <semantic:startEvent id=\"OrderReceivedEvent\" name=\"Order received\">\\n      <semantic:outgoing>_6-630</semantic:outgoing>\\n      <semantic:messageEventDefinition messageRef=\"_1275940932310\" />\\n    </semantic:startEvent>\\n    <semantic:parallelGateway id=\"_6-652\" name=\"\">\\n      <semantic:incoming>_6-630</semantic:incoming>\\n      <semantic:outgoing>_6-691</semantic:outgoing>\\n      <semantic:outgoing>_6-693</semantic:outgoing>\\n    </semantic:parallelGateway>\\n    <semantic:intermediateCatchEvent id=\"_6-674\" name=\"„where is my pizza?“\">\\n      <semantic:incoming>_6-691</semantic:incoming>\\n      <semantic:incoming>_6-746</semantic:incoming>\\n      <semantic:outgoing>_6-748</semantic:outgoing>\\n      <semantic:messageEventDefinition messageRef=\"_1275940932433\" />\\n    </semantic:intermediateCatchEvent>\\n    <semantic:task id=\"CalmCustomerTask\" name=\"Calm customer\">\\n      <semantic:incoming>_6-748</semantic:incoming>\\n      <semantic:outgoing>_6-746</semantic:outgoing>\\n    </semantic:task>\\n    <semantic:task id=\"_6-463\" name=\"Bake the pizza\">\\n      <semantic:incoming>_6-693</semantic:incoming>\\n      <semantic:outgoing>_6-632</semantic:outgoing>\\n    </semantic:task>\\n    <semantic:task id=\"_6-514\" name=\"Deliver the pizza\">\\n      <semantic:incoming>_6-632</semantic:incoming>\\n      <semantic:outgoing>_6-634</semantic:outgoing>\\n    </semantic:task>\\n    <semantic:task id=\"_6-565\" name=\"Receive payment\">\\n      <semantic:incoming>_6-634</semantic:incoming>\\n      <semantic:outgoing>_6-636</semantic:outgoing>\\n    </semantic:task>\\n    <semantic:endEvent id=\"_6-616\" name=\"\">\\n      <semantic:incoming>_6-636</semantic:incoming>\\n      <semantic:terminateEventDefinition />\\n    </semantic:endEvent>\\n    <semantic:sequenceFlow id=\"_6-630\" name=\"\" sourceRef=\"OrderReceivedEvent\" targetRef=\"_6-652\" />\\n    <semantic:sequenceFlow id=\"_6-632\" name=\"\" sourceRef=\"_6-463\" targetRef=\"_6-514\" />\\n    <semantic:sequenceFlow id=\"_6-634\" name=\"\" sourceRef=\"_6-514\" targetRef=\"_6-565\" />\\n    <semantic:sequenceFlow id=\"_6-636\" name=\"\" sourceRef=\"_6-565\" targetRef=\"_6-616\" />\\n    <semantic:sequenceFlow id=\"_6-691\" name=\"\" sourceRef=\"_6-652\" targetRef=\"_6-674\" />\\n    <semantic:sequenceFlow id=\"_6-693\" name=\"\" sourceRef=\"_6-652\" targetRef=\"_6-463\" />\\n    <semantic:sequenceFlow id=\"_6-746\" name=\"\" sourceRef=\"CalmCustomerTask\" targetRef=\"_6-674\" />\\n    <semantic:sequenceFlow id=\"_6-748\" name=\"\" sourceRef=\"_6-674\" targetRef=\"CalmCustomerTask\" />\\n  </semantic:process>\\n  <semantic:message id=\"_1275940932198\" />\\n  <semantic:process id=\"_6-2\" isExecutable=\"false\">\\n    <semantic:startEvent id=\"_6-61\" name=\"Hungry for pizza\">\\n      <semantic:outgoing>_6-125</semantic:outgoing>\\n    </semantic:startEvent>\\n    <semantic:task id=\"_6-74\" name=\"Select a pizza\">\\n      <semantic:incoming>_6-125</semantic:incoming>\\n      <semantic:outgoing>_6-178</semantic:outgoing>\\n    </semantic:task>\\n    <semantic:task id=\"Task_1\" name=\"Order a pizza\">\\n      <semantic:incoming>_6-178</semantic:incoming>\\n      <semantic:outgoing>_6-420</semantic:outgoing>\\n    </semantic:task>\\n    <semantic:eventBasedGateway id=\"_6-180\" name=\"\">\\n      <semantic:incoming>_6-420</semantic:incoming>\\n      <semantic:incoming>_6-430</semantic:incoming>\\n      <semantic:outgoing>_6-422</semantic:outgoing>\\n      <semantic:outgoing>_6-424</semantic:outgoing>\\n    </semantic:eventBasedGateway>\\n    <semantic:intermediateCatchEvent id=\"_6-202\" name=\"pizza received\">\\n      <semantic:incoming>_6-422</semantic:incoming>\\n      <semantic:outgoing>_6-428</semantic:outgoing>\\n      <semantic:messageEventDefinition messageRef=\"_1275940932198\" />\\n    </semantic:intermediateCatchEvent>\\n    <semantic:intermediateCatchEvent id=\"_6-219\" name=\"60 minutes\">\\n      <semantic:incoming>_6-424</semantic:incoming>\\n      <semantic:outgoing>_6-426</semantic:outgoing>\\n      <semantic:timerEventDefinition>\\n        <semantic:timeDate xsi:type=\"semantic:tExpression\" />\\n      </semantic:timerEventDefinition>\\n    </semantic:intermediateCatchEvent>\\n    <semantic:task id=\"Task_2\" name=\"Ask for the pizza\">\\n      <semantic:incoming>_6-426</semantic:incoming>\\n      <semantic:outgoing>_6-430</semantic:outgoing>\\n    </semantic:task>\\n    <semantic:task id=\"_6-304\" name=\"Pay the pizza\">\\n      <semantic:incoming>_6-428</semantic:incoming>\\n      <semantic:outgoing>_6-434</semantic:outgoing>\\n    </semantic:task>\\n    <semantic:task id=\"Task_3\" name=\"Eat the pizza\">\\n      <semantic:incoming>_6-434</semantic:incoming>\\n      <semantic:outgoing>_6-436</semantic:outgoing>\\n    </semantic:task>\\n    <semantic:endEvent id=\"_6-406\" name=\"Hunger satisfied\">\\n      <semantic:incoming>_6-436</semantic:incoming>\\n    </semantic:endEvent>\\n    <semantic:sequenceFlow id=\"_6-125\" name=\"\" sourceRef=\"_6-61\" targetRef=\"_6-74\" />\\n    <semantic:sequenceFlow id=\"_6-178\" name=\"\" sourceRef=\"_6-74\" targetRef=\"Task_1\" />\\n    <semantic:sequenceFlow id=\"_6-420\" name=\"\" sourceRef=\"Task_1\" targetRef=\"_6-180\" />\\n    <semantic:sequenceFlow id=\"_6-422\" name=\"\" sourceRef=\"_6-180\" targetRef=\"_6-202\" />\\n    <semantic:sequenceFlow id=\"_6-424\" name=\"\" sourceRef=\"_6-180\" targetRef=\"_6-219\" />\\n    <semantic:sequenceFlow id=\"_6-426\" name=\"\" sourceRef=\"_6-219\" targetRef=\"Task_2\" />\\n    <semantic:sequenceFlow id=\"_6-428\" name=\"\" sourceRef=\"_6-202\" targetRef=\"_6-304\" />\\n    <semantic:sequenceFlow id=\"_6-430\" name=\"\" sourceRef=\"Task_2\" targetRef=\"_6-180\" />\\n    <semantic:sequenceFlow id=\"_6-434\" name=\"\" sourceRef=\"_6-304\" targetRef=\"Task_3\" />\\n    <semantic:sequenceFlow id=\"_6-436\" name=\"\" sourceRef=\"Task_3\" targetRef=\"_6-406\" />\\n  </semantic:process>\\n  <semantic:collaboration id=\"C1275940932557\">\\n    <semantic:participant id=\"_6-53\" name=\"Pizza Customer\" processRef=\"_6-2\" />\\n    <semantic:participant id=\"_6-438\" name=\"Pizza vendor\" processRef=\"_6-1\" />\\n    <semantic:messageFlow id=\"_6-638\" name=\"pizza order\" sourceRef=\"Task_1\" targetRef=\"OrderReceivedEvent\" />\\n    <semantic:messageFlow id=\"_6-642\" name=\"\" sourceRef=\"Task_2\" targetRef=\"_6-674\" />\\n    <semantic:messageFlow id=\"_6-646\" name=\"receipt\" sourceRef=\"_6-565\" targetRef=\"_6-304\" />\\n    <semantic:messageFlow id=\"_6-648\" name=\"money\" sourceRef=\"_6-304\" targetRef=\"_6-565\" />\\n    <semantic:messageFlow id=\"_6-640\" name=\"pizza\" sourceRef=\"_6-514\" targetRef=\"_6-202\" />\\n    <semantic:messageFlow id=\"_6-750\" name=\"\" sourceRef=\"CalmCustomerTask\" targetRef=\"Task_2\" />\\n  </semantic:collaboration>\\n  <bpmndi:BPMNDiagram id=\"Trisotech.Visio-_6\" name=\"Untitled Diagram\" documentation=\"\" resolution=\"96.00000267028808\">\\n    <bpmndi:BPMNPlane bpmnElement=\"C1275940932557\">\\n      <bpmndi:BPMNShape id=\"Trisotech.Visio__6-53\" bpmnElement=\"_6-53\" isHorizontal=\"true\">\\n        <dc:Bounds x=\"12\" y=\"12\" width=\"1044\" height=\"294\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNShape>\\n      <bpmndi:BPMNShape id=\"Trisotech.Visio__6-438\" bpmnElement=\"_6-438\" isHorizontal=\"true\">\\n        <dc:Bounds x=\"12\" y=\"372\" width=\"905\" height=\"337\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNShape>\\n      <bpmndi:BPMNShape id=\"Trisotech.Visio__6__6-650\" bpmnElement=\"_6-650\" isHorizontal=\"true\">\\n        <dc:Bounds x=\"42\" y=\"372\" width=\"875\" height=\"114\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNShape>\\n      <bpmndi:BPMNShape id=\"Trisotech.Visio__6__6-446\" bpmnElement=\"_6-446\" isHorizontal=\"true\">\\n        <dc:Bounds x=\"42\" y=\"486\" width=\"875\" height=\"114\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNShape>\\n      <bpmndi:BPMNShape id=\"Trisotech.Visio__6__6-448\" bpmnElement=\"_6-448\" isHorizontal=\"true\">\\n        <dc:Bounds x=\"42\" y=\"600\" width=\"875\" height=\"109\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNShape>\\n      <bpmndi:BPMNShape id=\"Trisotech.Visio__6_OrderReceivedEvent\" bpmnElement=\"OrderReceivedEvent\">\\n        <dc:Bounds x=\"79\" y=\"405\" width=\"30\" height=\"30\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNShape>\\n      <bpmndi:BPMNShape id=\"Trisotech.Visio__6__6-652\" bpmnElement=\"_6-652\">\\n        <dc:Bounds x=\"140\" y=\"399\" width=\"42\" height=\"42\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNShape>\\n      <bpmndi:BPMNShape id=\"Trisotech.Visio__6__6-674\" bpmnElement=\"_6-674\">\\n        <dc:Bounds x=\"218\" y=\"404\" width=\"32\" height=\"32\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNShape>\\n      <bpmndi:BPMNShape id=\"Trisotech.Visio__6_CalmCustomerTask\" bpmnElement=\"CalmCustomerTask\">\\n        <dc:Bounds x=\"286\" y=\"386\" width=\"83\" height=\"68\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNShape>\\n      <bpmndi:BPMNShape id=\"Trisotech.Visio__6__6-463\" bpmnElement=\"_6-463\">\\n        <dc:Bounds x=\"252\" y=\"521\" width=\"83\" height=\"68\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNShape>\\n      <bpmndi:BPMNShape id=\"Trisotech.Visio__6__6-514\" bpmnElement=\"_6-514\">\\n        <dc:Bounds x=\"464\" y=\"629\" width=\"83\" height=\"68\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNShape>\\n      <bpmndi:BPMNShape id=\"Trisotech.Visio__6__6-565\" bpmnElement=\"_6-565\">\\n        <dc:Bounds x=\"603\" y=\"629\" width=\"83\" height=\"68\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNShape>\\n      <bpmndi:BPMNShape id=\"Trisotech.Visio__6__6-616\" bpmnElement=\"_6-616\">\\n        <dc:Bounds x=\"722\" y=\"647\" width=\"32\" height=\"32\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNShape>\\n      <bpmndi:BPMNShape id=\"Trisotech.Visio__6__6-61\" bpmnElement=\"_6-61\">\\n        <dc:Bounds x=\"66\" y=\"96\" width=\"30\" height=\"30\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNShape>\\n      <bpmndi:BPMNShape id=\"Trisotech.Visio__6__6-74\" bpmnElement=\"_6-74\">\\n        <dc:Bounds x=\"145\" y=\"77\" width=\"83\" height=\"68\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNShape>\\n      <bpmndi:BPMNShape id=\"Trisotech.Visio__6__6-127\" bpmnElement=\"Task_1\">\\n        <dc:Bounds x=\"265\" y=\"77\" width=\"83\" height=\"68\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNShape>\\n      <bpmndi:BPMNShape id=\"Trisotech.Visio__6__6-180\" bpmnElement=\"_6-180\">\\n        <dc:Bounds x=\"378\" y=\"90\" width=\"42\" height=\"42\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNShape>\\n      <bpmndi:BPMNShape id=\"Trisotech.Visio__6__6-202\" bpmnElement=\"_6-202\">\\n        <dc:Bounds x=\"647\" y=\"95\" width=\"32\" height=\"32\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNShape>\\n      <bpmndi:BPMNShape id=\"Trisotech.Visio__6__6-219\" bpmnElement=\"_6-219\">\\n        <dc:Bounds x=\"448\" y=\"184\" width=\"32\" height=\"32\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNShape>\\n      <bpmndi:BPMNShape id=\"Trisotech.Visio__6__6-236\" bpmnElement=\"Task_2\">\\n        <dc:Bounds x=\"517\" y=\"166\" width=\"83\" height=\"68\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNShape>\\n      <bpmndi:BPMNShape id=\"Trisotech.Visio__6__6-304\" bpmnElement=\"_6-304\">\\n        <dc:Bounds x=\"726\" y=\"77\" width=\"83\" height=\"68\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNShape>\\n      <bpmndi:BPMNShape id=\"Trisotech.Visio__6__6-355\" bpmnElement=\"Task_3\">\\n        <dc:Bounds x=\"834\" y=\"77\" width=\"83\" height=\"68\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNShape>\\n      <bpmndi:BPMNShape id=\"Trisotech.Visio__6__6-406\" bpmnElement=\"_6-406\">\\n        <dc:Bounds x=\"956\" y=\"95\" width=\"32\" height=\"32\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNShape>\\n      <bpmndi:BPMNEdge id=\"Trisotech.Visio__6__6-640\" bpmnElement=\"_6-640\">\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"506\" y=\"629\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"506\" y=\"384\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"663\" y=\"384\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"663\" y=\"127\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNEdge>\\n      <bpmndi:BPMNEdge id=\"Trisotech.Visio__6__6-630\" bpmnElement=\"_6-630\">\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"109\" y=\"420\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"140\" y=\"420\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNEdge>\\n      <bpmndi:BPMNEdge id=\"Trisotech.Visio__6__6-691\" bpmnElement=\"_6-691\">\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"182\" y=\"420\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"200\" y=\"420\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"218\" y=\"420\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNEdge>\\n      <bpmndi:BPMNEdge id=\"Trisotech.Visio__6__6-648\" bpmnElement=\"_6-648\">\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"754\" y=\"145\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"754\" y=\"408\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"630\" y=\"408\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"631\" y=\"629\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNEdge>\\n      <bpmndi:BPMNEdge id=\"Trisotech.Visio__6__6-422\" bpmnElement=\"_6-422\">\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"420\" y=\"111\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"438\" y=\"111\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"647\" y=\"111\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNEdge>\\n      <bpmndi:BPMNEdge id=\"Trisotech.Visio__6__6-646\" bpmnElement=\"_6-646\" messageVisibleKind=\"non_initiating\">\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"658\" y=\"629\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"658\" y=\"432\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"782\" y=\"432\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"782\" y=\"145\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNEdge>\\n      <bpmndi:BPMNEdge id=\"Trisotech.Visio__6__6-428\" bpmnElement=\"_6-428\">\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"679\" y=\"111\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"726\" y=\"111\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNEdge>\\n      <bpmndi:BPMNEdge id=\"Trisotech.Visio__6__6-748\" bpmnElement=\"_6-748\">\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"250\" y=\"420\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"268\" y=\"420\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"286\" y=\"420\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNEdge>\\n      <bpmndi:BPMNEdge id=\"Trisotech.Visio__6__6-420\" bpmnElement=\"_6-420\">\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"348\" y=\"111\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"366\" y=\"111\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"378\" y=\"111\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNEdge>\\n      <bpmndi:BPMNEdge id=\"Trisotech.Visio__6__6-636\" bpmnElement=\"_6-636\">\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"686\" y=\"663\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"704\" y=\"663\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"722\" y=\"663\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNEdge>\\n      <bpmndi:BPMNEdge id=\"Trisotech.Visio__6__6-750\" bpmnElement=\"_6-750\">\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"328\" y=\"386\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"328\" y=\"348\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"572\" y=\"348\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"572\" y=\"234\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNEdge>\\n      <bpmndi:BPMNEdge id=\"Trisotech.Visio__6__6-436\" bpmnElement=\"_6-436\">\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"918\" y=\"111\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"936\" y=\"111\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"956\" y=\"111\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNEdge>\\n      <bpmndi:BPMNEdge id=\"Trisotech.Visio__6__6-632\" bpmnElement=\"_6-632\">\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"335\" y=\"555\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"353\" y=\"555\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"353\" y=\"663\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"464\" y=\"663\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNEdge>\\n      <bpmndi:BPMNEdge id=\"Trisotech.Visio__6__6-634\" bpmnElement=\"_6-634\">\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"548\" y=\"663\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"603\" y=\"663\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNEdge>\\n      <bpmndi:BPMNEdge id=\"Trisotech.Visio__6__6-125\" bpmnElement=\"_6-125\">\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"96\" y=\"111\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"114\" y=\"111\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"145\" y=\"111\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNEdge>\\n      <bpmndi:BPMNEdge id=\"Trisotech.Visio__6__6-430\" bpmnElement=\"_6-430\">\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"600\" y=\"200\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"618\" y=\"200\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"618\" y=\"252\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"576\" y=\"252\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"549\" y=\"252\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"360\" y=\"252\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"360\" y=\"111\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"378\" y=\"111\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNEdge>\\n      <bpmndi:BPMNEdge id=\"Trisotech.Visio__6__6-642\" bpmnElement=\"_6-642\">\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"545\" y=\"234\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"545\" y=\"324\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"234\" y=\"324\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"234\" y=\"404\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNEdge>\\n      <bpmndi:BPMNEdge id=\"Trisotech.Visio__6__6-424\" bpmnElement=\"_6-424\">\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"399\" y=\"132\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"399\" y=\"200\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"448\" y=\"200\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNEdge>\\n      <bpmndi:BPMNEdge id=\"Trisotech.Visio__6__6-638\" bpmnElement=\"_6-638\">\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"306\" y=\"145\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"306\" y=\"252\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"94\" y=\"252\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"94\" y=\"405\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNEdge>\\n      <bpmndi:BPMNEdge id=\"Trisotech.Visio__6__6-426\" bpmnElement=\"_6-426\">\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"480\" y=\"200\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"498\" y=\"200\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"517\" y=\"200\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNEdge>\\n      <bpmndi:BPMNEdge id=\"Trisotech.Visio__6__6-693\" bpmnElement=\"_6-693\">\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"161\" y=\"441\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"161\" y=\"556\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"252\" y=\"555\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNEdge>\\n      <bpmndi:BPMNEdge id=\"Trisotech.Visio__6__6-178\" bpmnElement=\"_6-178\">\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"228\" y=\"111\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"265\" y=\"111\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNEdge>\\n      <bpmndi:BPMNEdge id=\"Trisotech.Visio__6__6-746\" bpmnElement=\"_6-746\">\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"370\" y=\"420\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"386\" y=\"420\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"386\" y=\"474\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"191\" y=\"474\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"191\" y=\"420\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"218\" y=\"420\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNEdge>\\n      <bpmndi:BPMNEdge id=\"Trisotech.Visio__6__6-434\" bpmnElement=\"_6-434\">\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"810\" y=\"111\" />\\n        <di:waypoint xsi:type=\"dc:Point\" x=\"834\" y=\"111\" />\\n        <bpmndi:BPMNLabel />\\n      </bpmndi:BPMNEdge>\\n    </bpmndi:BPMNPlane>\\n  </bpmndi:BPMNDiagram>\\n</semantic:definitions>\\n'},function(e){e.exports=[{type:\"custom:circle\",id:\"CustomCircle_1\",x:806,y:210},{type:\"custom:triangle\",id:\"CustomTriangle_1\",x:300,y:300},{type:\"custom:connection\",id:\"CustomConnection_2\",waypoints:[{original:{x:320,y:320},x:330,y:320},{x:469,y:320},{x:469,y:225},{original:{x:559,y:200},x:517,y:212}],source:\"CustomTriangle_1\",target:\"Task_2\"},{type:\"custom:connection\",id:\"CustomConnection_1\",source:\"CustomTriangle_1\",target:\"Task_1\",waypoints:[{original:{x:319,y:302},x:319,y:302},{x:319,y:200},{x:309,y:200},{original:{x:309,y:145},x:309,y:145}]},{type:\"custom:connection\",waypoints:[{original:{x:876,y:280},x:946,y:280},{x:1028,y:280},{x:1028,y:111},{original:{x:876,y:111},x:917,y:111}],source:\"CustomCircle_1\",target:\"Task_3\"}]},function(e){e.exports={name:\"BPMN20\",uri:\"http://www.omg.org/spec/BPMN/20100524/MODEL\",associations:[],types:[{name:\"Interface\",superClass:[\"RootElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"operations\",type:\"Operation\",isMany:!0},{name:\"implementationRef\",type:\"String\",isAttr:!0}]},{name:\"Operation\",superClass:[\"BaseElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"inMessageRef\",type:\"Message\",isReference:!0},{name:\"outMessageRef\",type:\"Message\",isReference:!0},{name:\"errorRef\",type:\"Error\",isMany:!0,isReference:!0},{name:\"implementationRef\",type:\"String\",isAttr:!0}]},{name:\"EndPoint\",superClass:[\"RootElement\"]},{name:\"Auditing\",superClass:[\"BaseElement\"]},{name:\"GlobalTask\",superClass:[\"CallableElement\"],properties:[{name:\"resources\",type:\"ResourceRole\",isMany:!0}]},{name:\"Monitoring\",superClass:[\"BaseElement\"]},{name:\"Performer\",superClass:[\"ResourceRole\"]},{name:\"Process\",superClass:[\"FlowElementsContainer\",\"CallableElement\"],properties:[{name:\"processType\",type:\"ProcessType\",isAttr:!0},{name:\"isClosed\",isAttr:!0,type:\"Boolean\"},{name:\"auditing\",type:\"Auditing\"},{name:\"monitoring\",type:\"Monitoring\"},{name:\"properties\",type:\"Property\",isMany:!0},{name:\"laneSets\",type:\"LaneSet\",isMany:!0,replaces:\"FlowElementsContainer#laneSets\"},{name:\"flowElements\",type:\"FlowElement\",isMany:!0,replaces:\"FlowElementsContainer#flowElements\"},{name:\"artifacts\",type:\"Artifact\",isMany:!0},{name:\"resources\",type:\"ResourceRole\",isMany:!0},{name:\"correlationSubscriptions\",type:\"CorrelationSubscription\",isMany:!0},{name:\"supports\",type:\"Process\",isMany:!0,isReference:!0},{name:\"definitionalCollaborationRef\",type:\"Collaboration\",isAttr:!0,isReference:!0},{name:\"isExecutable\",isAttr:!0,type:\"Boolean\"}]},{name:\"LaneSet\",superClass:[\"BaseElement\"],properties:[{name:\"lanes\",type:\"Lane\",isMany:!0},{name:\"name\",isAttr:!0,type:\"String\"}]},{name:\"Lane\",superClass:[\"BaseElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"partitionElementRef\",type:\"BaseElement\",isAttr:!0,isReference:!0},{name:\"partitionElement\",type:\"BaseElement\"},{name:\"flowNodeRef\",type:\"FlowNode\",isMany:!0,isReference:!0},{name:\"childLaneSet\",type:\"LaneSet\",xml:{serialize:\"xsi:type\"}}]},{name:\"GlobalManualTask\",superClass:[\"GlobalTask\"]},{name:\"ManualTask\",superClass:[\"Task\"]},{name:\"UserTask\",superClass:[\"Task\"],properties:[{name:\"renderings\",type:\"Rendering\",isMany:!0},{name:\"implementation\",isAttr:!0,type:\"String\"}]},{name:\"Rendering\",superClass:[\"BaseElement\"]},{name:\"HumanPerformer\",superClass:[\"Performer\"]},{name:\"PotentialOwner\",superClass:[\"HumanPerformer\"]},{name:\"GlobalUserTask\",superClass:[\"GlobalTask\"],properties:[{name:\"implementation\",isAttr:!0,type:\"String\"},{name:\"renderings\",type:\"Rendering\",isMany:!0}]},{name:\"Gateway\",isAbstract:!0,superClass:[\"FlowNode\"],properties:[{name:\"gatewayDirection\",type:\"GatewayDirection\",default:\"Unspecified\",isAttr:!0}]},{name:\"EventBasedGateway\",superClass:[\"Gateway\"],properties:[{name:\"instantiate\",default:!1,isAttr:!0,type:\"Boolean\"},{name:\"eventGatewayType\",type:\"EventBasedGatewayType\",isAttr:!0,default:\"Exclusive\"}]},{name:\"ComplexGateway\",superClass:[\"Gateway\"],properties:[{name:\"activationCondition\",type:\"Expression\",xml:{serialize:\"xsi:type\"}},{name:\"default\",type:\"SequenceFlow\",isAttr:!0,isReference:!0}]},{name:\"ExclusiveGateway\",superClass:[\"Gateway\"],properties:[{name:\"default\",type:\"SequenceFlow\",isAttr:!0,isReference:!0}]},{name:\"InclusiveGateway\",superClass:[\"Gateway\"],properties:[{name:\"default\",type:\"SequenceFlow\",isAttr:!0,isReference:!0}]},{name:\"ParallelGateway\",superClass:[\"Gateway\"]},{name:\"RootElement\",isAbstract:!0,superClass:[\"BaseElement\"]},{name:\"Relationship\",superClass:[\"BaseElement\"],properties:[{name:\"type\",isAttr:!0,type:\"String\"},{name:\"direction\",type:\"RelationshipDirection\",isAttr:!0},{name:\"source\",isMany:!0,isReference:!0,type:\"Element\"},{name:\"target\",isMany:!0,isReference:!0,type:\"Element\"}]},{name:\"BaseElement\",isAbstract:!0,properties:[{name:\"id\",isAttr:!0,type:\"String\",isId:!0},{name:\"documentation\",type:\"Documentation\",isMany:!0},{name:\"extensionDefinitions\",type:\"ExtensionDefinition\",isMany:!0,isReference:!0},{name:\"extensionElements\",type:\"ExtensionElements\"}]},{name:\"Extension\",properties:[{name:\"mustUnderstand\",default:!1,isAttr:!0,type:\"Boolean\"},{name:\"definition\",type:\"ExtensionDefinition\",isAttr:!0,isReference:!0}]},{name:\"ExtensionDefinition\",properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"extensionAttributeDefinitions\",type:\"ExtensionAttributeDefinition\",isMany:!0}]},{name:\"ExtensionAttributeDefinition\",properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"type\",isAttr:!0,type:\"String\"},{name:\"isReference\",default:!1,isAttr:!0,type:\"Boolean\"},{name:\"extensionDefinition\",type:\"ExtensionDefinition\",isAttr:!0,isReference:!0}]},{name:\"ExtensionElements\",properties:[{name:\"valueRef\",isAttr:!0,isReference:!0,type:\"Element\"},{name:\"values\",type:\"Element\",isMany:!0},{name:\"extensionAttributeDefinition\",type:\"ExtensionAttributeDefinition\",isAttr:!0,isReference:!0}]},{name:\"Documentation\",superClass:[\"BaseElement\"],properties:[{name:\"text\",type:\"String\",isBody:!0},{name:\"textFormat\",default:\"text/plain\",isAttr:!0,type:\"String\"}]},{name:\"Event\",isAbstract:!0,superClass:[\"FlowNode\",\"InteractionNode\"],properties:[{name:\"properties\",type:\"Property\",isMany:!0}]},{name:\"IntermediateCatchEvent\",superClass:[\"CatchEvent\"]},{name:\"IntermediateThrowEvent\",superClass:[\"ThrowEvent\"]},{name:\"EndEvent\",superClass:[\"ThrowEvent\"]},{name:\"StartEvent\",superClass:[\"CatchEvent\"],properties:[{name:\"isInterrupting\",default:!0,isAttr:!0,type:\"Boolean\"}]},{name:\"ThrowEvent\",isAbstract:!0,superClass:[\"Event\"],properties:[{name:\"dataInputs\",type:\"DataInput\",isMany:!0},{name:\"dataInputAssociations\",type:\"DataInputAssociation\",isMany:!0},{name:\"inputSet\",type:\"InputSet\"},{name:\"eventDefinitions\",type:\"EventDefinition\",isMany:!0},{name:\"eventDefinitionRef\",type:\"EventDefinition\",isMany:!0,isReference:!0}]},{name:\"CatchEvent\",isAbstract:!0,superClass:[\"Event\"],properties:[{name:\"parallelMultiple\",isAttr:!0,type:\"Boolean\",default:!1},{name:\"dataOutputs\",type:\"DataOutput\",isMany:!0},{name:\"dataOutputAssociations\",type:\"DataOutputAssociation\",isMany:!0},{name:\"outputSet\",type:\"OutputSet\"},{name:\"eventDefinitions\",type:\"EventDefinition\",isMany:!0},{name:\"eventDefinitionRef\",type:\"EventDefinition\",isMany:!0,isReference:!0}]},{name:\"BoundaryEvent\",superClass:[\"CatchEvent\"],properties:[{name:\"cancelActivity\",default:!0,isAttr:!0,type:\"Boolean\"},{name:\"attachedToRef\",type:\"Activity\",isAttr:!0,isReference:!0}]},{name:\"EventDefinition\",isAbstract:!0,superClass:[\"RootElement\"]},{name:\"CancelEventDefinition\",superClass:[\"EventDefinition\"]},{name:\"ErrorEventDefinition\",superClass:[\"EventDefinition\"],properties:[{name:\"errorRef\",type:\"Error\",isAttr:!0,isReference:!0}]},{name:\"TerminateEventDefinition\",superClass:[\"EventDefinition\"]},{name:\"EscalationEventDefinition\",superClass:[\"EventDefinition\"],properties:[{name:\"escalationRef\",type:\"Escalation\",isAttr:!0,isReference:!0}]},{name:\"Escalation\",properties:[{name:\"structureRef\",type:\"ItemDefinition\",isAttr:!0,isReference:!0},{name:\"name\",isAttr:!0,type:\"String\"},{name:\"escalationCode\",isAttr:!0,type:\"String\"}],superClass:[\"RootElement\"]},{name:\"CompensateEventDefinition\",superClass:[\"EventDefinition\"],properties:[{name:\"waitForCompletion\",isAttr:!0,type:\"Boolean\",default:!0},{name:\"activityRef\",type:\"Activity\",isAttr:!0,isReference:!0}]},{name:\"TimerEventDefinition\",superClass:[\"EventDefinition\"],properties:[{name:\"timeDate\",type:\"Expression\",xml:{serialize:\"xsi:type\"}},{name:\"timeCycle\",type:\"Expression\",xml:{serialize:\"xsi:type\"}},{name:\"timeDuration\",type:\"Expression\",xml:{serialize:\"xsi:type\"}}]},{name:\"LinkEventDefinition\",superClass:[\"EventDefinition\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"target\",type:\"LinkEventDefinition\",isAttr:!0,isReference:!0},{name:\"source\",type:\"LinkEventDefinition\",isMany:!0,isReference:!0}]},{name:\"MessageEventDefinition\",superClass:[\"EventDefinition\"],properties:[{name:\"messageRef\",type:\"Message\",isAttr:!0,isReference:!0},{name:\"operationRef\",type:\"Operation\",isAttr:!0,isReference:!0}]},{name:\"ConditionalEventDefinition\",superClass:[\"EventDefinition\"],properties:[{name:\"condition\",type:\"Expression\",xml:{serialize:\"xsi:type\"}}]},{name:\"SignalEventDefinition\",superClass:[\"EventDefinition\"],properties:[{name:\"signalRef\",type:\"Signal\",isAttr:!0,isReference:!0}]},{name:\"Signal\",superClass:[\"RootElement\"],properties:[{name:\"structureRef\",type:\"ItemDefinition\",isAttr:!0,isReference:!0},{name:\"name\",isAttr:!0,type:\"String\"}]},{name:\"ImplicitThrowEvent\",superClass:[\"ThrowEvent\"]},{name:\"DataState\",superClass:[\"BaseElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"}]},{name:\"ItemAwareElement\",superClass:[\"BaseElement\"],properties:[{name:\"itemSubjectRef\",type:\"ItemDefinition\",isAttr:!0,isReference:!0},{name:\"dataState\",type:\"DataState\"}]},{name:\"DataAssociation\",superClass:[\"BaseElement\"],properties:[{name:\"assignment\",type:\"Assignment\",isMany:!0},{name:\"sourceRef\",type:\"ItemAwareElement\",isMany:!0,isReference:!0},{name:\"targetRef\",type:\"ItemAwareElement\",isReference:!0},{name:\"transformation\",type:\"FormalExpression\",xml:{serialize:\"property\"}}]},{name:\"DataInput\",superClass:[\"ItemAwareElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"isCollection\",default:!1,isAttr:!0,type:\"Boolean\"},{name:\"inputSetRef\",type:\"InputSet\",isVirtual:!0,isMany:!0,isReference:!0},{name:\"inputSetWithOptional\",type:\"InputSet\",isVirtual:!0,isMany:!0,isReference:!0},{name:\"inputSetWithWhileExecuting\",type:\"InputSet\",isVirtual:!0,isMany:!0,isReference:!0}]},{name:\"DataOutput\",superClass:[\"ItemAwareElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"isCollection\",default:!1,isAttr:!0,type:\"Boolean\"},{name:\"outputSetRef\",type:\"OutputSet\",isVirtual:!0,isMany:!0,isReference:!0},{name:\"outputSetWithOptional\",type:\"OutputSet\",isVirtual:!0,isMany:!0,isReference:!0},{name:\"outputSetWithWhileExecuting\",type:\"OutputSet\",isVirtual:!0,isMany:!0,isReference:!0}]},{name:\"InputSet\",superClass:[\"BaseElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"dataInputRefs\",type:\"DataInput\",isMany:!0,isReference:!0},{name:\"optionalInputRefs\",type:\"DataInput\",isMany:!0,isReference:!0},{name:\"whileExecutingInputRefs\",type:\"DataInput\",isMany:!0,isReference:!0},{name:\"outputSetRefs\",type:\"OutputSet\",isMany:!0,isReference:!0}]},{name:\"OutputSet\",superClass:[\"BaseElement\"],properties:[{name:\"dataOutputRefs\",type:\"DataOutput\",isMany:!0,isReference:!0},{name:\"name\",isAttr:!0,type:\"String\"},{name:\"inputSetRefs\",type:\"InputSet\",isMany:!0,isReference:!0},{name:\"optionalOutputRefs\",type:\"DataOutput\",isMany:!0,isReference:!0},{name:\"whileExecutingOutputRefs\",type:\"DataOutput\",isMany:!0,isReference:!0}]},{name:\"Property\",superClass:[\"ItemAwareElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"}]},{name:\"DataInputAssociation\",superClass:[\"DataAssociation\"]},{name:\"DataOutputAssociation\",superClass:[\"DataAssociation\"]},{name:\"InputOutputSpecification\",superClass:[\"BaseElement\"],properties:[{name:\"dataInputs\",type:\"DataInput\",isMany:!0},{name:\"dataOutputs\",type:\"DataOutput\",isMany:!0},{name:\"inputSets\",type:\"InputSet\",isMany:!0},{name:\"outputSets\",type:\"OutputSet\",isMany:!0}]},{name:\"DataObject\",superClass:[\"FlowElement\",\"ItemAwareElement\"],properties:[{name:\"isCollection\",default:!1,isAttr:!0,type:\"Boolean\"}]},{name:\"InputOutputBinding\",properties:[{name:\"inputDataRef\",type:\"InputSet\",isAttr:!0,isReference:!0},{name:\"outputDataRef\",type:\"OutputSet\",isAttr:!0,isReference:!0},{name:\"operationRef\",type:\"Operation\",isAttr:!0,isReference:!0}]},{name:\"Assignment\",superClass:[\"BaseElement\"],properties:[{name:\"from\",type:\"Expression\",xml:{serialize:\"xsi:type\"}},{name:\"to\",type:\"Expression\",xml:{serialize:\"xsi:type\"}}]},{name:\"DataStore\",superClass:[\"RootElement\",\"ItemAwareElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"capacity\",isAttr:!0,type:\"Integer\"},{name:\"isUnlimited\",default:!0,isAttr:!0,type:\"Boolean\"}]},{name:\"DataStoreReference\",superClass:[\"ItemAwareElement\",\"FlowElement\"],properties:[{name:\"dataStoreRef\",type:\"DataStore\",isAttr:!0,isReference:!0}]},{name:\"DataObjectReference\",superClass:[\"ItemAwareElement\",\"FlowElement\"],properties:[{name:\"dataObjectRef\",type:\"DataObject\",isAttr:!0,isReference:!0}]},{name:\"ConversationLink\",superClass:[\"BaseElement\"],properties:[{name:\"sourceRef\",type:\"InteractionNode\",isAttr:!0,isReference:!0},{name:\"targetRef\",type:\"InteractionNode\",isAttr:!0,isReference:!0},{name:\"name\",isAttr:!0,type:\"String\"}]},{name:\"ConversationAssociation\",superClass:[\"BaseElement\"],properties:[{name:\"innerConversationNodeRef\",type:\"ConversationNode\",isAttr:!0,isReference:!0},{name:\"outerConversationNodeRef\",type:\"ConversationNode\",isAttr:!0,isReference:!0}]},{name:\"CallConversation\",superClass:[\"ConversationNode\"],properties:[{name:\"calledCollaborationRef\",type:\"Collaboration\",isAttr:!0,isReference:!0},{name:\"participantAssociations\",type:\"ParticipantAssociation\",isMany:!0}]},{name:\"Conversation\",superClass:[\"ConversationNode\"]},{name:\"SubConversation\",superClass:[\"ConversationNode\"],properties:[{name:\"conversationNodes\",type:\"ConversationNode\",isMany:!0}]},{name:\"ConversationNode\",isAbstract:!0,superClass:[\"InteractionNode\",\"BaseElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"participantRef\",type:\"Participant\",isMany:!0,isReference:!0},{name:\"messageFlowRefs\",type:\"MessageFlow\",isMany:!0,isReference:!0},{name:\"correlationKeys\",type:\"CorrelationKey\",isMany:!0}]},{name:\"GlobalConversation\",superClass:[\"Collaboration\"]},{name:\"PartnerEntity\",superClass:[\"RootElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"participantRef\",type:\"Participant\",isMany:!0,isReference:!0}]},{name:\"PartnerRole\",superClass:[\"RootElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"participantRef\",type:\"Participant\",isMany:!0,isReference:!0}]},{name:\"CorrelationProperty\",superClass:[\"RootElement\"],properties:[{name:\"correlationPropertyRetrievalExpression\",type:\"CorrelationPropertyRetrievalExpression\",isMany:!0},{name:\"name\",isAttr:!0,type:\"String\"},{name:\"type\",type:\"ItemDefinition\",isAttr:!0,isReference:!0}]},{name:\"Error\",superClass:[\"RootElement\"],properties:[{name:\"structureRef\",type:\"ItemDefinition\",isAttr:!0,isReference:!0},{name:\"name\",isAttr:!0,type:\"String\"},{name:\"errorCode\",isAttr:!0,type:\"String\"}]},{name:\"CorrelationKey\",superClass:[\"BaseElement\"],properties:[{name:\"correlationPropertyRef\",type:\"CorrelationProperty\",isMany:!0,isReference:!0},{name:\"name\",isAttr:!0,type:\"String\"}]},{name:\"Expression\",superClass:[\"BaseElement\"],isAbstract:!1,properties:[{name:\"body\",type:\"String\",isBody:!0}]},{name:\"FormalExpression\",superClass:[\"Expression\"],properties:[{name:\"language\",isAttr:!0,type:\"String\"},{name:\"evaluatesToTypeRef\",type:\"ItemDefinition\",isAttr:!0,isReference:!0}]},{name:\"Message\",superClass:[\"RootElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"itemRef\",type:\"ItemDefinition\",isAttr:!0,isReference:!0}]},{name:\"ItemDefinition\",superClass:[\"RootElement\"],properties:[{name:\"itemKind\",type:\"ItemKind\",isAttr:!0},{name:\"structureRef\",type:\"String\",isAttr:!0},{name:\"isCollection\",default:!1,isAttr:!0,type:\"Boolean\"},{name:\"import\",type:\"Import\",isAttr:!0,isReference:!0}]},{name:\"FlowElement\",isAbstract:!0,superClass:[\"BaseElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"auditing\",type:\"Auditing\"},{name:\"monitoring\",type:\"Monitoring\"},{name:\"categoryValueRef\",type:\"CategoryValue\",isMany:!0,isReference:!0}]},{name:\"SequenceFlow\",superClass:[\"FlowElement\"],properties:[{name:\"isImmediate\",isAttr:!0,type:\"Boolean\"},{name:\"conditionExpression\",type:\"Expression\",xml:{serialize:\"xsi:type\"}},{name:\"sourceRef\",type:\"FlowNode\",isAttr:!0,isReference:!0},{name:\"targetRef\",type:\"FlowNode\",isAttr:!0,isReference:!0}]},{name:\"FlowElementsContainer\",isAbstract:!0,superClass:[\"BaseElement\"],properties:[{name:\"laneSets\",type:\"LaneSet\",isMany:!0},{name:\"flowElements\",type:\"FlowElement\",isMany:!0}]},{name:\"CallableElement\",isAbstract:!0,superClass:[\"RootElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"ioSpecification\",type:\"InputOutputSpecification\",xml:{serialize:\"property\"}},{name:\"supportedInterfaceRef\",type:\"Interface\",isMany:!0,isReference:!0},{name:\"ioBinding\",type:\"InputOutputBinding\",isMany:!0,xml:{serialize:\"property\"}}]},{name:\"FlowNode\",isAbstract:!0,superClass:[\"FlowElement\"],properties:[{name:\"incoming\",type:\"SequenceFlow\",isMany:!0,isReference:!0},{name:\"outgoing\",type:\"SequenceFlow\",isMany:!0,isReference:!0},{name:\"lanes\",type:\"Lane\",isVirtual:!0,isMany:!0,isReference:!0}]},{name:\"CorrelationPropertyRetrievalExpression\",superClass:[\"BaseElement\"],properties:[{name:\"messagePath\",type:\"FormalExpression\"},{name:\"messageRef\",type:\"Message\",isAttr:!0,isReference:!0}]},{name:\"CorrelationPropertyBinding\",superClass:[\"BaseElement\"],properties:[{name:\"dataPath\",type:\"FormalExpression\"},{name:\"correlationPropertyRef\",type:\"CorrelationProperty\",isAttr:!0,isReference:!0}]},{name:\"Resource\",superClass:[\"RootElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"resourceParameters\",type:\"ResourceParameter\",isMany:!0}]},{name:\"ResourceParameter\",superClass:[\"BaseElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"isRequired\",isAttr:!0,type:\"Boolean\"},{name:\"type\",type:\"ItemDefinition\",isAttr:!0,isReference:!0}]},{name:\"CorrelationSubscription\",superClass:[\"BaseElement\"],properties:[{name:\"correlationKeyRef\",type:\"CorrelationKey\",isAttr:!0,isReference:!0},{name:\"correlationPropertyBinding\",type:\"CorrelationPropertyBinding\",isMany:!0}]},{name:\"MessageFlow\",superClass:[\"BaseElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"sourceRef\",type:\"InteractionNode\",isAttr:!0,isReference:!0},{name:\"targetRef\",type:\"InteractionNode\",isAttr:!0,isReference:!0},{name:\"messageRef\",type:\"Message\",isAttr:!0,isReference:!0}]},{name:\"MessageFlowAssociation\",superClass:[\"BaseElement\"],properties:[{name:\"innerMessageFlowRef\",type:\"MessageFlow\",isAttr:!0,isReference:!0},{name:\"outerMessageFlowRef\",type:\"MessageFlow\",isAttr:!0,isReference:!0}]},{name:\"InteractionNode\",isAbstract:!0,properties:[{name:\"incomingConversationLinks\",type:\"ConversationLink\",isVirtual:!0,isMany:!0,isReference:!0},{name:\"outgoingConversationLinks\",type:\"ConversationLink\",isVirtual:!0,isMany:!0,isReference:!0}]},{name:\"Participant\",superClass:[\"InteractionNode\",\"BaseElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"interfaceRef\",type:\"Interface\",isMany:!0,isReference:!0},{name:\"participantMultiplicity\",type:\"ParticipantMultiplicity\"},{name:\"endPointRefs\",type:\"EndPoint\",isMany:!0,isReference:!0},{name:\"processRef\",type:\"Process\",isAttr:!0,isReference:!0}]},{name:\"ParticipantAssociation\",superClass:[\"BaseElement\"],properties:[{name:\"innerParticipantRef\",type:\"Participant\",isAttr:!0,isReference:!0},{name:\"outerParticipantRef\",type:\"Participant\",isAttr:!0,isReference:!0}]},{name:\"ParticipantMultiplicity\",properties:[{name:\"minimum\",default:0,isAttr:!0,type:\"Integer\"},{name:\"maximum\",default:1,isAttr:!0,type:\"Integer\"}],superClass:[\"BaseElement\"]},{name:\"Collaboration\",superClass:[\"RootElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"isClosed\",isAttr:!0,type:\"Boolean\"},{name:\"participants\",type:\"Participant\",isMany:!0},{name:\"messageFlows\",type:\"MessageFlow\",isMany:!0},{name:\"artifacts\",type:\"Artifact\",isMany:!0},{name:\"conversations\",type:\"ConversationNode\",isMany:!0},{name:\"conversationAssociations\",type:\"ConversationAssociation\"},{name:\"participantAssociations\",type:\"ParticipantAssociation\",isMany:!0},{name:\"messageFlowAssociations\",type:\"MessageFlowAssociation\",isMany:!0},{name:\"correlationKeys\",type:\"CorrelationKey\",isMany:!0},{name:\"choreographyRef\",type:\"Choreography\",isMany:!0,isReference:!0},{name:\"conversationLinks\",type:\"ConversationLink\",isMany:!0}]},{name:\"ChoreographyActivity\",isAbstract:!0,superClass:[\"FlowNode\"],properties:[{name:\"participantRef\",type:\"Participant\",isMany:!0,isReference:!0},{name:\"initiatingParticipantRef\",type:\"Participant\",isAttr:!0,isReference:!0},{name:\"correlationKeys\",type:\"CorrelationKey\",isMany:!0},{name:\"loopType\",type:\"ChoreographyLoopType\",default:\"None\",isAttr:!0}]},{name:\"CallChoreography\",superClass:[\"ChoreographyActivity\"],properties:[{name:\"calledChoreographyRef\",type:\"Choreography\",isAttr:!0,isReference:!0},{name:\"participantAssociations\",type:\"ParticipantAssociation\",isMany:!0}]},{name:\"SubChoreography\",superClass:[\"ChoreographyActivity\",\"FlowElementsContainer\"],properties:[{name:\"artifacts\",type:\"Artifact\",isMany:!0}]},{name:\"ChoreographyTask\",superClass:[\"ChoreographyActivity\"],properties:[{name:\"messageFlowRef\",type:\"MessageFlow\",isMany:!0,isReference:!0}]},{name:\"Choreography\",superClass:[\"Collaboration\",\"FlowElementsContainer\"]},{name:\"GlobalChoreographyTask\",superClass:[\"Choreography\"],properties:[{name:\"initiatingParticipantRef\",type:\"Participant\",isAttr:!0,isReference:!0}]},{name:\"TextAnnotation\",superClass:[\"Artifact\"],properties:[{name:\"text\",type:\"String\"},{name:\"textFormat\",default:\"text/plain\",isAttr:!0,type:\"String\"}]},{name:\"Group\",superClass:[\"Artifact\"],properties:[{name:\"categoryValueRef\",type:\"CategoryValue\",isAttr:!0,isReference:!0}]},{name:\"Association\",superClass:[\"Artifact\"],properties:[{name:\"associationDirection\",type:\"AssociationDirection\",isAttr:!0},{name:\"sourceRef\",type:\"BaseElement\",isAttr:!0,isReference:!0},{name:\"targetRef\",type:\"BaseElement\",isAttr:!0,isReference:!0}]},{name:\"Category\",superClass:[\"RootElement\"],properties:[{name:\"categoryValue\",type:\"CategoryValue\",isMany:!0},{name:\"name\",isAttr:!0,type:\"String\"}]},{name:\"Artifact\",isAbstract:!0,superClass:[\"BaseElement\"]},{name:\"CategoryValue\",superClass:[\"BaseElement\"],properties:[{name:\"categorizedFlowElements\",type:\"FlowElement\",isVirtual:!0,isMany:!0,isReference:!0},{name:\"value\",isAttr:!0,type:\"String\"}]},{name:\"Activity\",isAbstract:!0,superClass:[\"FlowNode\"],properties:[{name:\"isForCompensation\",default:!1,isAttr:!0,type:\"Boolean\"},{name:\"default\",type:\"SequenceFlow\",isAttr:!0,isReference:!0},{name:\"ioSpecification\",type:\"InputOutputSpecification\",xml:{serialize:\"property\"}},{name:\"boundaryEventRefs\",type:\"BoundaryEvent\",isMany:!0,isReference:!0},{name:\"properties\",type:\"Property\",isMany:!0},{name:\"dataInputAssociations\",type:\"DataInputAssociation\",isMany:!0},{name:\"dataOutputAssociations\",type:\"DataOutputAssociation\",isMany:!0},{name:\"startQuantity\",default:1,isAttr:!0,type:\"Integer\"},{name:\"resources\",type:\"ResourceRole\",isMany:!0},{name:\"completionQuantity\",default:1,isAttr:!0,type:\"Integer\"},{name:\"loopCharacteristics\",type:\"LoopCharacteristics\"}]},{name:\"ServiceTask\",superClass:[\"Task\"],properties:[{name:\"implementation\",isAttr:!0,type:\"String\"},{name:\"operationRef\",type:\"Operation\",isAttr:!0,isReference:!0}]},{name:\"SubProcess\",superClass:[\"Activity\",\"FlowElementsContainer\",\"InteractionNode\"],properties:[{name:\"triggeredByEvent\",default:!1,isAttr:!0,type:\"Boolean\"},{name:\"artifacts\",type:\"Artifact\",isMany:!0}]},{name:\"LoopCharacteristics\",isAbstract:!0,superClass:[\"BaseElement\"]},{name:\"MultiInstanceLoopCharacteristics\",superClass:[\"LoopCharacteristics\"],properties:[{name:\"isSequential\",default:!1,isAttr:!0,type:\"Boolean\"},{name:\"behavior\",type:\"MultiInstanceBehavior\",default:\"All\",isAttr:!0},{name:\"loopCardinality\",type:\"Expression\",xml:{serialize:\"xsi:type\"}},{name:\"loopDataInputRef\",type:\"ItemAwareElement\",isReference:!0},{name:\"loopDataOutputRef\",type:\"ItemAwareElement\",isReference:!0},{name:\"inputDataItem\",type:\"DataInput\",xml:{serialize:\"property\"}},{name:\"outputDataItem\",type:\"DataOutput\",xml:{serialize:\"property\"}},{name:\"complexBehaviorDefinition\",type:\"ComplexBehaviorDefinition\",isMany:!0},{name:\"completionCondition\",type:\"Expression\",xml:{serialize:\"xsi:type\"}},{name:\"oneBehaviorEventRef\",type:\"EventDefinition\",isAttr:!0,isReference:!0},{name:\"noneBehaviorEventRef\",type:\"EventDefinition\",isAttr:!0,isReference:!0}]},{name:\"StandardLoopCharacteristics\",superClass:[\"LoopCharacteristics\"],properties:[{name:\"testBefore\",default:!1,isAttr:!0,type:\"Boolean\"},{name:\"loopCondition\",type:\"Expression\",xml:{serialize:\"xsi:type\"}},{name:\"loopMaximum\",type:\"Integer\",isAttr:!0}]},{name:\"CallActivity\",superClass:[\"Activity\"],properties:[{name:\"calledElement\",type:\"String\",isAttr:!0}]},{name:\"Task\",superClass:[\"Activity\",\"InteractionNode\"]},{name:\"SendTask\",superClass:[\"Task\"],properties:[{name:\"implementation\",isAttr:!0,type:\"String\"},{name:\"operationRef\",type:\"Operation\",isAttr:!0,isReference:!0},{name:\"messageRef\",type:\"Message\",isAttr:!0,isReference:!0}]},{name:\"ReceiveTask\",superClass:[\"Task\"],properties:[{name:\"implementation\",isAttr:!0,type:\"String\"},{name:\"instantiate\",default:!1,isAttr:!0,type:\"Boolean\"},{name:\"operationRef\",type:\"Operation\",isAttr:!0,isReference:!0},{name:\"messageRef\",type:\"Message\",isAttr:!0,isReference:!0}]},{name:\"ScriptTask\",superClass:[\"Task\"],properties:[{name:\"scriptFormat\",isAttr:!0,type:\"String\"},{name:\"script\",type:\"String\"}]},{name:\"BusinessRuleTask\",superClass:[\"Task\"],properties:[{name:\"implementation\",isAttr:!0,type:\"String\"}]},{name:\"AdHocSubProcess\",superClass:[\"SubProcess\"],properties:[{name:\"completionCondition\",type:\"Expression\",xml:{serialize:\"xsi:type\"}},{name:\"ordering\",type:\"AdHocOrdering\",isAttr:!0},{name:\"cancelRemainingInstances\",default:!0,isAttr:!0,type:\"Boolean\"}]},{name:\"Transaction\",superClass:[\"SubProcess\"],properties:[{name:\"protocol\",isAttr:!0,type:\"String\"},{name:\"method\",isAttr:!0,type:\"String\"}]},{name:\"GlobalScriptTask\",superClass:[\"GlobalTask\"],properties:[{name:\"scriptLanguage\",isAttr:!0,type:\"String\"},{name:\"script\",isAttr:!0,type:\"String\"}]},{name:\"GlobalBusinessRuleTask\",superClass:[\"GlobalTask\"],properties:[{name:\"implementation\",isAttr:!0,type:\"String\"}]},{name:\"ComplexBehaviorDefinition\",superClass:[\"BaseElement\"],properties:[{name:\"condition\",type:\"FormalExpression\"},{name:\"event\",type:\"ImplicitThrowEvent\"}]},{name:\"ResourceRole\",superClass:[\"BaseElement\"],properties:[{name:\"resourceRef\",type:\"Resource\",isReference:!0},{name:\"resourceParameterBindings\",type:\"ResourceParameterBinding\",isMany:!0},{name:\"resourceAssignmentExpression\",type:\"ResourceAssignmentExpression\"},{name:\"name\",isAttr:!0,type:\"String\"}]},{name:\"ResourceParameterBinding\",properties:[{name:\"expression\",type:\"Expression\",xml:{serialize:\"xsi:type\"}},{name:\"parameterRef\",type:\"ResourceParameter\",isAttr:!0,isReference:!0}],superClass:[\"BaseElement\"]},{name:\"ResourceAssignmentExpression\",properties:[{name:\"expression\",type:\"Expression\",xml:{serialize:\"xsi:type\"}}],superClass:[\"BaseElement\"]},{name:\"Import\",properties:[{name:\"importType\",isAttr:!0,type:\"String\"},{name:\"location\",isAttr:!0,type:\"String\"},{name:\"namespace\",isAttr:!0,type:\"String\"}]},{name:\"Definitions\",superClass:[\"BaseElement\"],properties:[{name:\"name\",isAttr:!0,type:\"String\"},{name:\"targetNamespace\",isAttr:!0,type:\"String\"},{name:\"expressionLanguage\",default:\"http://www.w3.org/1999/XPath\",isAttr:!0,type:\"String\"},{name:\"typeLanguage\",default:\"http://www.w3.org/2001/XMLSchema\",isAttr:!0,type:\"String\"},{name:\"imports\",type:\"Import\",isMany:!0},{name:\"extensions\",type:\"Extension\",isMany:!0},{name:\"rootElements\",type:\"RootElement\",isMany:!0},{name:\"diagrams\",isMany:!0,type:\"bpmndi:BPMNDiagram\"},{name:\"exporter\",isAttr:!0,type:\"String\"},{name:\"relationships\",type:\"Relationship\",isMany:!0},{name:\"exporterVersion\",isAttr:!0,type:\"String\"}]}],enumerations:[{name:\"ProcessType\",literalValues:[{name:\"None\"},{name:\"Public\"},{name:\"Private\"}]},{name:\"GatewayDirection\",literalValues:[{name:\"Unspecified\"},{name:\"Converging\"},{name:\"Diverging\"},{name:\"Mixed\"}]},{name:\"EventBasedGatewayType\",literalValues:[{name:\"Parallel\"},{name:\"Exclusive\"}]},{name:\"RelationshipDirection\",literalValues:[{name:\"None\"},{name:\"Forward\"},{name:\"Backward\"},{name:\"Both\"}]},{name:\"ItemKind\",literalValues:[{name:\"Physical\"},{name:\"Information\"}]},{name:\"ChoreographyLoopType\",literalValues:[{name:\"None\"},{name:\"Standard\"},{name:\"MultiInstanceSequential\"},{name:\"MultiInstanceParallel\"}]},{name:\"AssociationDirection\",literalValues:[{name:\"None\"},{name:\"One\"},{name:\"Both\"}]},{name:\"MultiInstanceBehavior\",literalValues:[{name:\"None\"},{name:\"One\"},{name:\"All\"},{name:\"Complex\"}]},{name:\"AdHocOrdering\",literalValues:[{name:\"Parallel\"},{name:\"Sequential\"}]}],prefix:\"bpmn\",xml:{tagAlias:\"lowerCase\",typePrefix:\"t\"}}},function(e){e.exports={name:\"BPMNDI\",uri:\"http://www.omg.org/spec/BPMN/20100524/DI\",types:[{name:\"BPMNDiagram\",properties:[{name:\"plane\",type:\"BPMNPlane\",redefines:\"di:Diagram#rootElement\"},{name:\"labelStyle\",type:\"BPMNLabelStyle\",isMany:!0}],superClass:[\"di:Diagram\"]},{name:\"BPMNPlane\",properties:[{name:\"bpmnElement\",isAttr:!0,isReference:!0,type:\"bpmn:BaseElement\",redefines:\"di:DiagramElement#modelElement\"}],superClass:[\"di:Plane\"]},{name:\"BPMNShape\",properties:[{name:\"bpmnElement\",isAttr:!0,isReference:!0,type:\"bpmn:BaseElement\",redefines:\"di:DiagramElement#modelElement\"},{name:\"isHorizontal\",isAttr:!0,type:\"Boolean\"},{name:\"isExpanded\",isAttr:!0,type:\"Boolean\"},{name:\"isMarkerVisible\",isAttr:!0,type:\"Boolean\"},{name:\"label\",type:\"BPMNLabel\"},{name:\"isMessageVisible\",isAttr:!0,type:\"Boolean\"},{name:\"participantBandKind\",type:\"ParticipantBandKind\",isAttr:!0},{name:\"choreographyActivityShape\",type:\"BPMNShape\",isAttr:!0,isReference:!0}],superClass:[\"di:LabeledShape\"]},{name:\"BPMNEdge\",properties:[{name:\"label\",type:\"BPMNLabel\"},{name:\"bpmnElement\",isAttr:!0,isReference:!0,type:\"bpmn:BaseElement\",redefines:\"di:DiagramElement#modelElement\"},{name:\"sourceElement\",isAttr:!0,isReference:!0,type:\"di:DiagramElement\",redefines:\"di:Edge#source\"},{name:\"targetElement\",isAttr:!0,isReference:!0,type:\"di:DiagramElement\",redefines:\"di:Edge#target\"},{name:\"messageVisibleKind\",type:\"MessageVisibleKind\",isAttr:!0,default:\"initiating\"}],superClass:[\"di:LabeledEdge\"]},{name:\"BPMNLabel\",properties:[{name:\"labelStyle\",type:\"BPMNLabelStyle\",isAttr:!0,isReference:!0,redefines:\"di:DiagramElement#style\"}],superClass:[\"di:Label\"]},{name:\"BPMNLabelStyle\",properties:[{name:\"font\",type:\"dc:Font\"}],superClass:[\"di:Style\"]}],enumerations:[{name:\"ParticipantBandKind\",literalValues:[{name:\"top_initiating\"},{name:\"middle_initiating\"},{name:\"bottom_initiating\"},{name:\"top_non_initiating\"},{name:\"middle_non_initiating\"},{name:\"bottom_non_initiating\"}]},{name:\"MessageVisibleKind\",literalValues:[{name:\"initiating\"},{name:\"non_initiating\"}]}],associations:[],prefix:\"bpmndi\"}},function(e){e.exports={name:\"DC\",uri:\"http://www.omg.org/spec/DD/20100524/DC\",types:[{name:\"Boolean\"},{name:\"Integer\"},{name:\"Real\"},{name:\"String\"},{name:\"Font\",properties:[{name:\"name\",type:\"String\",isAttr:!0},{name:\"size\",type:\"Real\",isAttr:!0},{name:\"isBold\",type:\"Boolean\",isAttr:!0},{name:\"isItalic\",type:\"Boolean\",isAttr:!0},{name:\"isUnderline\",type:\"Boolean\",isAttr:!0},{name:\"isStrikeThrough\",type:\"Boolean\",isAttr:!0}]},{name:\"Point\",properties:[{name:\"x\",type:\"Real\",default:\"0\",isAttr:!0},{name:\"y\",type:\"Real\",default:\"0\",isAttr:!0}]},{name:\"Bounds\",properties:[{name:\"x\",type:\"Real\",default:\"0\",isAttr:!0},{name:\"y\",type:\"Real\",default:\"0\",isAttr:!0},{name:\"width\",type:\"Real\",isAttr:!0},{name:\"height\",type:\"Real\",isAttr:!0}]}],prefix:\"dc\",associations:[]}},function(e){e.exports={name:\"DI\",uri:\"http://www.omg.org/spec/DD/20100524/DI\",types:[{name:\"DiagramElement\",isAbstract:!0,properties:[{name:\"id\",type:\"String\",isAttr:!0,isId:!0},{name:\"extension\",type:\"Extension\"},{name:\"owningDiagram\",type:\"Diagram\",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:\"owningElement\",type:\"DiagramElement\",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:\"modelElement\",isReadOnly:!0,isVirtual:!0,isReference:!0,type:\"Element\"},{name:\"style\",type:\"Style\",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:\"ownedElement\",type:\"DiagramElement\",isReadOnly:!0,isVirtual:!0,isMany:!0}]},{name:\"Node\",isAbstract:!0,superClass:[\"DiagramElement\"]},{name:\"Edge\",isAbstract:!0,superClass:[\"DiagramElement\"],properties:[{name:\"source\",type:\"DiagramElement\",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:\"target\",type:\"DiagramElement\",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:\"waypoint\",isUnique:!1,isMany:!0,type:\"dc:Point\",xml:{serialize:\"xsi:type\"}}]},{name:\"Diagram\",isAbstract:!0,properties:[{name:\"id\",type:\"String\",isAttr:!0,isId:!0},{name:\"rootElement\",type:\"DiagramElement\",isReadOnly:!0,isVirtual:!0},{name:\"name\",isAttr:!0,type:\"String\"},{name:\"documentation\",isAttr:!0,type:\"String\"},{name:\"resolution\",isAttr:!0,type:\"Real\"},{name:\"ownedStyle\",type:\"Style\",isReadOnly:!0,isVirtual:!0,isMany:!0}]},{name:\"Shape\",isAbstract:!0,superClass:[\"Node\"],properties:[{name:\"bounds\",type:\"dc:Bounds\"}]},{name:\"Plane\",isAbstract:!0,superClass:[\"Node\"],properties:[{name:\"planeElement\",type:\"DiagramElement\",subsettedProperty:\"DiagramElement-ownedElement\",isMany:!0}]},{name:\"LabeledEdge\",isAbstract:!0,superClass:[\"Edge\"],properties:[{name:\"ownedLabel\",type:\"Label\",isReadOnly:!0,subsettedProperty:\"DiagramElement-ownedElement\",isVirtual:!0,isMany:!0}]},{name:\"LabeledShape\",isAbstract:!0,superClass:[\"Shape\"],properties:[{name:\"ownedLabel\",type:\"Label\",isReadOnly:!0,subsettedProperty:\"DiagramElement-ownedElement\",isVirtual:!0,isMany:!0}]},{name:\"Label\",isAbstract:!0,superClass:[\"Node\"],properties:[{name:\"bounds\",type:\"dc:Bounds\"}]},{name:\"Style\",isAbstract:!0,properties:[{name:\"id\",type:\"String\",isAttr:!0,isId:!0}]},{name:\"Extension\",properties:[{name:\"values\",type:\"Element\",isMany:!0}]}],associations:[],prefix:\"di\",xml:{tagAlias:\"lowerCase\"}}},function(e){e.exports={name:\"bpmn.io colors for BPMN\",uri:\"http://bpmn.io/schema/bpmn/biocolor/1.0\",prefix:\"bioc\",types:[{name:\"ColoredShape\",extends:[\"bpmndi:BPMNShape\"],properties:[{name:\"stroke\",isAttr:!0,type:\"String\"},{name:\"fill\",isAttr:!0,type:\"String\"}]},{name:\"ColoredEdge\",extends:[\"bpmndi:BPMNEdge\"],properties:[{name:\"stroke\",isAttr:!0,type:\"String\"},{name:\"fill\",isAttr:!0,type:\"String\"}]}],enumerations:[],associations:[]}},function(e,t,n){\"use strict\";(function(t){var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();\n/**\n * Tiny stack for browser or server\n *\n * @author Jason Mulligan <jason.mulligan@avoidwork.com>\n * @copyright 2018\n * @license BSD-3-Clause\n * @link http://avoidwork.github.io/tiny-stack\n * @version 1.1.0\n */\n!function(t){var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}\n/**\n * Tiny stack for browser or server\n *\n * @author Jason Mulligan <jason.mulligan@avoidwork.com>\n * @copyright 2018\n * @license BSD-3-Clause\n * @link http://avoidwork.github.io/tiny-stack\n * @version 1.1.0\n */(this,e);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];this.data=[null].concat(n),this.top=this.data.length-1}return n(e,[{key:\"clear\",value:function(){return this.data.length=1,this.top=0,this}},{key:\"empty\",value:function(){return 0===this.top}},{key:\"length\",value:function(){return this.top}},{key:\"peek\",value:function(){return this.data[this.top]}},{key:\"pop\",value:function(){var e=void 0;return this.top>0&&(e=this.data.pop(),this.top--),e}},{key:\"push\",value:function(e){return this.data[++this.top]=e,this}},{key:\"search\",value:function(e){var t=this.data.indexOf(e);return-1===t?-1:this.data.length-t}}]),e}();e.exports=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new(Function.prototype.bind.apply(i,[null].concat(t)))}}(\"undefined\"!=typeof window&&window)}).call(this,n(7))},,function(e,t,n){\"use strict\";var i=n(6);function o(e,t,n){var o=i.extend(n[t.name]||[],e,t,n);Object.defineProperty(n,t.name,{enumerable:t.enumerable,value:o}),o.length&&o.forEach(function(i){e.set(i,t.inverse,n)})}function r(e,t){if(!(this instanceof r))return new r(e,t);e.inverse=t,t.inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}r.prototype.bind=function(e,t){if(\"string\"==typeof t){if(!this.props[t])throw new Error(\"no property <\"+t+\"> in ref\");t=this.props[t]}t.collection?o(this,t,e):function(e,t,n){var i=t.inverse,o=n[t.name];Object.defineProperty(n,t.name,{configurable:t.configurable,enumerable:t.enumerable,get:function(){return o},set:function(t){if(t!==o){var r=o;o=null,r&&e.unset(r,i,n),o=t,e.set(o,i,n)}}})}(this,t,e)},r.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return i.isExtended(n)||o(this,t,e),n},r.prototype.ensureBound=function(e,t){(function(e,t){return Object.prototype.hasOwnProperty.call(e,t.name||t)})(e,t)||this.bind(e,t)},r.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)},r.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)},e.exports=r},function(e,t){var n=e.exports=function(e,t){if(t||(t=16),void 0===e&&(e=128),e<=0)return\"0\";for(var i=Math.log(Math.pow(2,e))/Math.log(t),o=2;i===1/0;o*=2)i=Math.log(Math.pow(2,e/o))/Math.log(t)*o;var r=i-Math.floor(i),a=\"\";for(o=0;o<Math.floor(i);o++){a=Math.floor(Math.random()*t).toString(t)+a}if(r){var s=Math.pow(t,r);a=Math.floor(Math.random()*s).toString(t)+a}var c=parseInt(a,t);return c!==1/0&&c>=Math.pow(2,e)?n(e,t):a};n.rack=function(e,t,i){var o=function(o){var a=0;do{if(a++>10){if(!i)throw new Error(\"too many ID collisions, use more bits\");e+=i}var s=n(e,t)}while(Object.hasOwnProperty.call(r,s));return r[s]=o,s},r=o.hats={};return o.get=function(e){return o.hats[e]},o.set=function(e,t){return o.hats[e]=t,o},o.bits=e||128,o.base=t||16,o}},function(e,t,n){\"use strict\";n.r(t);var i=n(8),o=n.n(i),r=n(9),a=n(0),s=n.n(a),c=n(5),p=n.n(c);function l(e){return Array.prototype.concat.apply([],e)}var u=Object.prototype.toString,h=Object.prototype.hasOwnProperty;function d(e){return void 0===e}function m(e){return void 0!==e}function f(e){return\"[object Array]\"===u.call(e)}function y(e){return\"[object Object]\"===u.call(e)}function g(e){return\"[object Number]\"===u.call(e)}function v(e){return\"[object Function]\"===u.call(e)}function b(e){return\"[object String]\"===u.call(e)}function x(e,t){return h.call(e,t)}function _(e,t){var n;return t=I(t),S(e,function(e,i){if(t(e,i))return n=e,!1}),n}function w(e,t){t=I(t);var n=f(e)?-1:void 0;return S(e,function(e,i){if(t(e,i))return n=i,!1}),n}function E(e,t){var n=[];return S(e,function(e,i){t(e,i)&&n.push(e)}),n}function S(e,t){if(!d(e)){var n=f(e)?F:z;for(var i in e){if(x(e,i))if(!1===t(e[i],n(i)))return}}}function P(e,t){return d(e)?[]:(function(e){if(!f(e))throw new Error(\"must supply array\")}(e),t=I(t),e.filter(function(e,n){return!t(e,n)}))}function C(e,t,n){return S(e,function(e,i){n=t(n,e,i)}),n}function T(e,t){return C(e,function(e,n,i){return e&&t(n,i)},!0)}function R(e,t){return!!_(e,t)}function M(e,t){var n=[];return S(e,function(e,i){n.push(t(e,i))}),n}function A(e){return e&&Object.keys(e)||[]}function k(e){return M(e,function(e){return e})}function B(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t=j(t),S(e,function(e){var i=t(e)||\"_\",o=n[i];o||(o=n[i]=[]),o.push(e)}),n}function N(e){e=j(e);for(var t={},n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return S(i,function(n){return B(n,e,t)}),M(t,function(e,t){return e[0]})}var D=N;function O(e,t){t=j(t);var n=[];return S(e,function(e,i){for(var o=t(e,i),r={d:o,v:e},a=0;a<n.length;a++){if(o<n[a].d)return void n.splice(a,0,r)}n.push(r)}),M(n,function(e){return e.v})}function L(e){return function(t){return T(e,function(e,n){return t[n]===e})}}function j(e){return v(e)?e:function(t){return t[e]}}function I(e){return v(e)?e:function(t){return t===e}}function z(e){return e}function F(e){return Number(e)}function $(e,t){var n,i,o,r;function a(){var a=Date.now(),c=r+t-a;if(c>0)return s(c);e.apply(o,i),n=r=i=o=void 0}function s(e){n=setTimeout(a,e)}return function(){r=Date.now();for(var e=arguments.length,a=Array(e),c=0;c<e;c++)a[c]=arguments[c];i=a,o=this,n||s(t)}}function V(e,t){return e.bind(t)}var H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};function W(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return H.apply(void 0,[e].concat(n))}function G(e,t){var n={},i=Object(e);return S(t,function(t){t in i&&(n[t]=e[t])}),n}function q(e,t,n){return 2==arguments.length?e.getAttribute(t):null===n?e.removeAttribute(t):(e.setAttribute(t,n),e)}var U=[].indexOf,K=function(e,t){if(U)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1},Y=/\\s+/,X=Object.prototype.toString;function Z(e){return new Q(e)}function Q(e){if(!e||!e.nodeType)throw new Error(\"A DOM element reference is required\");this.el=e,this.list=e.classList}function J(e){for(var t;e.childNodes.length;)t=e.childNodes[0],e.removeChild(t);return e}Q.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array();return~K(t,e)||t.push(e),this.el.className=t.join(\" \"),this},Q.prototype.remove=function(e){if(\"[object RegExp]\"==X.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=K(t,e);return~n&&t.splice(n,1),this.el.className=t.join(\" \"),this},Q.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},Q.prototype.toggle=function(e,t){return this.list?(void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this):(void 0!==t?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this)},Q.prototype.array=function(){var e=(this.el.getAttribute(\"class\")||\"\").replace(/^\\s+|\\s+$/g,\"\").split(Y);return\"\"===e[0]&&e.shift(),e},Q.prototype.has=Q.prototype.contains=function(e){return this.list?this.list.contains(e):!!~K(this.array(),e)};var ee=Element.prototype,te=ee.matchesSelector||ee.webkitMatchesSelector||ee.mozMatchesSelector||ee.msMatchesSelector||ee.oMatchesSelector,ne=function(e,t){if(te)return te.call(e,t);for(var n=e.parentNode.querySelectorAll(t),i=0;i<n.length;++i)if(n[i]==e)return!0;return!1};var ie,oe=function(e,t,n){for(var i=n?e:e.parentNode;i&&i!==document;){if(ne(i,t))return i;i=i.parentNode}},re=window.addEventListener?\"addEventListener\":\"attachEvent\",ae=window.removeEventListener?\"removeEventListener\":\"detachEvent\",se=\"addEventListener\"!==re?\"on\":\"\",ce={bind:function(e,t,n,i){return e[re](se+t,n,i||!1),n},unbind:function(e,t,n,i){return e[ae](se+t,n,i||!1),n}},pe=[\"focus\",\"blur\"],le={bind:function(e,t,n,i,o){return-1!==pe.indexOf(n)&&(o=!0),ce.bind(e,n,function(n){var o=n.target||n.srcElement;n.delegateTarget=oe(o,t,!0,e),n.delegateTarget&&i.call(e,n)},o)},unbind:function(e,t,n,i){-1!==pe.indexOf(t)&&(i=!0),ce.unbind(e,t,n,i)}},ue=function(e,t){if(\"string\"!=typeof e)throw new TypeError(\"String expected\");t||(t=document);var n=/<([\\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\\s+|\\s+$/g,\"\");var i=n[1];if(\"body\"==i){var o=t.createElement(\"html\");return o.innerHTML=e,o.removeChild(o.lastChild)}var r=de[i]||de._default,a=r[0],s=r[1],c=r[2];(o=t.createElement(\"div\")).innerHTML=s+e+c;for(;a--;)o=o.lastChild;if(o.firstChild==o.lastChild)return o.removeChild(o.firstChild);var p=t.createDocumentFragment();for(;o.firstChild;)p.appendChild(o.removeChild(o.firstChild));return p},he=!1;\"undefined\"!=typeof document&&((ie=document.createElement(\"div\")).innerHTML='  <link/><table></table><a href=\"/a\">a</a><input type=\"checkbox\"/>',he=!ie.getElementsByTagName(\"link\").length,ie=void 0);var de={legend:[1,\"<fieldset>\",\"</fieldset>\"],tr:[2,\"<table><tbody>\",\"</tbody></table>\"],col:[2,\"<table><tbody></tbody><colgroup>\",\"</colgroup></table>\"],_default:he?[1,\"X<div>\",\"</div>\"]:[0,\"\",\"\"]};de.td=de.th=[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],de.option=de.optgroup=[1,'<select multiple=\"multiple\">',\"</select>\"],de.thead=de.tbody=de.colgroup=de.caption=de.tfoot=[1,\"<table>\",\"</table>\"],de.polyline=de.ellipse=de.polygon=de.circle=de.text=de.line=de.path=de.rect=de.g=[1,'<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\">',\"</svg>\"];var me=\"undefined\"!=typeof Element?Element.prototype:{},fe=me.matches||me.matchesSelector||me.webkitMatchesSelector||me.mozMatchesSelector||me.msMatchesSelector||me.oMatchesSelector,ye=function(e,t){if(!e||1!==e.nodeType)return!1;if(fe)return fe.call(e,t);for(var n=e.parentNode.querySelectorAll(t),i=0;i<n.length;i++)if(n[i]==e)return!0;return!1};function ge(e,t){return(t=t||document).querySelector(e)}function ve(e,t){return(t=t||document).querySelectorAll(e)}function be(e){e.parentNode&&e.parentNode.removeChild(e)}function xe(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch(e){}return e}function _e(e,t){return t.appendChild(xe(e,t))}function we(e,t){return _e(t,e),e}var Ee=2,Se={\"alignment-baseline\":1,\"baseline-shift\":1,clip:1,\"clip-path\":1,\"clip-rule\":1,color:1,\"color-interpolation\":1,\"color-interpolation-filters\":1,\"color-profile\":1,\"color-rendering\":1,cursor:1,direction:1,display:1,\"dominant-baseline\":1,\"enable-background\":1,fill:1,\"fill-opacity\":1,\"fill-rule\":1,filter:1,\"flood-color\":1,\"flood-opacity\":1,font:1,\"font-family\":1,\"font-size\":Ee,\"font-size-adjust\":1,\"font-stretch\":1,\"font-style\":1,\"font-variant\":1,\"font-weight\":1,\"glyph-orientation-horizontal\":1,\"glyph-orientation-vertical\":1,\"image-rendering\":1,kerning:1,\"letter-spacing\":1,\"lighting-color\":1,marker:1,\"marker-end\":1,\"marker-mid\":1,\"marker-start\":1,mask:1,opacity:1,overflow:1,\"pointer-events\":1,\"shape-rendering\":1,\"stop-color\":1,\"stop-opacity\":1,stroke:1,\"stroke-dasharray\":1,\"stroke-dashoffset\":1,\"stroke-linecap\":1,\"stroke-linejoin\":1,\"stroke-miterlimit\":1,\"stroke-opacity\":1,\"stroke-width\":Ee,\"text-anchor\":1,\"text-decoration\":1,\"text-rendering\":1,\"unicode-bidi\":1,visibility:1,\"word-spacing\":1,\"writing-mode\":1};function Pe(e,t,n){var i=t.replace(/([a-z])([A-Z])/g,\"$1-$2\").toLowerCase(),o=Se[i];o?(o===Ee&&\"number\"==typeof n&&(n=String(n)+\"px\"),e.style[i]=n):e.setAttributeNS(null,t,n)}function Ce(e,t,n){if(\"string\"==typeof t){if(void 0===n)return function(e,t){return Se[t]?e.style[t]:e.getAttributeNS(null,t)}(e,t);Pe(e,t,n)}else!function(e,t){var n,i,o=Object.keys(t);for(n=0;i=o[n];n++)Pe(e,i,t[i])}(e,t);return e}function Te(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}var Re=/\\s+/,Me=Object.prototype.toString;function Ae(e){return void 0!==e}function ke(e){return new Be(e)}function Be(e){if(!e||!e.nodeType)throw new Error(\"A DOM element reference is required\");this.el=e,this.list=e.classList}function Ne(e){var t=e.parentNode;return t&&t.removeChild(e),e}function De(e){for(var t;t=e.firstChild;)Ne(t);return e}Be.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array();return~Te(t,e)||t.push(e),Ae(this.el.className.baseVal)?this.el.className.baseVal=t.join(\" \"):this.el.className=t.join(\" \"),this},Be.prototype.remove=function(e){if(\"[object RegExp]\"===Me.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=Te(t,e);return~n&&t.splice(n,1),this.el.className.baseVal=t.join(\" \"),this},Be.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},Be.prototype.toggle=function(e,t){return this.list?(Ae(t)?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this):(Ae(t)?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this)},Be.prototype.array=function(){var e=(this.el.getAttribute(\"class\")||\"\").replace(/^\\s+|\\s+$/g,\"\").split(Re);return\"\"===e[0]&&e.shift(),e},Be.prototype.has=Be.prototype.contains=function(e){return this.list?this.list.contains(e):!!~Te(this.array(),e)};var Oe={svg:\"http://www.w3.org/2000/svg\"},Le='<svg xmlns=\"'+Oe.svg+'\"';function je(e){var t=!1;\"<svg\"===e.substring(0,4)?-1===e.indexOf(Oe.svg)&&(e=Le+e.substring(4)):(e=Le+\">\"+e+\"</svg>\",t=!0);var n=function(e){var t;return(t=new DOMParser).async=!1,t.parseFromString(e,\"text/xml\")}(e);if(!t)return n;for(var i=document.createDocumentFragment(),o=n.firstChild;o.firstChild;)i.appendChild(o.firstChild);return i}function Ie(e,t){var n;return\"<\"===e.charAt(0)?(n=je(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(Oe.svg,e),t&&Ce(n,t),n}var ze=Ie(\"svg\");function Fe(e,t){var n,i,o=Object.keys(t);for(n=0;i=o[n];n++)e[i]=t[i];return e}function $e(e){return e?ze.createSVGTransformFromMatrix(e):ze.createSVGTransform()}var Ve=/([&<>]{1})/g,He=/([\\n\\r\"]{1})/g,We={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"'\"};function Ge(e,t){return e.replace(t,function(e,t){return We[t]||t})}function qe(e,t){var n,i,o,r,a;switch(e.nodeType){case 3:t.push(Ge(e.textContent,Ve));break;case 1:if(t.push(\"<\",e.tagName),e.hasAttributes())for(n=0,i=(o=e.attributes).length;n<i;++n)r=o.item(n),t.push(\" \",r.name,'=\"',Ge(r.value,He),'\"');if(e.hasChildNodes()){for(t.push(\">\"),n=0,i=(a=e.childNodes).length;n<i;++n)qe(a.item(n),t);t.push(\"</\",e.tagName,\">\")}else t.push(\"/>\");break;case 8:t.push(\"\\x3c!--\",Ge(e.nodeValue,Ve),\"--\\x3e\");break;case 4:t.push(\"<![CDATA[\",e.nodeValue,\"]]>\");break;default:throw new Error(\"unable to handle node \"+e.nodeType)}return t}function Ue(e,t){var n=je(t);if(De(e),t){\"#document-fragment\"!==n.nodeName&&(n=n.documentElement);for(var i,o=(i=n.childNodes,Array.prototype.slice.call(i)),r=0;r<o.length;r++)_e(o[r],e)}}function Ke(e,t){if(void 0!==t){try{Ue(e,t)}catch(e){throw new Error(\"error parsing SVG: \"+e.message)}return e}return function(e){for(var t=e.firstChild,n=[];t;)qe(t,n),t=t.nextSibling;return n.join(\"\")}(e)}function Ye(e,t){return t instanceof SVGMatrix?e.createSVGTransformFromMatrix(t):t}function Xe(e,t){var n=e.transform.baseVal;if(1===arguments.length)return n.consolidate();t.length?function(e,t){var n,i;for(e.clear(),n=0;i=t[n];n++)e.appendItem(Ye(e,i));e.consolidate()}(n,t):n.initialize(Ye(n,t))}var Ze=/^class /;function Qe(e){return\"[object Array]\"===Object.prototype.toString.call(e)}function Je(){var e=Array.prototype.slice.call(arguments);1===e.length&&Qe(e[0])&&(e=e[0]);var t=e.pop();return t.$inject=e,t}var et=/constructor\\s*[^(]*\\(\\s*([^)]*)\\)/m,tt=/^function\\s*[^(]*\\(\\s*([^)]*)\\)/m,nt=/\\/\\*([^*]*)\\*\\//m;function it(e){if(\"function\"!=typeof e)throw new Error('Cannot annotate \"'+e+'\". Expected a function!');var t=e.toString().match(function(e){return Ze.test(e.toString())}(e)?et:tt);return t&&t[1]&&t[1].split(\",\").map(function(e){return(t=e.match(nt))?t[1].trim():e.trim()})||[]}var ot=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e};function rt(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function at(e,t){t=t||{get:function(e,t){if(n.push(e),!1===t)return null;throw a('No provider for \"'+e+'\"!')}};var n=[],i=this._providers=Object.create(t._providers||null),o=this._instances=Object.create(null),r=o.injector=this,a=function(e){var t=n.join(\" -> \");return n.length=0,new Error(t?e+\" (Resolving: \"+t+\")\":e)},s=function e(r,s){if(!i[r]&&-1!==r.indexOf(\".\")){for(var c=r.split(\".\"),p=e(c.shift());c.length;)p=p[c.shift()];return p}if(st(o,r))return o[r];if(st(i,r)){if(-1!==n.indexOf(r))throw n.push(r),a(\"Cannot resolve circular dependency!\");return n.push(r),o[r]=i[r][0](i[r][1]),n.pop(),o[r]}return t.get(r,s)},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(\"function\"!=typeof e){if(!Qe(e))throw new Error('Cannot invoke \"'+e+'\". Expected a function!');e=Je(e.slice())}return{fn:e,dependencies:(e.$inject||it(e)).map(function(e){return st(t,e)?t[e]:s(e)})}},p=function(e){var t=c(e),n=t.dependencies,i=t.fn;return new(Function.prototype.bind.apply(i,[null].concat(rt(n))))},l=function(e,t,n){var i=c(e,n),o=i.dependencies,r=i.fn;return r.call.apply(r,[t].concat(rt(o)))},u=function(e){return Je(function(t){return e.get(t)})},h={factory:l,type:p,value:function(e){return e}};e.forEach(function(e){function t(e,t){return\"value\"!==e&&Qe(t)&&(t=Je(t.slice())),t}if(e instanceof function(){var e=[];this.factory=function(t,n){return e.push([t,\"factory\",n]),this},this.value=function(t,n){return e.push([t,\"value\",n]),this},this.type=function(t,n){return e.push([t,\"type\",n]),this},this.forEach=function(t){e.forEach(t)}})e.forEach(function(e){var n=e[0],o=e[1],r=e[2];i[n]=[h[o],t(o,r),o]});else if(\"object\"===(void 0===e?\"undefined\":ot(e)))if(e.__exports__){var n=Object.keys(e).reduce(function(t,n){return\"__\"!==n.substring(0,2)&&(t[n]=e[n]),t},Object.create(null)),o=new at((e.__modules__||[]).concat([n]),r),a=Je(function(e){return o.get(e)});e.__exports__.forEach(function(e){i[e]=[a,e,\"private\",o]})}else Object.keys(e).forEach(function(n){if(\"private\"!==e[n][2]){var o=e[n][0],r=e[n][1];i[n]=[h[o],t(o,r),o]}else i[n]=e[n]})}),this.get=s,this.invoke=l,this.instantiate=p,this.createChild=function(e,t){if(t&&t.length){var n,o,a,s,c=Object.create(null),p=Object.create(null),l=[],h=[],d=[];for(var m in i)n=i[m],-1!==t.indexOf(m)&&(\"private\"===n[2]?-1===(o=l.indexOf(n[3]))?(a=n[3].createChild([],t),s=u(a),l.push(n[3]),h.push(a),d.push(s),c[m]=[s,m,\"private\",a]):c[m]=[d[o],m,\"private\",h[o]]:c[m]=[n[2],n[1]],p[m]=!0),\"factory\"!==n[2]&&\"type\"!==n[2]||!n[1].$scope||t.forEach(function(e){-1!==n[1].$scope.indexOf(e)&&(c[m]=[n[2],n[1]],p[e]=!0)});t.forEach(function(e){if(!p[e])throw new Error('No provider for \"'+e+'\". Cannot use provider from the parent!')}),e.unshift(c)}return new at(e,r)}}function st(e,t){return Object.hasOwnProperty.call(e,t)}var ct=1e3;function pt(e,t){var n=this;t=t||ct,e.on([\"render.shape\",\"render.connection\"],t,function(e,t){var i=e.type,o=t.element,r=t.gfx;if(n.canRender(o))return\"render.shape\"===i?n.drawShape(r,o):n.drawConnection(r,o)}),e.on([\"render.getShapePath\",\"render.getConnectionPath\"],t,function(e,t){if(n.canRender(t))return\"render.getShapePath\"===e.type?n.getShapePath(t):n.getConnectionPath(t)})}function lt(e){return e.join(\",\").replace(/,?([A-z]),?/g,\"$1\")}function ut(e){for(var t,n=\"\",i=0;t=e[i];i++)n+=t.x+\",\"+t.y+\" \";return n}function ht(e,t){var n=Ie(\"polyline\");return Ce(n,{points:ut(e)}),t&&Ce(n,t),n}pt.prototype.canRender=function(){},pt.prototype.drawShape=function(){},pt.prototype.drawConnection=function(){},pt.prototype.getShapePath=function(){},pt.prototype.getConnectionPath=function(){};var dt=1;function mt(e,t){pt.call(this,e,dt),this.CONNECTION_STYLE=t.style([\"no-fill\"],{strokeWidth:5,stroke:\"fuchsia\"}),this.SHAPE_STYLE=t.style({fill:\"white\",stroke:\"fuchsia\",strokeWidth:2})}s()(mt,pt),mt.prototype.canRender=function(){return!0},mt.prototype.drawShape=function(e,t){var n=Ie(\"rect\");return Ce(n,{x:0,y:0,width:t.width||0,height:t.height||0}),Ce(n,this.SHAPE_STYLE),we(e,n),n},mt.prototype.drawConnection=function(e,t){var n=ht(t.waypoints,this.CONNECTION_STYLE);return we(e,n),n},mt.prototype.getShapePath=function(e){var t=e.x,n=e.y,i=e.width;return lt([[\"M\",t,n],[\"l\",i,0],[\"l\",0,e.height],[\"l\",-i,0],[\"z\"]])},mt.prototype.getConnectionPath=function(e){var t,n,i=e.waypoints,o=[];for(t=0;n=i[t];t++)n=n.original||n,o.push([0===t?\"M\":\"L\",n.x,n.y]);return lt(o)},mt.$inject=[\"eventBus\",\"styles\"];var ft={__init__:[\"defaultRenderer\"],defaultRenderer:[\"type\",mt],styles:[\"type\",function(){var e={\"no-fill\":{fill:\"none\"},\"no-border\":{strokeOpacity:0},\"no-events\":{pointerEvents:\"none\"}},t=this;this.cls=function(e,t,n){return W(this.style(t,n),{class:e})},this.style=function(t,n){f(t)||n||(n=t,t=[]);var i=C(t,function(t,n){return W(t,e[n]||{})},{});return n?W(i,n):i},this.computeStyle=function(e,n,i){return f(n)||(i=n,n=[]),t.style(n||[],W({},i,e||{}))}}]};function yt(e,t){if(!e||!t)return-1;var n=e.indexOf(t);return-1!==n&&e.splice(n,1),n}function gt(e,t,n){if(e&&t){\"number\"!=typeof n&&(n=-1);var i=e.indexOf(t);if(-1!==i){if(i===n)return;if(-1===n)return;e.splice(i,1)}-1!==n?e.splice(n,0,t):e.push(t)}}function vt(e,t){return e&&t?e.indexOf(t):-1}function bt(e,t,n){var i=!n||-1===e.indexOf(t);return i&&e.push(t),i}function xt(e,t,n){n=n||0,f(e)||(e=[e]),S(e,function(e,i){var o=t(e,i,n);f(o)&&o.length&&xt(o,t,n+1)})}function _t(e,t,n){var i=[],o=[];return xt(e,function(e,r,a){bt(i,e,t);var s=e.children;if((-1===n||a<n)&&s&&bt(o,s,t))return s}),i}function wt(e,t){return _t(e,!t,-1)}function Et(e,t){var n,i,o,r;return t=!!t,f(e)||(e=[e]),S(e,function(e){var a=e;e.waypoints&&!t&&(a=Et(e.waypoints,!0));var s=a.x,c=a.y,p=a.height||0,l=a.width||0;(s<n||void 0===n)&&(n=s),(c<i||void 0===i)&&(i=c),(s+l>o||void 0===o)&&(o=s+l),(c+p>r||void 0===r)&&(r=c+p)}),{x:n,y:i,height:r-i,width:o-n}}function St(e){return\"waypoints\"in e?\"connection\":\"x\"in e?\"shape\":\"root\"}function Pt(e,t){return W({},e||{},t||{})}function Ct(e,t){return Math.round(e*t)/t}function Tt(e){return g(e)?e+\"px\":e}function Rt(e,t,n){var i=Ie(\"g\");ke(i).add(t);var o=void 0!==n?n:e.childNodes.length-1;return e.insertBefore(i,e.childNodes[o]||null),i}var Mt={shape:[\"x\",\"y\",\"width\",\"height\"],connection:[\"waypoints\"]};function At(e,t,n,i){this._eventBus=t,this._elementRegistry=i,this._graphicsFactory=n,this._init(e||{})}function kt(e,t){var n=\"matrix(\"+t.a+\",\"+t.b+\",\"+t.c+\",\"+t.d+\",\"+t.e+\",\"+t.f+\")\";e.setAttribute(\"transform\",n)}At.$inject=[\"config.canvas\",\"eventBus\",\"graphicsFactory\",\"elementRegistry\"],At.prototype._init=function(e){var t=this._eventBus,n=this._container=function(e){var t=(e=W({},{width:\"100%\",height:\"100%\"},e)).container||document.body,n=document.createElement(\"div\");return n.setAttribute(\"class\",\"djs-container\"),W(n.style,{position:\"relative\",overflow:\"hidden\",width:Tt(e.width),height:Tt(e.height)}),t.appendChild(n),n}(e),i=this._svg=Ie(\"svg\");Ce(i,{width:\"100%\",height:\"100%\"}),we(n,i);var o=this._viewport=Rt(i,\"viewport\");this._layers={},!1!==e.deferUpdate&&(this._viewboxChanged=$(V(this._viewboxChanged,this),300)),t.on(\"diagram.init\",function(){t.fire(\"canvas.init\",{svg:i,viewport:o})},this),t.on([\"shape.added\",\"connection.added\",\"shape.removed\",\"connection.removed\",\"elements.changed\"],function(){delete this._cachedViewbox},this),t.on(\"diagram.destroy\",500,this._destroy,this),t.on(\"diagram.clear\",500,this._clear,this)},At.prototype._destroy=function(e){this._eventBus.fire(\"canvas.destroy\",{svg:this._svg,viewport:this._viewport});var t=this._container.parentNode;t&&t.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._rootElement,delete this._viewport},At.prototype._clear=function(){var e=this;this._elementRegistry.getAll().forEach(function(t){var n=St(t);\"root\"===n?e.setRootElement(null,!0):e._removeElement(t,n)}),delete this._cachedViewbox},At.prototype.getDefaultLayer=function(){return this.getLayer(\"base\",0)},At.prototype.getLayer=function(e,t){if(!e)throw new Error(\"must specify a name\");var n=this._layers[e];if(n||(n=this._layers[e]=this._createLayer(e,t)),void 0!==t&&n.index!==t)throw new Error(\"layer <\"+e+\"> already created at index <\"+t+\">\");return n.group},At.prototype._createLayer=function(e,t){t||(t=0);var n=C(this._layers,function(e,n){return t>=n.index&&e++,e},0);return{group:Rt(this._viewport,\"layer-\"+e,n),index:t}},At.prototype.getContainer=function(){return this._container},At.prototype._updateMarker=function(e,t,n){var i;e.id||(e=this._elementRegistry.get(e)),(i=this._elementRegistry._elements[e.id])&&(S([i.gfx,i.secondaryGfx],function(e){e&&(n?ke(e).add(t):ke(e).remove(t))}),this._eventBus.fire(\"element.marker.update\",{element:e,gfx:i.gfx,marker:t,add:!!n}))},At.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)},At.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)},At.prototype.hasMarker=function(e,t){return e.id||(e=this._elementRegistry.get(e)),ke(this.getGraphics(e)).has(t)},At.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)},At.prototype.getRootElement=function(){return this._rootElement||this.setRootElement({id:\"__implicitroot\",children:[]}),this._rootElement},At.prototype.setRootElement=function(e,t){e&&this._ensureValid(\"root\",e);var n=this._rootElement,i=this._elementRegistry,o=this._eventBus;if(n){if(!t)throw new Error(\"rootElement already set, need to specify override\");o.fire(\"root.remove\",{element:n}),o.fire(\"root.removed\",{element:n}),i.remove(n)}if(e){var r=this.getDefaultLayer();o.fire(\"root.add\",{element:e}),i.add(e,r,this._svg),o.fire(\"root.added\",{element:e,gfx:r})}return this._rootElement=e,e},At.prototype._ensureValid=function(e,t){if(!t.id)throw new Error(\"element must have an id\");if(this._elementRegistry.get(t.id))throw new Error(\"element with id \"+t.id+\" already exists\");var n=Mt[e];if(!T(n,function(e){return void 0!==t[e]}))throw new Error(\"must supply { \"+n.join(\", \")+\" } with \"+e)},At.prototype._setParent=function(e,t,n){gt(t.children,e,n),e.parent=t},At.prototype._addElement=function(e,t,n,i){n=n||this.getRootElement();var o=this._eventBus,r=this._graphicsFactory;this._ensureValid(e,t),o.fire(e+\".add\",{element:t,parent:n}),this._setParent(t,n,i);var a=r.create(e,t,i);return this._elementRegistry.add(t,a),r.update(e,t,a),o.fire(e+\".added\",{element:t,gfx:a}),t},At.prototype.addShape=function(e,t,n){return this._addElement(\"shape\",e,t,n)},At.prototype.addConnection=function(e,t,n){return this._addElement(\"connection\",e,t,n)},At.prototype._removeElement=function(e,t){var n=this._elementRegistry,i=this._graphicsFactory,o=this._eventBus;if(e=n.get(e.id||e))return o.fire(t+\".remove\",{element:e}),i.remove(e),yt(e.parent&&e.parent.children,e),e.parent=null,o.fire(t+\".removed\",{element:e}),n.remove(e),e},At.prototype.removeShape=function(e){return this._removeElement(e,\"shape\")},At.prototype.removeConnection=function(e){return this._removeElement(e,\"connection\")},At.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)},At.prototype._changeViewbox=function(e){this._eventBus.fire(\"canvas.viewbox.changing\"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()},At.prototype._viewboxChanged=function(){this._eventBus.fire(\"canvas.viewbox.changed\",{viewbox:this.viewbox()})},At.prototype.viewbox=function(e){if(void 0===e&&this._cachedViewbox)return this._cachedViewbox;var t,n,i,o,r,a,s=this._viewport,c=this.getSize();return e?(this._changeViewbox(function(){o=Math.min(c.width/e.width,c.height/e.height);var t=this._svg.createSVGMatrix().scale(o).translate(-e.x,-e.y);Xe(s,t)}),e):(t=this.getDefaultLayer().getBBox(),n=(i=Xe(s))?i.matrix:function(e,t,n,i,o,r){var a=ze.createSVGMatrix();switch(arguments.length){case 0:return a;case 6:e={a:e,b:t,c:n,d:i,e:o,f:r}}return Fe(a,e)}(),o=Ct(n.a,1e3),r=Ct(-n.e||0,1e3),a=Ct(-n.f||0,1e3),e=this._cachedViewbox={x:r?r/o:0,y:a?a/o:0,width:c.width/o,height:c.height/o,scale:o,inner:{width:t.width,height:t.height,x:t.x,y:t.y},outer:c})},At.prototype.scroll=function(e){var t=this._viewport,n=t.getCTM();return e&&this._changeViewbox(function(){e=W({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),kt(t,n)}),{x:n.e,y:n.f}},At.prototype.zoom=function(e,t){return e?\"fit-viewport\"===e?this._fitViewport(t):(this._changeViewbox(function(){\"object\"!=typeof t&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),i=this._setZoom(e,t)}),Ct(i.a,1e3)):this.viewbox(e).scale;var n,i},At.prototype._fitViewport=function(e){var t,n,i=this.viewbox(),o=i.outer,r=i.inner;return r.x>=0&&r.y>=0&&r.x+r.width<=o.width&&r.y+r.height<=o.height&&!e?n={x:0,y:0,width:Math.max(r.width+r.x,o.width),height:Math.max(r.height+r.y,o.height)}:(t=Math.min(1,o.width/r.width,o.height/r.height),n={x:r.x+(e?r.width/2-o.width/t/2:0),y:r.y+(e?r.height/2-o.height/t/2:0),width:o.width/t,height:o.height/t}),this.viewbox(n),this.viewbox(!1).scale},At.prototype._setZoom=function(e,t){var n,i,o,r,a=this._svg,s=this._viewport,c=a.createSVGMatrix(),p=a.createSVGPoint(),l=(i=s.getCTM()).a;return t?(n=W(p,t).matrixTransform(i.inverse()),o=c.translate(n.x,n.y).scale(1/l*e).translate(-n.x,-n.y),r=i.multiply(o)):r=c.scale(e),kt(this._viewport,r),r},At.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},At.prototype.getAbsoluteBBox=function(e){var t,n=this.viewbox();e.waypoints?t=this.getGraphics(e).getBBox():t=e;return{x:t.x*n.scale-n.x*n.scale,y:t.y*n.scale-n.y*n.scale,width:t.width*n.scale,height:t.height*n.scale}},At.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire(\"canvas.resized\")};var Bt=\"data-element-id\";function Nt(e){this._elements={},this._eventBus=e}Nt.$inject=[\"eventBus\"],Nt.prototype.add=function(e,t,n){var i=e.id;this._validateId(i),Ce(t,Bt,i),n&&Ce(n,Bt,i),this._elements[i]={element:e,gfx:t,secondaryGfx:n}},Nt.prototype.remove=function(e){var t=this._elements,n=e.id||e,i=n&&t[n];i&&(Ce(i.gfx,Bt,\"\"),i.secondaryGfx&&Ce(i.secondaryGfx,Bt,\"\"),delete t[n])},Nt.prototype.updateId=function(e,t){this._validateId(t),\"string\"==typeof e&&(e=this.get(e)),this._eventBus.fire(\"element.updateId\",{element:e,newId:t});var n=this.getGraphics(e),i=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,i)},Nt.prototype.get=function(e){var t;t=\"string\"==typeof e?e:e&&Ce(e,Bt);var n=this._elements[t];return n&&n.element},Nt.prototype.filter=function(e){var t=[];return this.forEach(function(n,i){e(n,i)&&t.push(n)}),t},Nt.prototype.getAll=function(){return this.filter(function(e){return e})},Nt.prototype.forEach=function(e){var t=this._elements;Object.keys(t).forEach(function(n){var i=t[n],o=i.element,r=i.gfx;return e(o,r)})},Nt.prototype.getGraphics=function(e,t){var n=e.id||e,i=this._elements[n];return i&&(t?i.secondaryGfx:i.gfx)},Nt.prototype._validateId=function(e){if(!e)throw new Error(\"element must have an id\");if(this._elements[e])throw new Error(\"element with id \"+e+\" already added\")};var Dt=n(1),Ot=n.n(Dt),Lt=new Ot.a({name:\"children\",enumerable:!0,collection:!0},{name:\"parent\"}),jt=new Ot.a({name:\"labels\",enumerable:!0,collection:!0},{name:\"labelTarget\"}),It=new Ot.a({name:\"attachers\",collection:!0},{name:\"host\"}),zt=new Ot.a({name:\"outgoing\",collection:!0},{name:\"source\"}),Ft=new Ot.a({name:\"incoming\",collection:!0},{name:\"target\"});function $t(){Object.defineProperty(this,\"businessObject\",{writable:!0}),Object.defineProperty(this,\"label\",{get:function(){return this.labels[0]},set:function(e){var t=this.label,n=this.labels;!e&&t?n.remove(t):n.add(e,0)}}),Lt.bind(this,\"parent\"),jt.bind(this,\"labels\"),zt.bind(this,\"outgoing\"),Ft.bind(this,\"incoming\")}function Vt(){$t.call(this),Lt.bind(this,\"children\"),It.bind(this,\"host\"),It.bind(this,\"attachers\")}function Ht(){Vt.call(this)}function Wt(){Vt.call(this),jt.bind(this,\"labelTarget\")}function Gt(){$t.call(this),zt.bind(this,\"source\"),Ft.bind(this,\"target\")}s()(Vt,$t),s()(Ht,Vt),s()(Wt,Vt),s()(Gt,$t);var qt={connection:Gt,shape:Vt,label:Wt,root:Ht};function Ut(){this._uid=12}Ut.prototype.createRoot=function(e){return this.create(\"root\",e)},Ut.prototype.createLabel=function(e){return this.create(\"label\",e)},Ut.prototype.createShape=function(e){return this.create(\"shape\",e)},Ut.prototype.createConnection=function(e){return this.create(\"connection\",e)},Ut.prototype.create=function(e,t){return(t=W({},t||{})).id||(t.id=e+\"_\"+this._uid++),function(e,t){var n=qt[e];if(!n)throw new Error(\"unknown type: <\"+e+\">\");return W(new n,t)}(e,t)};var Kt=Array.prototype.slice;function Yt(){this._listeners={},this.on(\"diagram.destroy\",1,this._destroy,this)}function Xt(){}function Zt(e,t,n,i,o){var r=$e();r.setTranslate(t,n);var a=$e();a.setRotate(i,0,0);var s=$e();s.setScale(o||1,o||1),Xe(e,[r,a,s])}function Qt(e,t,n){var i=$e();i.setTranslate(t,n),Xe(e,i)}function Jt(e,t){var n=$e();n.setRotate(t,0,0),Xe(e,n)}function en(e,t){this._eventBus=e,this._elementRegistry=t}function tn(e,t,n){t.insertBefore(e,n||t.firstChild)}Yt.prototype.on=function(e,t,n,i){if(e=f(e)?e:[e],v(t)&&(i=n,n=t,t=1e3),!g(t))throw new Error(\"priority must be a number\");var o=n;i&&((o=V(n,i)).__fn=n.__fn||n);var r=this,a={priority:t,callback:o};e.forEach(function(e){r._addListener(e,a)})},Yt.prototype.once=function(e,t,n,i){var o=this;if(v(t)&&(i=n,n=t,t=1e3),!g(t))throw new Error(\"priority must be a number\");function r(){return o.off(e,r),n.apply(i,arguments)}r.__fn=n,this.on(e,t,r)},Yt.prototype.off=function(e,t){e=f(e)?e:[e];var n=this;e.forEach(function(e){n._removeListener(e,t)})},Yt.prototype.createEvent=function(e){var t=new Xt;return t.init(e),t},Yt.prototype.fire=function(e,t){var n,i,o,r;if(r=Kt.call(arguments),\"object\"==typeof e&&(e=(n=e).type),!e)throw new Error(\"no event type specified\");if(i=this._listeners[e]){n=t instanceof Xt?t:this.createEvent(t),r[0]=n;var a=n.type;e!==a&&(n.type=e);try{o=this._invokeListeners(n,r,i)}finally{e!==a&&(n.type=a)}return void 0===o&&n.defaultPrevented&&(o=!1),o}},Yt.prototype.handleError=function(e){return!1===this.fire(\"error\",{error:e})},Yt.prototype._destroy=function(){this._listeners={}},Yt.prototype._invokeListeners=function(e,t,n){var i,o,r;for(i=0;(o=n[i])&&!e.cancelBubble;i++)r=this._invokeListener(e,t,o);return r},Yt.prototype._invokeListener=function(e,t,n){var i;try{void 0!==(i=function(e,t){return e.apply(null,t)}(n.callback,t))&&(e.returnValue=i,e.stopPropagation()),!1===i&&e.preventDefault()}catch(e){if(!this.handleError(e))throw console.error(\"unhandled error in event listener\"),console.error(e.stack),e}return i},Yt.prototype._addListener=function(e,t){var n,i,o=this._getListeners(e);for(i=0;n=o[i];i++)if(n.priority<t.priority)return void o.splice(i,0,t);o.push(t)},Yt.prototype._getListeners=function(e){var t=this._listeners[e];return t||(this._listeners[e]=t=[]),t},Yt.prototype._removeListener=function(e,t){var n,i,o,r=this._getListeners(e);if(t)for(o=r.length-1;n=r[o];o--)(i=n.callback)!==t&&i.__fn!==t||r.splice(o,1);else r.length=0},Xt.prototype.stopPropagation=function(){this.cancelBubble=!0},Xt.prototype.preventDefault=function(){this.defaultPrevented=!0},Xt.prototype.init=function(e){W(this,e||{})},en.$inject=[\"eventBus\",\"elementRegistry\"],en.prototype._getChildren=function(e){var t,n=this._elementRegistry.getGraphics(e);return e.parent?(t=function(e){return e.parentNode.childNodes[1]}(n))||(ke(t=Ie(\"g\")).add(\"djs-children\"),we(n.parentNode,t)):t=n,t},en.prototype._clear=function(e){var t=function(e){return ge(\".djs-visual\",e)}(e);return J(t),t},en.prototype._createContainer=function(e,t,n){var i=Ie(\"g\");ke(i).add(\"djs-group\"),void 0!==n?tn(i,t,t.childNodes[n]):we(t,i);var o=Ie(\"g\");ke(o).add(\"djs-element\"),ke(o).add(\"djs-\"+e),we(i,o);var r=Ie(\"g\");return ke(r).add(\"djs-visual\"),we(o,r),o},en.prototype.create=function(e,t,n){var i=this._getChildren(t.parent);return this._createContainer(e,i,n)},en.prototype.updateContainments=function(e){var t=this,n=this._elementRegistry;S(C(e,function(e,t){return t.parent&&(e[t.parent.id]=t.parent),e},{}),function(e){var i=e.children;if(i){var o=t._getChildren(e);S(i.slice().reverse(),function(e){tn(n.getGraphics(e).parentNode,o)})}})},en.prototype.drawShape=function(e,t){return this._eventBus.fire(\"render.shape\",{gfx:e,element:t})},en.prototype.getShapePath=function(e){return this._eventBus.fire(\"render.getShapePath\",e)},en.prototype.drawConnection=function(e,t){return this._eventBus.fire(\"render.connection\",{gfx:e,element:t})},en.prototype.getConnectionPath=function(e){return this._eventBus.fire(\"render.getConnectionPath\",e)},en.prototype.update=function(e,t,n){if(t.parent){var i=this._clear(n);if(\"shape\"===e)this.drawShape(i,t),Qt(n,t.x,t.y);else{if(\"connection\"!==e)throw new Error(\"unknown type: \"+e);this.drawConnection(i,t)}t.hidden?Ce(n,\"display\",\"none\"):Ce(n,\"display\",\"block\")}},en.prototype.remove=function(e){Ne(this._elementRegistry.getGraphics(e).parentNode)};var nn={__depends__:[ft],__init__:[\"canvas\"],canvas:[\"type\",At],elementRegistry:[\"type\",Nt],elementFactory:[\"type\",Ut],eventBus:[\"type\",Yt],graphicsFactory:[\"type\",en]};function on(e){var t=[],n=[];function i(e){return t.indexOf(e)>=0}e.forEach(function e(o){i(o)||((o.__depends__||[]).forEach(e),i(o)||(function(e){t.push(e)}(o),(o.__init__||[]).forEach(function(e){n.push(e)})))});var o=new at(t);return n.forEach(function(e){try{o[\"string\"==typeof e?\"get\":\"invoke\"](e)}catch(e){throw console.error(\"Failed to instantiate component\"),console.error(e.stack),e}}),o}function rn(e,t){this.injector=t=t||function(e){return on([{config:[\"value\",e=e||{}]},nn].concat(e.modules||[]))}(e),this.get=t.get,this.invoke=t.invoke,this.get(\"eventBus\").fire(\"diagram.init\")}function an(){}function sn(e,t){this.model=e,this.properties=t}rn.prototype.destroy=function(){this.get(\"eventBus\").fire(\"diagram.destroy\")},rn.prototype.clear=function(){this.get(\"eventBus\").fire(\"diagram.clear\")},an.prototype.get=function(e){return this.$model.properties.get(this,e)},an.prototype.set=function(e,t){this.$model.properties.set(this,e,t)},sn.prototype.createType=function(e){var t=this.model,n=this.properties,i=Object.create(an.prototype);S(e.properties,function(e){e.isMany||void 0===e.default||(i[e.name]=e.default)}),n.defineModel(i,t),n.defineDescriptor(i,e);var o=e.ns.name;function r(e){n.define(this,\"$type\",{value:o,enumerable:!0}),n.define(this,\"$attrs\",{value:{}}),n.define(this,\"$parent\",{writable:!0}),S(e,V(function(e,t){this.set(t,e)},this))}return r.prototype=i,r.hasType=i.$instanceOf=this.model.hasType,n.defineModel(r,t),n.defineDescriptor(r,e),r};var cn={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},pn={String:function(e){return e},Boolean:function(e){return\"true\"===e},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e,10)}};function ln(e,t){var n=pn[e];return n?n(t):t}function un(e){return!!cn[e]}function hn(e){return!!pn[e]}function dn(e,t){var n,i,o=e.split(/:/);if(1===o.length)n=e,i=t;else{if(2!==o.length)throw new Error(\"expected <prefix:localName> or <localName>, got \"+e);n=o[1],i=o[0]}return{name:e=(i?i+\":\":\"\")+n,prefix:i,localName:n}}function mn(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}function fn(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,S(e,V(this.registerPackage,this))}function yn(e,t,n){var i=t[n];if(i in e)throw new Error(\"package with \"+n+\" <\"+i+\"> already defined\")}function gn(e){this.model=e}function vn(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}function bn(e){this.properties=new gn(this),this.factory=new sn(this,this.properties),this.registry=new fn(e,this.properties),this.typeCache={}}mn.prototype.build=function(){return G(this,[\"ns\",\"name\",\"allTypes\",\"allTypesByName\",\"properties\",\"propertiesByName\",\"bodyProperty\",\"idProperty\"])},mn.prototype.addProperty=function(e,t,n){\"boolean\"==typeof t&&(n=t,t=void 0),this.addNamedProperty(e,!1!==n);var i=this.properties;void 0!==t?i.splice(t,0,e):i.push(e)},mn.prototype.replaceProperty=function(e,t,n){var i=e.ns,o=this.properties,r=this.propertiesByName,a=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error(\"property <\"+t.ns.name+\"> must be id property to refine <\"+e.ns.name+\">\");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error(\"property <\"+t.ns.name+\"> must be body property to refine <\"+e.ns.name+\">\");this.setBodyProperty(t,!1)}var s=o.indexOf(e);if(-1===s)throw new Error(\"property <\"+i.name+\"> not found in property list\");o.splice(s,1),this.addProperty(t,n?void 0:s,a),r[i.name]=r[i.localName]=t},mn.prototype.redefineProperty=function(e,t,n){var i=e.ns.prefix,o=t.split(\"#\"),r=dn(o[0],i),a=dn(o[1],r.prefix).name,s=this.propertiesByName[a];if(!s)throw new Error(\"refined property <\"+a+\"> not found\");this.replaceProperty(s,e,n),delete e.redefines},mn.prototype.addNamedProperty=function(e,t){var n=e.ns,i=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),i[n.name]=i[n.localName]=e},mn.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]},mn.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error(\"body property defined multiple times (<\"+this.bodyProperty.ns.name+\">, <\"+e.ns.name+\">)\");this.bodyProperty=e},mn.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error(\"id property defined multiple times (<\"+this.idProperty.ns.name+\">, <\"+e.ns.name+\">)\");this.idProperty=e},mn.prototype.assertNotDefined=function(e,t){var n=e.name,i=this.propertiesByName[n];if(i)throw new Error(\"property <\"+n+\"> already defined; override of <\"+i.definedBy.ns.name+\"#\"+i.ns.name+\"> by <\"+e.definedBy.ns.name+\"#\"+e.ns.name+\"> not allowed without redefines\")},mn.prototype.hasProperty=function(e){return this.propertiesByName[e]},mn.prototype.addTrait=function(e,t){var n=this.allTypesByName,i=this.allTypes,o=e.name;o in n||(S(e.properties,V(function(n){n=W({},n,{name:n.ns.localName,inherited:t}),Object.defineProperty(n,\"definedBy\",{value:e});var i=n.replaces,o=n.redefines;i||o?this.redefineProperty(n,i||o,i):(n.isBody&&this.setBodyProperty(n),n.isId&&this.setIdProperty(n),this.addProperty(n))},this)),i.push(e),n[o]=e)},fn.prototype.getPackage=function(e){return this.packageMap[e]},fn.prototype.getPackages=function(){return this.packages},fn.prototype.registerPackage=function(e){e=W({},e);var t=this.packageMap;yn(t,e,\"prefix\"),yn(t,e,\"uri\"),S(e.types,V(function(t){this.registerType(t,e)},this)),t[e.uri]=t[e.prefix]=e,this.packages.push(e)},fn.prototype.registerType=function(e,t){var n=dn((e=W({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:W(e.meta||{})})).name,t.prefix),i=n.name,o={};S(e.properties,V(function(e){var t=dn(e.name,n.prefix),i=t.name;un(e.type)||(e.type=dn(e.type,t.prefix).name),W(e,{ns:t,name:i}),o[i]=e},this)),W(e,{ns:n,name:i,propertiesByName:o}),S(e.extends,V(function(e){var t=this.typeMap[e];t.traits=t.traits||[],t.traits.push(i)},this)),this.definePackage(e,t),this.typeMap[i]=e},fn.prototype.mapTypes=function(e,t,n){var i=un(e.name)?{name:e.name}:this.typeMap[e.name],o=this;function r(e){return a(e,!0)}function a(n,i){var r=dn(n,un(n)?\"\":e.prefix);o.mapTypes(r,t,i)}if(!i)throw new Error(\"unknown type <\"+e.name+\">\");S(i.superClass,n?r:a),t(i,!n),S(i.traits,r)},fn.prototype.getEffectiveDescriptor=function(e){var t=dn(e),n=new mn(t);this.mapTypes(t,function(e,t){n.addTrait(e,t)});var i=n.build();return this.definePackage(i,i.allTypes[i.allTypes.length-1].$pkg),i},fn.prototype.definePackage=function(e,t){this.properties.define(e,\"$pkg\",{value:t})},gn.prototype.set=function(e,t,n){var i=this.model.getPropertyDescriptor(e,t),o=i&&i.name;void 0===n?i?delete e[o]:delete e.$attrs[t]:i?o in e?e[o]=n:vn(e,i,n):e.$attrs[t]=n},gn.prototype.get=function(e,t){var n=this.model.getPropertyDescriptor(e,t);if(!n)return e.$attrs[t];var i=n.name;return!e[i]&&n.isMany&&vn(e,n,[]),e[i]},gn.prototype.define=function(e,t,n){Object.defineProperty(e,t,n)},gn.prototype.defineDescriptor=function(e,t){this.define(e,\"$descriptor\",{value:t})},gn.prototype.defineModel=function(e,t){this.define(e,\"$model\",{value:t})},bn.prototype.create=function(e,t){var n=this.getType(e);if(!n)throw new Error(\"unknown type <\"+e+\">\");return new n(t)},bn.prototype.getType=function(e){var t=this.typeCache,n=b(e)?e:e.ns.name,i=t[n];return i||(e=this.registry.getEffectiveDescriptor(n),i=t[n]=this.factory.createType(e)),i},bn.prototype.createAny=function(e,t,n){var i=dn(e),o={$type:e,$instanceOf:function(e){return e===this.$type}},r={name:e,isGeneric:!0,ns:{prefix:i.prefix,localName:i.localName,uri:t}};return this.properties.defineDescriptor(o,r),this.properties.defineModel(o,this),this.properties.define(o,\"$parent\",{enumerable:!1,writable:!0}),S(n,function(e,t){y(e)&&void 0!==e.value?o[e.name]=e.value:o[t]=e}),o},bn.prototype.getPackage=function(e){return this.registry.getPackage(e)},bn.prototype.getPackages=function(){return this.registry.getPackages()},bn.prototype.getElementDescriptor=function(e){return e.$descriptor},bn.prototype.hasType=function(e,t){return void 0===t&&(t=e,e=this),t in e.$model.getElementDescriptor(e).allTypesByName},bn.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]},bn.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};var xn=n(15),_n=n.n(xn),wn=String.fromCharCode,En=Object.prototype.hasOwnProperty,Sn=/&#(\\d+);|&#x([0-9a-f]+);|&(\\w+);/gi,Pn={amp:\"&\",apos:\"'\",gt:\">\",lt:\"<\",quot:'\"'};function Cn(e,t,n,i){return i?En.call(Pn,i)?Pn[i]:\"&\"+i+\";\":wn(t||parseInt(n,16))}function Tn(e){return e.length>3&&-1!==e.indexOf(\"&\")?e.replace(Sn,Cn):e}Object.keys(Pn).forEach(function(e){Pn[e.toUpperCase()]=Pn[e]});var Rn=\"http://www.w3.org/2001/XMLSchema-instance\",Mn=\"xsi\",An=\"xsi:type\",kn=\"non-whitespace outside of root node\";function Bn(e){return new Error(e)}function Nn(e){return\"missing namespace for prefix <\"+e+\">\"}function Dn(e){return{get:e,enumerable:!0}}function On(e){var t,n={};for(t in e)n[t]=e[t];return n}function Ln(e){return e+\"$uri\"}function jn(){return{line:0,column:0}}function In(e){throw e}function zn(e){if(!this)return new zn(e);var t,n,i,o,r,a,s,c,p,l=e&&e.proxy,u=In,h=jn,d=!1,m=!1,f=null,y=!1;function g(e){e instanceof Error||(e=Bn(e)),f=e,u(e,h)}function v(e){r&&(e instanceof Error||(e=Bn(e)),r(e,h))}this.on=function(e,p){if(\"function\"!=typeof p)throw Bn(\"required args <name, cb>\");switch(e){case\"openTag\":n=p;break;case\"text\":t=p;break;case\"closeTag\":i=p;break;case\"error\":u=p;break;case\"warn\":r=p;break;case\"cdata\":o=p;break;case\"attention\":c=p;break;case\"question\":s=p;break;case\"comment\":a=p;break;default:throw Bn(\"unsupported event: \"+e)}return this},this.ns=function(e){if(void 0===e&&(e={}),\"object\"!=typeof e)throw Bn(\"required args <nsMap={}>\");var t,n={};for(t in e)n[t]=e[t];return n[Rn]=Mn,m=!0,p=n,this},this.parse=function(e){if(\"string\"!=typeof e)throw Bn(\"required args <xml=string>\");return f=null,function(e){var r,u,f,b,x,_,w,E,S,P,C=m?[]:null,T=m?function(e){var t,n,i={};for(t in e)i[n=e[t]]=n,i[Ln(n)]=t;return i}(p):null,R=[],M=0,A=!1,k=!1,B=0,N=0,D=\"\",O=0;function L(){if(null!==P)return P;var e,t,n,i,o,r,a,s,c,l,u,h=m&&T.xmlns,f=m&&d?[]:null,y=O,g=D,b=g.length,x={},_={};e:for(;y<b;y++)if(c=!1,!(32===(l=g.charCodeAt(y))||l<14&&l>8)){for((l<65||l>122||l>90&&l<97)&&95!==l&&58!==l&&(v(\"illegal first char attribute name\"),c=!0),u=y+1;u<b;u++)if(!((l=g.charCodeAt(u))>96&&l<123||l>64&&l<91||l>47&&l<59||46===l||45===l||95===l)){if(32===l||l<14&&l>8){v(\"missing attribute value\"),y=u;continue e}if(61===l)break;v(\"illegal attribute name char\"),c=!0}if(\"xmlns:xmlns\"===(s=g.substring(y,u))&&(v(\"illegal declaration of xmlns\"),c=!0),34===(l=g.charCodeAt(u+1)))-1===(u=g.indexOf('\"',y=u+2))&&-1!==(u=g.indexOf(\"'\",y))&&(v(\"attribute value quote missmatch\"),c=!0);else if(39===l)-1===(u=g.indexOf(\"'\",y=u+2))&&-1!==(u=g.indexOf('\"',y))&&(v(\"attribute value quote missmatch\"),c=!0);else for(v(\"missing attribute value quotes\"),c=!0,u+=1;u<b&&!(32===(l=g.charCodeAt(u+1))||l<14&&l>8);u++);for(-1===u&&(v(\"missing closing quotes\"),u=b,c=!0),c||(r=g.substring(y,u)),y=u;u+1<b&&!(32===(l=g.charCodeAt(u+1))||l<14&&l>8);u++)y===u&&(v(\"illegal character after attribute end\"),c=!0);if(y=u+1,!c)if(s in _)v(\"attribute <\"+s+\"> already defined\");else if(_[s]=!0,m)if(d){if(null!==(o=\"xmlns\"===s?\"xmlns\":120===s.charCodeAt(0)&&\"xmlns:\"===s.substr(0,6)?s.substr(6):null)){if(e=Tn(r),t=Ln(o),!(a=p[e])){if(\"xmlns\"===o||t in T&&T[t]!==e)do{a=\"ns\"+M++}while(void 0!==T[a]);else a=o;p[e]=a}T[o]!==a&&(i||(T=On(T),i=!0),T[o]=a,\"xmlns\"===o&&(T[Ln(a)]=e,h=a),T[t]=e),x[s]=r;continue}f.push(s,r)}else-1!==(l=s.indexOf(\":\"))?(n=T[s.substring(0,l)])?((s=h===n?s.substr(l+1):n+s.substr(l))===An&&(-1!==(l=r.indexOf(\":\"))?(n=r.substring(0,l),n=T[n]||n,r=n+r.substring(l)):r=h+\":\"+r),x[s]=r):v(Nn(s.substring(0,l))):x[s]=r;else x[s]=r}if(d)for(y=0,b=f.length;y<b;y++){if(s=f[y++],r=f[y],-1!==(l=s.indexOf(\":\"))){if(!(n=T[s.substring(0,l)])){v(Nn(s.substring(0,l)));continue}(s=h===n?s.substr(l+1):n+s.substr(l))===An&&(-1!==(l=r.indexOf(\":\"))?(n=r.substring(0,l),n=T[n]||n,r=n+r.substring(l)):r=h+\":\"+r)}x[s]=r}return P=x}h=function(){for(var t,n,i=/(\\r\\n|\\r|\\n)/g,o=0,r=0,a=0,s=N;B>=a&&(t=i.exec(e))&&!((s=t[0].length+t.index)>B);)o+=1,a=s;return-1==B?(r=s,n=e.substring(N)):0===N?(console.log(B-a),n=e.substring(N,B)):(r=B-a,n=-1==N?e.substring(B):e.substring(B,N+1)),{data:n,line:o,column:r}},l&&(S=Object.create({},{name:Dn(function(){return w}),originalName:Dn(function(){return E}),attrs:Dn(L),ns:Dn(function(){return T})}));for(;-1!==N;){if(-1===(B=60===e.charCodeAt(N)?N:e.indexOf(\"<\",N)))return R.length?g(\"unexpected end of file\"):0===N?g(\"missing start tag\"):void(N<e.length&&e.substring(N).trim()&&v(kn));if(N!==B)if(R.length){if(t&&(t(e.substring(N,B),Tn,h),y))return}else if(e.substring(N,B).trim()&&(v(kn),y))return;if(33!==(x=e.charCodeAt(B+1)))if(63!==x){if(-1==(N=e.indexOf(\">\",B+1)))return g(\"unclosed tag\");if(P={},47===x){if(A=!1,k=!0,!R.length)return g(\"missing open tag\");if(u=w=R.pop(),b=B+2+u.length,e.substring(B+2,b)!==u)return g(\"closing tag mismatch\");for(;b<N;b++)if(!(32===(x=e.charCodeAt(b))||x>8&&x<14))return g(\"close tag\")}else{if(47===e.charCodeAt(N-1)?(u=w=e.substring(B+1,N-1),A=!0,k=!0):(u=w=e.substring(B+1,N),A=!0,k=!1),!(x>96&&x<123||x>64&&x<91||95===x||58===x))return g(\"illegal first char nodeName\");for(b=1,f=u.length;b<f;b++)if(!((x=u.charCodeAt(b))>96&&x<123||x>64&&x<91||x>47&&x<59||45===x||95===x||46==x)){if(32===x||x<14&&x>8){w=u.substring(0,b),P=null;break}return g(\"invalid nodeName\")}k||R.push(w)}if(m){if(r=T,A&&(k||C.push(r),null===P&&(d=-1!==u.indexOf(\"xmlns\",b))&&(O=b,D=u,L(),d=!1)),E=w,-1!==(x=w.indexOf(\":\"))){if(!(_=T[w.substring(0,x)]))return g(\"missing namespace on <\"+E+\">\");w=w.substr(x+1)}else _=T.xmlns;_&&(w=_+\":\"+w)}if(A&&(O=b,D=u,n&&(l?n(S,Tn,k,h):n(w,L,Tn,k,h),y)))return;if(k){if(i&&(i(l?S:w,Tn,A,h),y))return;m&&(T=A?r:C.pop())}N+=1}else{if(-1===(N=e.indexOf(\"?>\",B)))return g(\"unclosed question\");if(s&&(s(e.substring(B,N+2),h),y))return;N+=2}else{if(91===(x=e.charCodeAt(B+2))&&\"CDATA[\"===e.substr(B+3,6)){if(-1===(N=e.indexOf(\"]]>\",B)))return g(\"unclosed cdata\");if(o&&(o(e.substring(B+9,N),h),y))return;N+=3;continue}if(45===x&&45===e.charCodeAt(B+3)){if(-1===(N=e.indexOf(\"--\\x3e\",B)))return g(\"unclosed comment\");if(a&&(a(e.substring(B+4,N),Tn,h),y))return;N+=3;continue}if(-1===(N=e.indexOf(\">\",B+1)))return g(\"unclosed tag\");if(c&&(c(e.substring(B,N+1),Tn,h),y))return;N+=1}}}(e),h=jn,y=!1,f},this.stop=function(){y=!0}}function Fn(e){return e.xml&&\"lowerCase\"===e.xml.tagAlias}var $n={xsi:\"http://www.w3.org/2001/XMLSchema-instance\"},Vn=\"xsi:type\";function Hn(e){return e.xml&&e.xml.serialize}function Wn(e){return Hn(e)===Vn}function Gn(e,t){return Fn(t)?e.prefix+\":\"+((n=e.localName).charAt(0).toUpperCase()+n.slice(1)):e.name;var n}function qn(e){return new Error(e)}function Un(e){return e.$descriptor}function Kn(e){W(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(e){this.references.push(e)},this.addElement=function(e){if(!e)throw qn(\"expected element\");var t,n=this.elementsById,i=Un(e).idProperty;if(i&&(t=e.get(i.name))){if(n[t])throw qn(\"duplicate ID <\"+t+\">\");n[t]=e}},this.addWarning=function(e){this.warnings.push(e)}}function Yn(){}function Xn(){}function Zn(){}function Qn(e,t){this.property=e,this.context=t}function Jn(e,t){this.element=t,this.propertyDesc=e}function ei(){}function ti(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}function ni(e,t,n){ti.call(this,e,t,n)}function ii(e,t,n){this.model=e,this.context=n}function oi(e){e instanceof bn&&(e={model:e}),W(this,{lax:!1},e)}Yn.prototype.handleEnd=function(){},Yn.prototype.handleText=function(){},Yn.prototype.handleNode=function(){},Xn.prototype=Object.create(Yn.prototype),Xn.prototype.handleNode=function(){return this},Zn.prototype=Object.create(Yn.prototype),Zn.prototype.handleText=function(e){this.body=(this.body||\"\")+e},Qn.prototype=Object.create(Zn.prototype),Qn.prototype.handleNode=function(e){if(this.element)throw qn(\"expected no sub nodes\");return this.element=this.createReference(e),this},Qn.prototype.handleEnd=function(){this.element.id=this.body},Qn.prototype.createReference=function(e){return{property:this.property.ns.name,id:\"\"}},Jn.prototype=Object.create(Zn.prototype),Jn.prototype.handleEnd=function(){var e=this.body||\"\",t=this.element,n=this.propertyDesc;e=ln(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)},ei.prototype=Object.create(Zn.prototype),ei.prototype.handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t},ti.prototype=Object.create(ei.prototype),ti.prototype.addReference=function(e){this.context.addReference(e)},ti.prototype.handleEnd=function(){var e=this.body,t=this.element,n=Un(t).bodyProperty;n&&void 0!==e&&(e=ln(n.type,e),t.set(n.name,e))},ti.prototype.createElement=function(e){var t,n=e.attributes,i=this.type,o=Un(i),r=this.context,a=new i({}),s=this.model;return S(n,function(e,n){var i=o.propertiesByName[n];i&&i.isReference?i.isMany?S(e.split(\" \"),function(e){r.addReference({element:a,property:i.ns.name,id:e})}):r.addReference({element:a,property:i.ns.name,id:e}):(i?e=ln(i.type,e):\"xmlns\"!==n&&(t=dn(n,o.ns.prefix),s.getPackage(t.prefix)&&r.addWarning({message:\"unknown attribute <\"+n+\">\",element:a,property:n,value:e})),a.set(n,e))}),a},ti.prototype.getPropertyForNode=function(e){var t,n,i=dn(e.name),o=this.type,r=this.model,a=Un(o),s=i.name,c=a.propertiesByName[s];if(c)return Wn(c)&&(t=e.attributes[Vn])?(t=function(e,t){var n=dn(e);return function(e,t){var n=e.name,i=e.localName,o=t.xml&&t.xml.typePrefix;return o&&0===i.indexOf(o)?e.prefix+\":\"+i.slice(o.length):n}(n,t.getPackage(n.prefix))}(t,r),W({},c,{effectiveType:Un(n=r.getType(t)).name})):c;var p=r.getPackage(i.prefix);if(p){if(t=Gn(i,p),n=r.getType(t),c=_(a.properties,function(e){return!e.isVirtual&&!e.isReference&&!e.isAttribute&&n.hasType(e.type)}))return W({},c,{effectiveType:Un(n).name})}else if(c=_(a.properties,function(e){return!e.isReference&&!e.isAttribute&&\"Element\"===e.type}))return c;throw qn(\"unrecognized element <\"+i.name+\">\")},ti.prototype.toString=function(){return\"ElementDescriptor[\"+Un(this.type).name+\"]\"},ti.prototype.valueHandler=function(e,t){return new Jn(e,t)},ti.prototype.referenceHandler=function(e){return new Qn(e,this.context)},ti.prototype.handler=function(e){return\"Element\"===e?new ii(this.model,e,this.context):new ti(this.model,e,this.context)},ti.prototype.handleChild=function(e){var t,n,i,o;if(t=this.getPropertyForNode(e),i=this.element,hn(n=t.effectiveType||t.type))return this.valueHandler(t,i);var r=(o=t.isReference?this.referenceHandler(t).handleNode(e):this.handler(n).handleNode(e)).element;return void 0!==r&&(t.isMany?i.get(t.name).push(r):i.set(t.name,r),t.isReference?(W(r,{element:i}),this.context.addReference(r)):r.$parent=i),o},ni.prototype=Object.create(ti.prototype),ni.prototype.createElement=function(e){var t=e.name,n=dn(t),i=this.model,o=this.type,r=i.getPackage(n.prefix),a=r&&Gn(n,r)||t;if(!o.hasType(a))throw qn(\"unexpected element <\"+e.originalName+\">\");return ti.prototype.createElement.call(this,e)},ii.prototype=Object.create(ei.prototype),ii.prototype.createElement=function(e){var t=e.name,n=dn(t).prefix,i=e.ns[n+\"$uri\"],o=e.attributes;return this.model.createAny(t,i,o)},ii.prototype.handleChild=function(e){var t=new ii(this.model,\"Element\",this.context).handleNode(e),n=this.element,i=t.element;return void 0!==i&&((n.$children=n.$children||[]).push(i),i.$parent=n),t},ii.prototype.handleText=function(e){this.body=this.body||\"\"+e},ii.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)},oi.prototype.fromXML=function(e,t,n){var i=t.rootHandler;t instanceof ti?(i=t,t={}):\"string\"==typeof t?(i=this.handler(t),t={}):\"string\"==typeof i&&(i=this.handler(i));var o=this.model,r=this.lax,a=new Kn(W({},t,{rootHandler:i})),s=new zn({proxy:!0}),c=new _n.a;function p(e,t,n){var i=t(),o=i.line,r=i.column,s=i.data;\"<\"===s.charAt(0)&&-1!==s.indexOf(\" \")&&(s=s.slice(0,s.indexOf(\" \"))+\">\");var c=\"unparsable content \"+(s?s+\" \":\"\")+\"detected\\n\\tline: \"+o+\"\\n\\tcolumn: \"+r+\"\\n\\tnested error: \"+e.message;if(n)return a.addWarning({message:c,error:e}),console.warn(\"could not parse node\"),console.warn(e),!0;throw console.error(\"could not parse document\"),console.error(e),qn(c)}i.context=a,c.push(i);var l=/^<\\?xml /i,u=/ encoding=\"([^\"]+)\"/i,h=/^utf-8$/i;var d=o.getPackages().reduce(function(e,t){return e[t.uri]=t.prefix,e},{});s.ns(d).on(\"openTag\",function(e,t,n,i){var o=e.attrs||{},a=Object.keys(o).reduce(function(e,n){var i=t(o[n]);return e[n]=i,e},{});!function(e,t){var n=c.peek();try{c.push(n.handleNode(e))}catch(e){p(e,t,r)&&c.push(new Xn)}}({name:e.name,originalName:e.originalName,attributes:a,ns:e.ns},i)}).on(\"question\",function(e){if(l.test(e)){var t=u.exec(e),n=t&&t[1];n&&!h.test(n)&&a.addWarning({message:\"unsupported document encoding <\"+n+\">, falling back to UTF-8\"})}}).on(\"closeTag\",function(){c.pop().handleEnd()}).on(\"cdata\",function(e){c.peek().handleText(e)}).on(\"text\",function(e,t){!function(e){(e=e.trim())&&c.peek().handleText(e)}(t(e))}).on(\"error\",p).on(\"warn\",function(e,t){return p(e,t,!0)}),setTimeout(function(){var t;try{s.parse(e),function(){var e,t,n=a.elementsById,i=a.references;for(e=0;t=i[e];e++){var o=t.element,r=n[t.id],s=Un(o).propertiesByName[t.property];if(r||a.addWarning({message:\"unresolved reference <\"+t.id+\">\",element:t.element,property:t.property,value:t.id}),s.isMany){var c=o.get(s.name),p=c.indexOf(t);-1===p&&(p=c.length),r?c[p]=r:c.splice(p,1)}else o.set(s.name,r)}}()}catch(e){t=e}var o=i.element;t||o||(t=qn(\"failed to parse document as <\"+i.type.$descriptor.name+\">\")),n(t,t?void 0:o,a)},0)},oi.prototype.handler=function(e){return new ni(this.model,e)};var ri='<?xml version=\"1.0\" encoding=\"UTF-8\"?>\\n',ai=/<|>|'|\"|&|\\n\\r|\\n/g,si=/<|>|&/g;function ci(e){var t={},n={},i={},o=[],r=[];this.byUri=function(t){return n[t]||e&&e.byUri(t)},this.add=function(e,t){n[e.uri]=e,t?o.push(e):r.push(e),this.mapPrefix(e.prefix,e.uri)},this.uriByPrefix=function(e){return t[e||\"xmlns\"]},this.mapPrefix=function(e,n){t[e||\"xmlns\"]=n},this.logUsed=function(e){var t=e.uri;i[t]=this.byUri(t)},this.getUsed=function(e){return[].concat(o,r).filter(function(e){return i[e.uri]})}}function pi(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function li(e){return b(e)?e:(e.prefix?e.prefix+\":\":\"\")+e.localName}var ui={\"\\n\":\"#10\",\"\\n\\r\":\"#10\",'\"':\"#34\",\"'\":\"#39\",\"<\":\"#60\",\">\":\"#62\",\"&\":\"#38\"},hi={\"<\":\"lt\",\">\":\"gt\",\"&\":\"amp\"};function di(e,t,n){return(e=b(e)?e:\"\"+e).replace(t,function(e){return\"&\"+n[e]+\";\"})}function mi(e){this.tagName=e}function fi(){}function yi(e){this.tagName=e}function gi(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}function vi(e,t){gi.call(this,e,t)}function bi(){this.value=\"\",this.write=function(e){this.value+=e}}function xi(e,t){var n=[\"\"];this.append=function(t){return e.write(t),this},this.appendNewLine=function(){return t&&e.write(\"\\n\"),this},this.appendIndent=function(){return t&&e.write(n.join(\"  \")),this},this.indent=function(){return n.push(\"\"),this},this.unindent=function(){return n.pop(),this}}function _i(e){return e=W({format:!1,preamble:!0},e||{}),{toXML:function(t,n){var i=n||new bi,o=new xi(i,e.format);if(e.preamble&&o.append(ri),(new gi).build(t).serializeTo(o),!n)return i.value}}}function wi(e,t){bn.call(this,e,t)}mi.prototype.build=function(e){return this.element=e,this},mi.prototype.serializeTo=function(e){e.appendIndent().append(\"<\"+this.tagName+\">\"+this.element.id+\"</\"+this.tagName+\">\").appendNewLine()},fi.prototype.serializeValue=fi.prototype.serializeTo=function(e){e.append(this.escape?di(this.value,si,hi):this.value)},fi.prototype.build=function(e,t){return this.value=t,\"String\"===e.type&&-1!==t.search(si)&&(this.escape=!0),this},pi(yi,fi),yi.prototype.serializeTo=function(e){e.appendIndent().append(\"<\"+this.tagName+\">\"),this.serializeValue(e),e.append(\"</\"+this.tagName+\">\").appendNewLine()},gi.prototype.build=function(e){this.element=e;var t,n,i=e.$descriptor,o=this.propertyDescriptor,r=i.isGeneric;return t=r?this.parseGeneric(e):this.parseNsAttributes(e),this.ns=o?this.nsPropertyTagName(o):this.nsTagName(i),this.tagName=this.addTagName(this.ns),r||(n=function(e){return E(e.$descriptor.properties,function(t){var n=t.name;if(t.isVirtual)return!1;if(!e.hasOwnProperty(n))return!1;var i=e[n];return i!==t.default&&null!==i&&(!t.isMany||i.length)})}(e),this.parseAttributes(E(n,function(e){return e.isAttr})),this.parseContainments(function(e){return E(e,function(e){return!e.isAttr})}(n))),this.parseGenericAttributes(e,t),this},gi.prototype.nsTagName=function(e){return function(e,t){return t.isGeneric?W({localName:t.ns.localName},e):W({localName:(n=t.ns.localName,i=t.$pkg,Fn(i)?(o=n).charAt(0).toLowerCase()+o.slice(1):n)},e);var n,i,o}(this.logNamespaceUsed(e.ns),e)},gi.prototype.nsPropertyTagName=function(e){return function(e,t){return W({localName:t.ns.localName},e)}(this.logNamespaceUsed(e.ns),e)},gi.prototype.isLocalNs=function(e){return e.uri===this.ns.uri},gi.prototype.nsAttributeName=function(e){var t;if(t=b(e)?dn(e):e.ns,e.inherited)return{localName:t.localName};var n=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(n),this.isLocalNs(n)?{localName:t.localName}:W({localName:t.localName},n)},gi.prototype.parseGeneric=function(e){var t=this,n=this.body,i=[];return S(e,function(o,r){\"$body\"===r?n.push((new fi).build({type:\"String\"},o)):\"$children\"===r?S(o,function(e){n.push(new gi(t).build(e))}):0!==r.indexOf(\"$\")&&t.parseNsAttribute(e,r,o)&&i.push({name:r,value:o})}),i},gi.prototype.parseNsAttribute=function(e,t,n){var i,o=e.$model,r=dn(t);if(\"xmlns\"===r.prefix&&(i={prefix:r.localName,uri:n}),r.prefix||\"xmlns\"!==r.localName||(i={uri:n}),!i)return{name:t,value:n};if(o&&o.getPackage(n))this.logNamespace(i,!0,!0);else{var a=this.logNamespaceUsed(i,!0);this.getNamespaces().logUsed(a)}},gi.prototype.parseNsAttributes=function(e,t){var n=this,i=e.$attrs,o=[];return S(i,function(t,i){var r=n.parseNsAttribute(e,i,t);r&&o.push(r)}),o},gi.prototype.parseGenericAttributes=function(e,t){var n=this;S(t,function(t){if(t.name!==Vn)try{n.addAttribute(n.nsAttributeName(t.name),t.value)}catch(n){console.warn(\"missing namespace information for \",t.name,\"=\",t.value,\"on\",e,n)}})},gi.prototype.parseContainments=function(e){var t=this,n=this.body,i=this.element;S(e,function(e){var o=i.get(e.name),r=e.isReference;if(e.isMany||(o=[o]),e.isBody)n.push((new fi).build(e,o[0]));else if(hn(e.type))S(o,function(i){n.push(new yi(t.addTagName(t.nsPropertyTagName(e))).build(e,i))});else if(r)S(o,function(i){n.push(new mi(t.addTagName(t.nsPropertyTagName(e))).build(i))});else{var a=Wn(e),s=function(e){return\"property\"===Hn(e)}(e);S(o,function(i){var o;o=a?new vi(t,e):s?new gi(t,e):new gi(t),n.push(o.build(i))})}})},gi.prototype.getNamespaces=function(e){var t,n=this.namespaces,i=this.parent;return n||(t=i&&i.getNamespaces(),e||!t?this.namespaces=n=new ci(t):n=t),n},gi.prototype.logNamespace=function(e,t,n){var i=this.getNamespaces(n),o=e.uri,r=e.prefix;return i.byUri(o)||i.add(e,t),i.mapPrefix(r,o),e},gi.prototype.logNamespaceUsed=function(e,t){var n,i,o,r=this.element.$model,a=this.getNamespaces(t),s=e.prefix,c=e.uri;if(!s&&!c)return{localName:e.localName};if(o=$n[s]||r&&(r.getPackage(s)||{}).uri,!(c=c||o||a.uriByPrefix(s)))throw new Error(\"no namespace uri given for prefix <\"+s+\">\");if(!(e=a.byUri(c))){for(n=s,i=1;a.uriByPrefix(n);)n=s+\"_\"+i++;e=this.logNamespace({prefix:n,uri:c},o===c)}return s&&a.mapPrefix(s,c),e},gi.prototype.parseAttributes=function(e){var t=this,n=this.element;S(e,function(e){var i=n.get(e.name);if(e.isReference)if(e.isMany){var o=[];S(i,function(e){o.push(e.id)}),i=o.join(\" \")}else i=i.id;t.addAttribute(t.nsAttributeName(e),i)})},gi.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),li(e)},gi.prototype.addAttribute=function(e,t){var n=this.attrs;b(t)&&(t=di(t,ai,ui)),n.push({name:e,value:t})},gi.prototype.serializeAttributes=function(e){var t=this.attrs,n=this.namespaces;n&&(t=function(e){return M(e.getUsed(),function(e){return{name:\"xmlns\"+(e.prefix?\":\"+e.prefix:\"\"),value:e.uri}})}(n).concat(t)),S(t,function(t){e.append(\" \").append(li(t.name)).append('=\"').append(t.value).append('\"')})},gi.prototype.serializeTo=function(e){var t=this.body[0],n=t&&t.constructor!==fi;e.appendIndent().append(\"<\"+this.tagName),this.serializeAttributes(e),e.append(t?\">\":\" />\"),t&&(n&&e.appendNewLine().indent(),S(this.body,function(t){t.serializeTo(e)}),n&&e.unindent().appendIndent(),e.append(\"</\"+this.tagName+\">\")),e.appendNewLine()},pi(vi,gi),vi.prototype.parseNsAttributes=function(e){var t=gi.prototype.parseNsAttributes.call(this,e),n=e.$descriptor;if(n.name===this.propertyDescriptor.type)return t;var i=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var o=e.$model.getPackage(i.uri),r=o.xml&&o.xml.typePrefix||\"\";return this.addAttribute(this.nsAttributeName(Vn),(i.prefix?i.prefix+\":\":\"\")+r+n.ns.localName),t},vi.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri},wi.prototype=Object.create(bn.prototype),wi.prototype.fromXML=function(e,t,n,i){b(t)||(i=n,n=t,t=\"bpmn:Definitions\"),v(n)&&(i=n,n={});var o=new oi(W({model:this,lax:!0},n)),r=o.handler(t);o.fromXML(e,r,i)},wi.prototype.toXML=function(e,t,n){v(t)&&(n=t,t={});var i,o,r=new _i(t);try{i=r.toXML(e)}catch(e){o=e}return n(o,i)};var Ei={bpmn:n(10),bpmndi:n(11),dc:n(12),di:n(13),bioc:n(14)},Si=function(e,t){return new wi(W({},Ei,e),t)};function Pi(e){return e?\"<\"+e.$type+(e.id?' id=\"'+e.id:\"\")+'\" />':\"<null>\"}var Ci=new Ot.a({name:\"bpmnElement\",enumerable:!0},{name:\"di\",configurable:!0});function Ti(e,t){return e.$instanceOf(t)}function Ri(e,t){var n={},i=[];function o(e,t){return function(n){e(n,t)}}function r(e){n[e.id]=e}function a(n,i){try{var o=n.di&&function(n,i){if(n.gfx)throw new Error(t(\"already rendered {element}\",{element:Pi(n)}));return e.element(n,i)}(n,i);return r(n),o}catch(e){s(e.message,{element:n,error:e}),console.error(t(\"failed to import {element}\",{element:Pi(n)})),console.error(e)}}function s(t,n){e.error(t,n)}function c(e){var n=e.bpmnElement;n?n.di?s(t(\"multiple DI elements defined for {element}\",{element:Pi(n)}),{element:n}):(Ci.bind(n,\"di\"),n.di=e):s(t(\"no bpmnElement referenced in {element}\",{element:Pi(e)}),{element:e})}function p(e){var t;c(t=e.plane),S(t.planeElement,l)}function l(e){c(e)}function u(){for(;i.length;)i.shift()()}function h(e,t){T(e,t),b(e.ioSpecification,t),v(e.artifacts,t),r(e)}function d(e,t){a(e,t)}function m(e,t){a(e,t)}function f(e,t){a(e,t)}function y(e,t){a(e,t)}function g(e,t){a(e,t)}function v(e,t){S(e,function(e){Ti(e,\"bpmn:Association\")?i.push(function(){g(e,t)}):g(e,t)})}function b(e,t){e&&(S(e.dataInputs,o(f,t)),S(e.dataOutputs,o(y,t)))}function x(e,t){T(e,t),v(e.artifacts,t)}function w(e,t){a(e,t)}function P(e,t){i.push(function(){var n=a(e,t);e.childLaneSet&&C(e.childLaneSet,n||t),function(e){S(e.flowNodeRef,function(t){var n=t.get(\"lanes\");n&&n.push(e)})}(e)})}function C(e,t){S(e.lanes,o(P,t))}function T(e,n){!function(e,n){S(e,function(e){Ti(e,\"bpmn:SequenceFlow\")?i.push(function(){!function(e,t){a(e,t)}(e,n)}):Ti(e,\"bpmn:BoundaryEvent\")?i.unshift(function(){!function(e,t){a(e,t)}(e,n)}):Ti(e,\"bpmn:FlowNode\")?function(e,t){var n=a(e,t);Ti(e,\"bpmn:SubProcess\")&&x(e,n||t),Ti(e,\"bpmn:Activity\")&&b(e.ioSpecification,t),i.push(function(){S(e.dataInputAssociations,o(m,t)),S(e.dataOutputAssociations,o(m,t))})}(e,n):Ti(e,\"bpmn:DataObject\")||(Ti(e,\"bpmn:DataStoreReference\")?w(e,n):Ti(e,\"bpmn:DataObjectReference\")?w(e,n):s(t(\"unrecognized flowElement {element} in context {context}\",{element:Pi(e),context:n?Pi(n.businessObject):\"null\"}),{element:e,context:n}))})}(e.flowElements,n),e.laneSets&&function(e,t){S(e,o(C,t))}(e.laneSets,n)}function R(e,t){var n=a(e,t),i=e.processRef;i&&h(i,n||t)}return{handleDeferred:u,handleDefinitions:function(r,a){var l=r.diagrams;if(a&&-1===l.indexOf(a))throw new Error(t(\"diagram not part of bpmn:Definitions\"));if(!a&&l&&l.length&&(a=l[0]),!a)throw new Error(t(\"no diagram to display\"));p(a);var m=a.plane;if(!m)throw new Error(t(\"no plane for {element}\",{element:Pi(a)}));var f=m.bpmnElement;if(!f){if(!(f=function(e){return _(e.rootElements,function(e){return Ti(e,\"bpmn:Process\")||Ti(e,\"bpmn:Collaboration\")})}(r)))throw new Error(t(\"no process or collaboration to display\"));s(t(\"correcting missing bpmnElement on {plane} to {rootElement}\",{plane:Pi(m),rootElement:Pi(f)})),m.bpmnElement=f,c(m)}var y,g=function(t,n){return e.root(t,n)}(f,m);if(Ti(f,\"bpmn:Process\"))h(f,g);else{if(!Ti(f,\"bpmn:Collaboration\"))throw new Error(t(\"unsupported bpmnElement for {plane}: {rootElement}\",{plane:Pi(m),rootElement:Pi(f)}));S((y=f).participants,o(R)),v(y.artifacts),i.push(function(){var e;S(y.messageFlows,o(d,e))}),E(r.rootElements,function(e){return!n[e.id]&&Ti(e,\"bpmn:Process\")&&e.laneSets}).forEach(o(h))}u()},handleSubProcess:x,registerDi:c}}function Mi(e,t){var n=Ai(e);return n&&\"function\"==typeof n.$instanceOf&&n.$instanceOf(t)}function Ai(e){return e&&e.businessObject||e}function ki(e){return!Mi(e,\"bpmn:CallActivity\")&&(Mi(e,\"bpmn:SubProcess\")?!!Ai(e).di.isExpanded:!Mi(e,\"bpmn:Participant\")||!!Ai(e).processRef)}function Bi(e){return e&&!!Ai(e).triggeredByEvent}function Ni(e,t){var n=Ai(e),i=!1;return n.eventDefinitions&&S(n.eventDefinitions,function(e){Mi(e,t)&&(i=!0)}),i}function Di(e,t,n){return R(e.eventDefinitions,function(i){return i.$type===t&&function(e,t){return T(t,function(t,n){return e[n]==t})}(e,n)})}function Oi(e){return e.businessObject.di}function Li(e){return e.businessObject}function ji(e,t){return Oi(e).get(\"bioc:fill\")||t||\"white\"}function Ii(e,t){return Oi(e).get(\"bioc:stroke\")||t||\"black\"}var zi=new p.a,Fi=10,$i=3,Vi=.95,Hi=.35;function Wi(e,t,n,i,o,r,a){pt.call(this,t,a);var s=e&&e.defaultFillColor,c=e&&e.defaultStrokeColor,p=zi.next(),l={},u=n.computeStyle;function h(e,t){var n=W({fill:\"black\",strokeWidth:1,strokeLinecap:\"round\",strokeDasharray:\"none\"},t.attrs),i=t.ref||{x:0,y:0},r=t.scale||1;\"none\"===n.strokeDasharray&&(n.strokeDasharray=[1e4,1]);var a=Ie(\"marker\");Ce(t.element,n),we(a,t.element),Ce(a,{id:e,viewBox:\"0 0 20 20\",refX:i.x,refY:i.y,markerWidth:20*r,markerHeight:20*r,orient:\"auto\"});var s=ge(\"defs\",o._svg);s||(s=Ie(\"defs\"),we(o._svg,s)),we(s,a),l[e]=a}function d(e,t,n){var i=e+\"-\"+t+\"-\"+n+\"-\"+p;return l[i]||function(e,t,n){var i=e+\"-\"+t+\"-\"+n+\"-\"+p;if(\"sequenceflow-end\"===e){var o=Ie(\"path\");Ce(o,{d:\"M 1 5 L 11 10 L 1 15 Z\"}),h(i,{element:o,ref:{x:11,y:10},scale:.5,attrs:{fill:n,stroke:n}})}if(\"messageflow-start\"===e){var r=Ie(\"circle\");Ce(r,{cx:6,cy:6,r:3.5}),h(i,{element:r,attrs:{fill:t,stroke:n},ref:{x:6,y:6}})}if(\"messageflow-end\"===e){var a=Ie(\"path\");Ce(a,{d:\"m 1 5 l 0 -3 l 7 3 l -7 3 z\"}),h(i,{element:a,attrs:{fill:t,stroke:n,strokeLinecap:\"butt\"},ref:{x:8.5,y:5}})}if(\"association-start\"===e){var s=Ie(\"path\");Ce(s,{d:\"M 11 5 L 1 10 L 11 15\"}),h(i,{element:s,attrs:{fill:\"none\",stroke:n,strokeWidth:1.5},ref:{x:1,y:10},scale:.5})}if(\"association-end\"===e){var c=Ie(\"path\");Ce(c,{d:\"M 1 5 L 11 10 L 1 15\"}),h(i,{element:c,attrs:{fill:\"none\",stroke:n,strokeWidth:1.5},ref:{x:12,y:10},scale:.5})}if(\"conditional-flow-marker\"===e){var l=Ie(\"path\");Ce(l,{d:\"M 0 10 L 8 6 L 16 10 L 8 14 Z\"}),h(i,{element:l,attrs:{fill:t,stroke:n},ref:{x:-1,y:10},scale:.5})}if(\"conditional-default-flow-marker\"===e){var u=Ie(\"path\");Ce(u,{d:\"M 6 4 L 10 16\"}),h(i,{element:u,attrs:{stroke:n},ref:{x:0,y:10},scale:.5})}}(e,t,n),\"url(#\"+i+\")\"}function m(e,t,n,i,o){y(i)&&(o=i,i=0),i=i||0,\"none\"===(o=u(o,{stroke:\"black\",strokeWidth:2,fill:\"white\"})).fill&&delete o.fillOpacity;var r=t/2,a=n/2,s=Ie(\"circle\");return Ce(s,{cx:r,cy:a,r:Math.round((t+n)/4-i)}),Ce(s,o),we(e,s),s}function f(e,t,n,i,o,r){y(o)&&(r=o,o=0),o=o||0,r=u(r,{stroke:\"black\",strokeWidth:2,fill:\"white\"});var a=Ie(\"rect\");return Ce(a,{x:o,y:o,width:t-2*o,height:n-2*o,rx:i,ry:i}),Ce(a,r),we(e,a),a}function g(e,t,n){var i=ht(t,n=u(n,[\"no-fill\"],{stroke:\"black\",strokeWidth:2,fill:\"none\"}));return we(e,i),i}function v(e,t,n){n=u(n,[\"no-fill\"],{strokeWidth:2,stroke:\"black\"});var i=Ie(\"path\");return Ce(i,{d:t}),Ce(i,n),we(e,i),i}function b(e,t,n,i){return v(t,n,W({\"data-marker\":e},i))}function x(e){return function(t,n){return R[e](t,n)}}function _(e){return R[e]}function w(e,t){var n=Li(e),i=function(e){return\"bpmn:IntermediateThrowEvent\"===e.$type||\"bpmn:EndEvent\"===e.$type}(n);return Di(n,\"bpmn:MessageEventDefinition\")?_(\"bpmn:MessageEventDefinition\")(t,e,i):Di(n,\"bpmn:TimerEventDefinition\")?_(\"bpmn:TimerEventDefinition\")(t,e,i):Di(n,\"bpmn:ConditionalEventDefinition\")?_(\"bpmn:ConditionalEventDefinition\")(t,e):Di(n,\"bpmn:SignalEventDefinition\")?_(\"bpmn:SignalEventDefinition\")(t,e,i):Di(n,\"bpmn:CancelEventDefinition\")&&Di(n,\"bpmn:TerminateEventDefinition\",{parallelMultiple:!1})?_(\"bpmn:MultipleEventDefinition\")(t,e,i):Di(n,\"bpmn:CancelEventDefinition\")&&Di(n,\"bpmn:TerminateEventDefinition\",{parallelMultiple:!0})?_(\"bpmn:ParallelMultipleEventDefinition\")(t,e,i):Di(n,\"bpmn:EscalationEventDefinition\")?_(\"bpmn:EscalationEventDefinition\")(t,e,i):Di(n,\"bpmn:LinkEventDefinition\")?_(\"bpmn:LinkEventDefinition\")(t,e,i):Di(n,\"bpmn:ErrorEventDefinition\")?_(\"bpmn:ErrorEventDefinition\")(t,e,i):Di(n,\"bpmn:CancelEventDefinition\")?_(\"bpmn:CancelEventDefinition\")(t,e,i):Di(n,\"bpmn:CompensateEventDefinition\")?_(\"bpmn:CompensateEventDefinition\")(t,e,i):Di(n,\"bpmn:TerminateEventDefinition\")?_(\"bpmn:TerminateEventDefinition\")(t,e,i):null}function E(e,t,n){n=W({size:{width:100}},n);var i=r.createText(t||\"\",n);return ke(i).add(\"djs-label\"),we(e,i),i}function P(e,t,n){return E(e,Li(t).name,{box:t,align:n,padding:5,style:{fill:Ii(t,c)}})}function C(e,t,n){Zt(E(e,t,{box:{height:30,width:n.height},align:\"center-middle\",style:{fill:Ii(n,c)}}),0,-(-1*n.height),270)}function T(e){for(var t=e.waypoints,n=\"m  \"+t[0].x+\",\"+t[0].y,i=1;i<t.length;i++)n+=\"L\"+t[i].x+\",\"+t[i].y+\" \";return n}var R=this.handlers={\"bpmn:Event\":function(e,t,n){return\"fillOpacity\"in n||(n.fillOpacity=Vi),m(e,t.width,t.height,n)},\"bpmn:StartEvent\":function(e,t){var n={fill:ji(t,s),stroke:Ii(t,c)};Li(t).isInterrupting||(n={strokeDasharray:\"6\",strokeLinecap:\"round\",fill:ji(t,s),stroke:Ii(t,c)});var i=_(\"bpmn:Event\")(e,t,n);return w(t,e),i},\"bpmn:MessageEventDefinition\":function(e,t,n){return v(e,i.getScaledPath(\"EVENT_MESSAGE\",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:t.width,containerHeight:t.height,position:{mx:.235,my:.315}}),{strokeWidth:1,fill:n?Ii(t,c):ji(t,s),stroke:n?ji(t,s):Ii(t,c)})},\"bpmn:TimerEventDefinition\":function(e,t){var n=m(e,t.width,t.height,.2*t.height,{strokeWidth:2,fill:ji(t,s),stroke:Ii(t,c)});v(e,i.getScaledPath(\"EVENT_TIMER_WH\",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.5}}),{strokeWidth:2,strokeLinecap:\"square\",stroke:Ii(t,c)});for(var o=0;o<12;o++){var r=i.getScaledPath(\"EVENT_TIMER_LINE\",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.5}}),a=t.width/2;v(e,r,{strokeWidth:1,strokeLinecap:\"square\",transform:\"rotate(\"+30*o+\",\"+t.height/2+\",\"+a+\")\",stroke:Ii(t,c)})}return n},\"bpmn:EscalationEventDefinition\":function(e,t,n){return v(e,i.getScaledPath(\"EVENT_ESCALATION\",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.2}}),{strokeWidth:1,fill:n?Ii(t,c):\"none\",stroke:Ii(t,c)})},\"bpmn:ConditionalEventDefinition\":function(e,t){return v(e,i.getScaledPath(\"EVENT_CONDITIONAL\",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.222}}),{strokeWidth:1,stroke:Ii(t,c)})},\"bpmn:LinkEventDefinition\":function(e,t,n){return v(e,i.getScaledPath(\"EVENT_LINK\",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.57,my:.263}}),{strokeWidth:1,fill:n?Ii(t,c):\"none\",stroke:Ii(t,c)})},\"bpmn:ErrorEventDefinition\":function(e,t,n){return v(e,i.getScaledPath(\"EVENT_ERROR\",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:t.width,containerHeight:t.height,position:{mx:.2,my:.722}}),{strokeWidth:1,fill:n?Ii(t,c):\"none\",stroke:Ii(t,c)})},\"bpmn:CancelEventDefinition\":function(e,t,n){var o=v(e,i.getScaledPath(\"EVENT_CANCEL_45\",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.638,my:-.055}}),{strokeWidth:1,fill:n?Ii(t,c):\"none\",stroke:Ii(t,c)});return Jt(o,45),o},\"bpmn:CompensateEventDefinition\":function(e,t,n){return v(e,i.getScaledPath(\"EVENT_COMPENSATION\",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.22,my:.5}}),{strokeWidth:1,fill:n?Ii(t,c):\"none\",stroke:Ii(t,c)})},\"bpmn:SignalEventDefinition\":function(e,t,n){return v(e,i.getScaledPath(\"EVENT_SIGNAL\",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.2}}),{strokeWidth:1,fill:n?Ii(t,c):\"none\",stroke:Ii(t,c)})},\"bpmn:MultipleEventDefinition\":function(e,t,n){return v(e,i.getScaledPath(\"EVENT_MULTIPLE\",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:t.width,containerHeight:t.height,position:{mx:.222,my:.36}}),{strokeWidth:1,fill:n?Ii(t,c):\"none\"})},\"bpmn:ParallelMultipleEventDefinition\":function(e,t){return v(e,i.getScaledPath(\"EVENT_PARALLEL_MULTIPLE\",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:t.width,containerHeight:t.height,position:{mx:.458,my:.194}}),{strokeWidth:1,fill:Ii(t,c),stroke:Ii(t,c)})},\"bpmn:EndEvent\":function(e,t){var n=_(\"bpmn:Event\")(e,t,{strokeWidth:4,fill:ji(t,s),stroke:Ii(t,c)});return w(t,e),n},\"bpmn:TerminateEventDefinition\":function(e,t){return m(e,t.width,t.height,8,{strokeWidth:4,fill:Ii(t,c),stroke:Ii(t,c)})},\"bpmn:IntermediateEvent\":function(e,t){var n=_(\"bpmn:Event\")(e,t,{strokeWidth:1,fill:ji(t,s),stroke:Ii(t,c)});return m(e,t.width,t.height,$i,{strokeWidth:1,fill:ji(t,\"none\"),stroke:Ii(t,c)}),w(t,e),n},\"bpmn:IntermediateCatchEvent\":x(\"bpmn:IntermediateEvent\"),\"bpmn:IntermediateThrowEvent\":x(\"bpmn:IntermediateEvent\"),\"bpmn:Activity\":function(e,t,n){return\"fillOpacity\"in(n=n||{})||(n.fillOpacity=Vi),f(e,t.width,t.height,Fi,n)},\"bpmn:Task\":function(e,t){var n={fill:ji(t,s),stroke:Ii(t,c)},i=_(\"bpmn:Activity\")(e,t,n);return P(e,t,\"center-middle\"),M(e,t),i},\"bpmn:ServiceTask\":function(e,t){var n=_(\"bpmn:Task\")(e,t);return v(e,i.getScaledPath(\"TASK_TYPE_SERVICE\",{abspos:{x:12,y:18}}),{strokeWidth:1,fill:ji(t,s),stroke:Ii(t,c)}),v(e,i.getScaledPath(\"TASK_TYPE_SERVICE_FILL\",{abspos:{x:17.2,y:18}}),{strokeWidth:0,fill:ji(t,s)}),v(e,i.getScaledPath(\"TASK_TYPE_SERVICE\",{abspos:{x:17,y:22}}),{strokeWidth:1,fill:ji(t,s),stroke:Ii(t,c)}),n},\"bpmn:UserTask\":function(e,t){var n=_(\"bpmn:Task\")(e,t);return v(e,i.getScaledPath(\"TASK_TYPE_USER_1\",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:ji(t,s),stroke:Ii(t,c)}),v(e,i.getScaledPath(\"TASK_TYPE_USER_2\",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:ji(t,s),stroke:Ii(t,c)}),v(e,i.getScaledPath(\"TASK_TYPE_USER_3\",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:Ii(t,c),stroke:Ii(t,c)}),n},\"bpmn:ManualTask\":function(e,t){var n=_(\"bpmn:Task\")(e,t);return v(e,i.getScaledPath(\"TASK_TYPE_MANUAL\",{abspos:{x:17,y:15}}),{strokeWidth:.5,fill:ji(t,s),stroke:Ii(t,c)}),n},\"bpmn:SendTask\":function(e,t){var n=_(\"bpmn:Task\")(e,t);return v(e,i.getScaledPath(\"TASK_TYPE_SEND\",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}}),{strokeWidth:1,fill:Ii(t,c),stroke:ji(t,s)}),n},\"bpmn:ReceiveTask\":function(e,t){var n,o=Li(t),r=_(\"bpmn:Task\")(e,t);return o.instantiate?(m(e,28,28,4.4,{strokeWidth:1}),n=i.getScaledPath(\"TASK_TYPE_INSTANTIATING_SEND\",{abspos:{x:7.77,y:9.52}})):n=i.getScaledPath(\"TASK_TYPE_SEND\",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),v(e,n,{strokeWidth:1,fill:ji(t,s),stroke:Ii(t,c)}),r},\"bpmn:ScriptTask\":function(e,t){var n=_(\"bpmn:Task\")(e,t);return v(e,i.getScaledPath(\"TASK_TYPE_SCRIPT\",{abspos:{x:15,y:20}}),{strokeWidth:1,stroke:Ii(t,c)}),n},\"bpmn:BusinessRuleTask\":function(e,t){var n=_(\"bpmn:Task\")(e,t);return Ce(v(e,i.getScaledPath(\"TASK_TYPE_BUSINESS_RULE_HEADER\",{abspos:{x:8,y:8}})),{strokeWidth:1,fill:ji(t,\"#aaaaaa\"),stroke:Ii(t,c)}),Ce(v(e,i.getScaledPath(\"TASK_TYPE_BUSINESS_RULE_MAIN\",{abspos:{x:8,y:8}})),{strokeWidth:1,stroke:Ii(t,c)}),n},\"bpmn:SubProcess\":function(e,t,n){n=W({fill:ji(t,s),stroke:Ii(t,c)},n);var i=_(\"bpmn:Activity\")(e,t,n),o=ki(t);return Bi(t)&&Ce(i,{strokeDasharray:\"1,2\"}),P(e,t,o?\"center-top\":\"center-middle\"),o?M(e,t):M(e,t,[\"SubProcessMarker\"]),i},\"bpmn:AdHocSubProcess\":function(e,t){return _(\"bpmn:SubProcess\")(e,t)},\"bpmn:Transaction\":function(e,t){var i=_(\"bpmn:SubProcess\")(e,t),o=n.style([\"no-fill\",\"no-events\"],{stroke:Ii(t,c)});return f(e,t.width,t.height,Fi-2,$i,o),i},\"bpmn:CallActivity\":function(e,t){return _(\"bpmn:SubProcess\")(e,t,{strokeWidth:5})},\"bpmn:Participant\":function(e,t){var n={fillOpacity:Vi,fill:ji(t,s),stroke:Ii(t,c)},i=_(\"bpmn:Lane\")(e,t,n);ki(t)?(g(e,[{x:30,y:0},{x:30,y:t.height}],{stroke:Ii(t,c)}),C(e,Li(t).name,t)):E(e,Li(t).name,{box:t,align:\"center-middle\",style:{fill:Ii(t,c)}});return!!Li(t).participantMultiplicity&&_(\"ParticipantMultiplicityMarker\")(e,t),i},\"bpmn:Lane\":function(e,t,n){var i=f(e,t.width,t.height,0,W({fill:ji(t,s),fillOpacity:Hi,stroke:Ii(t,c)},n)),o=Li(t);\"bpmn:Lane\"===o.$type&&C(e,o.name,t);return i},\"bpmn:InclusiveGateway\":function(e,t){var n=_(\"bpmn:Gateway\")(e,t);return m(e,t.width,t.height,.24*t.height,{strokeWidth:2.5,fill:ji(t,s),stroke:Ii(t,c)}),n},\"bpmn:ExclusiveGateway\":function(e,t){var n=_(\"bpmn:Gateway\")(e,t),o=i.getScaledPath(\"GATEWAY_EXCLUSIVE\",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:t.width,containerHeight:t.height,position:{mx:.32,my:.3}});return Oi(t).isMarkerVisible&&v(e,o,{strokeWidth:1,fill:Ii(t,c),stroke:Ii(t,c)}),n},\"bpmn:ComplexGateway\":function(e,t){var n=_(\"bpmn:Gateway\")(e,t);return v(e,i.getScaledPath(\"GATEWAY_COMPLEX\",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:t.width,containerHeight:t.height,position:{mx:.46,my:.26}}),{strokeWidth:1,fill:Ii(t,c),stroke:Ii(t,c)}),n},\"bpmn:ParallelGateway\":function(e,t){var n=_(\"bpmn:Gateway\")(e,t);return v(e,i.getScaledPath(\"GATEWAY_PARALLEL\",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:t.width,containerHeight:t.height,position:{mx:.46,my:.2}}),{strokeWidth:1,fill:Ii(t,c),stroke:Ii(t,c)}),n},\"bpmn:EventBasedGateway\":function(e,t){var n=Li(t),o=_(\"bpmn:Gateway\")(e,t);m(e,t.width,t.height,.2*t.height,{strokeWidth:1,fill:\"none\",stroke:Ii(t,c)});var r=n.eventGatewayType,a=!!n.instantiate;if(\"Parallel\"===r){var s=i.getScaledPath(\"GATEWAY_PARALLEL\",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:t.width,containerHeight:t.height,position:{mx:.474,my:.296}});Ce(v(e,s),{strokeWidth:1,fill:\"none\"})}else if(\"Exclusive\"===r){if(!a)Ce(m(e,t.width,t.height,.26*t.height),{strokeWidth:1,fill:\"none\",stroke:Ii(t,c)});!function(){var n=i.getScaledPath(\"GATEWAY_EVENT_BASED\",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:t.width,containerHeight:t.height,position:{mx:.36,my:.44}}),o={strokeWidth:2,fill:ji(t,\"none\"),stroke:Ii(t,c)};v(e,n,o)}()}return o},\"bpmn:Gateway\":function(e,t){var n={fill:ji(t,s),fillOpacity:Vi,stroke:Ii(t,c)};return function(e,t,n,i){var o=t/2,r=n/2,a=[{x:o,y:0},{x:t,y:r},{x:o,y:n},{x:0,y:r}].map(function(e){return e.x+\",\"+e.y}).join(\" \");i=u(i,{stroke:\"black\",strokeWidth:2,fill:\"white\"});var s=Ie(\"polygon\");return Ce(s,{points:a}),Ce(s,i),we(e,s),s}(e,t.width,t.height,n)},\"bpmn:SequenceFlow\":function(e,t){var n,i=T(t),o=ji(t,s),r=Ii(t,c),a=v(e,i,{strokeLinejoin:\"round\",markerEnd:d(\"sequenceflow-end\",o,r),stroke:Ii(t,c)}),p=Li(t);return t.source&&(n=t.source.businessObject,p.conditionExpression&&n.$instanceOf(\"bpmn:Activity\")&&Ce(a,{markerStart:d(\"conditional-flow-marker\",o,r)}),n.default&&(n.$instanceOf(\"bpmn:Gateway\")||n.$instanceOf(\"bpmn:Activity\"))&&n.default===p&&Ce(a,{markerStart:d(\"conditional-default-flow-marker\",o,r)})),a},\"bpmn:Association\":function(e,t,n){var i=Li(t),o=ji(t,s),r=Ii(t,c);return n=W({strokeDasharray:\"0.5, 5\",strokeLinecap:\"round\",strokeLinejoin:\"round\",stroke:Ii(t,c)},n||{}),\"One\"!==i.associationDirection&&\"Both\"!==i.associationDirection||(n.markerEnd=d(\"association-end\",o,r)),\"Both\"===i.associationDirection&&(n.markerStart=d(\"association-start\",o,r)),g(e,t.waypoints,n)},\"bpmn:DataInputAssociation\":function(e,t){var n=ji(t,s),i=Ii(t,c);return _(\"bpmn:Association\")(e,t,{markerEnd:d(\"association-end\",n,i)})},\"bpmn:DataOutputAssociation\":function(e,t){var n=ji(t,s),i=Ii(t,c);return _(\"bpmn:Association\")(e,t,{markerEnd:d(\"association-end\",n,i)})},\"bpmn:MessageFlow\":function(e,t){var n=Li(t),o=Oi(t),r=ji(t,s),a=Ii(t,c),p=v(e,T(t),{markerEnd:d(\"messageflow-end\",r,a),markerStart:d(\"messageflow-start\",r,a),strokeDasharray:\"10, 12\",strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"1.5px\",stroke:Ii(t,c)});if(n.messageRef){var l=p.getPointAtLength(p.getTotalLength()/2),u=i.getScaledPath(\"MESSAGE_FLOW_MARKER\",{abspos:{x:l.x,y:l.y}}),h={strokeWidth:1};\"initiating\"===o.messageVisibleKind?(h.fill=\"white\",h.stroke=\"black\"):(h.fill=\"#888\",h.stroke=\"white\"),v(e,u,h)}return p},\"bpmn:DataObject\":function(e,t){var n=v(e,i.getScaledPath(\"DATA_OBJECT_PATH\",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.474,my:.296}}),{fill:ji(t,s),fillOpacity:Vi,stroke:Ii(t,c)});return function(e){var t=e.dataObjectRef;return e.isCollection||t&&t.isCollection}(Li(t))&&function(e,t){var n=(t.height-16)/t.height,o=i.getScaledPath(\"DATA_OBJECT_COLLECTION_PATH\",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.451,my:n}});v(e,o,{strokeWidth:2})}(e,t),n},\"bpmn:DataObjectReference\":x(\"bpmn:DataObject\"),\"bpmn:DataInput\":function(e,t){var n=i.getRawPath(\"DATA_ARROW\"),o=_(\"bpmn:DataObject\")(e,t);return v(e,n,{strokeWidth:1}),o},\"bpmn:DataOutput\":function(e,t){var n=i.getRawPath(\"DATA_ARROW\"),o=_(\"bpmn:DataObject\")(e,t);return v(e,n,{strokeWidth:1,fill:\"black\"}),o},\"bpmn:DataStoreReference\":function(e,t){return v(e,i.getScaledPath(\"DATA_STORE\",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:.133}}),{strokeWidth:2,fill:ji(t,s),fillOpacity:Vi,stroke:Ii(t,c)})},\"bpmn:BoundaryEvent\":function(e,t){var n=Li(t).cancelActivity,i={strokeWidth:1,fill:ji(t,s),stroke:Ii(t,c)};n||(i.strokeDasharray=\"6\",i.strokeLinecap=\"round\");var o=W({},i,{fillOpacity:1}),r=W({},i,{fill:\"none\"}),a=_(\"bpmn:Event\")(e,t,o);return m(e,t.width,t.height,$i,r),w(t,e),a},\"bpmn:Group\":function(e,t){var n=Li(t),i=Oi(t),o=f(e,t.width,t.height,Fi,{strokeWidth:1,strokeDasharray:\"8,3,1,3\",fill:\"none\",pointerEvents:\"none\"}),r=n.categoryValueRef||{};if(r.value){var a=i.label?i.label.bounds:t;E(e,r.value,{box:a,style:{fill:Ii(t,c)}})}return o},label:function(e,t){return function(e,t){var n=Li(t),i={width:90,height:30,x:t.width/2+t.x,y:t.height/2+t.y};return E(e,n.name,{box:i,fitBox:!0,style:W({},r.getExternalStyle(),{fill:Ii(t,c)})})}(e,t)},\"bpmn:TextAnnotation\":function(e,t){var n=f(e,t.width,t.height,0,0,{fill:\"none\",stroke:\"none\"});return v(e,i.getScaledPath(\"TEXT_ANNOTATION\",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:0}}),{stroke:Ii(t,c)}),E(e,Li(t).text||\"\",{box:t,align:\"left-top\",padding:5,style:{fill:Ii(t,c)}}),n},ParticipantMultiplicityMarker:function(e,t){b(\"participant-multiplicity\",e,i.getScaledPath(\"MARKER_PARALLEL\",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:t.width/2/t.width,my:(t.height-15)/t.height}}),{strokeWidth:1,fill:ji(t,s),stroke:Ii(t,c)})},SubProcessMarker:function(e,t){Qt(f(e,14,14,0,{strokeWidth:1,fill:ji(t,s),stroke:Ii(t,c)}),t.width/2-7.5,t.height-20),b(\"sub-process\",e,i.getScaledPath(\"MARKER_SUB_PROCESS\",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2-7.5)/t.width,my:(t.height-20)/t.height}}),{fill:ji(t,s),stroke:Ii(t,c)})},ParallelMarker:function(e,t,n){b(\"parallel\",e,i.getScaledPath(\"MARKER_PARALLEL\",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.parallel)/t.width,my:(t.height-20)/t.height}}),{fill:ji(t,s),stroke:Ii(t,c)})},SequentialMarker:function(e,t,n){b(\"sequential\",e,i.getScaledPath(\"MARKER_SEQUENTIAL\",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.seq)/t.width,my:(t.height-19)/t.height}}),{fill:ji(t,s),stroke:Ii(t,c)})},CompensationMarker:function(e,t,n){b(\"compensation\",e,i.getScaledPath(\"MARKER_COMPENSATION\",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.compensation)/t.width,my:(t.height-13)/t.height}}),{strokeWidth:1,fill:ji(t,s),stroke:Ii(t,c)})},LoopMarker:function(e,t,n){b(\"loop\",e,i.getScaledPath(\"MARKER_LOOP\",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.loop)/t.width,my:(t.height-7)/t.height}}),{strokeWidth:1,fill:ji(t,s),stroke:Ii(t,c),strokeLinecap:\"round\",strokeMiterlimit:.5})},AdhocMarker:function(e,t,n){b(\"adhoc\",e,i.getScaledPath(\"MARKER_ADHOC\",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.adhoc)/t.width,my:(t.height-15)/t.height}}),{strokeWidth:1,fill:Ii(t,c),stroke:Ii(t,c)})}};function M(e,t,n){var i,o=Li(t),r=n&&-1!==n.indexOf(\"SubProcessMarker\");i=r?{seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:{seq:-3,parallel:-6,compensation:-27,loop:0,adhoc:10},S(n,function(n){_(n)(e,t,i)}),o.isForCompensation&&_(\"CompensationMarker\")(e,t,i),\"bpmn:AdHocSubProcess\"===o.$type&&_(\"AdhocMarker\")(e,t,i);var a=o.loopCharacteristics,s=a&&a.isSequential;a&&(void 0===s&&_(\"LoopMarker\")(e,t,i),!1===s&&_(\"ParallelMarker\")(e,t,i),!0===s&&_(\"SequentialMarker\")(e,t,i))}this._drawPath=v}s()(Wi,pt),Wi.$inject=[\"config.bpmnRenderer\",\"eventBus\",\"styles\",\"pathMap\",\"canvas\",\"textRenderer\"],Wi.prototype.canRender=function(e){return Mi(e,\"bpmn:BaseElement\")},Wi.prototype.drawShape=function(e,t){var n=t.type;return(0,this.handlers[n])(e,t)},Wi.prototype.drawConnection=function(e,t){var n=t.type;return(0,this.handlers[n])(e,t)},Wi.prototype.getShapePath=function(e){return Mi(e,\"bpmn:Event\")?(n=(t=e).x+t.width/2,i=t.y+t.height/2,o=t.width/2,lt([[\"M\",n,i],[\"m\",0,-o],[\"a\",o,o,0,1,1,0,2*o],[\"a\",o,o,0,1,1,0,-2*o],[\"z\"]])):Mi(e,\"bpmn:Activity\")?function(e,t){var n=e.x,i=e.y,o=e.width,r=e.height;return lt([[\"M\",n+t,i],[\"l\",o-2*t,0],[\"a\",t,t,0,0,1,t,t],[\"l\",0,r-2*t],[\"a\",t,t,0,0,1,-t,t],[\"l\",2*t-o,0],[\"a\",t,t,0,0,1,-t,-t],[\"l\",0,2*t-r],[\"a\",t,t,0,0,1,t,-t],[\"z\"]])}(e,Fi):Mi(e,\"bpmn:Gateway\")?function(e){var t=e.width/2,n=e.height/2;return lt([[\"M\",e.x+t,e.y],[\"l\",t,n],[\"l\",-t,n],[\"l\",-t,-n],[\"z\"]])}(e):function(e){var t=e.x,n=e.y,i=e.width;return lt([[\"M\",t,n],[\"l\",i,0],[\"l\",0,e.height],[\"l\",-i,0],[\"z\"]])}(e);var t,n,i,o};var Gi=0,qi={width:150,height:50};function Ui(e,t){var n;t.textContent=e;try{var i,o=\"\"===e;return t.textContent=o?\"dummy\":e,i={width:(n=t.getBBox()).width+2*n.x,height:n.height},o&&(i.width=0),i}catch(e){return{width:0,height:0}}}function Ki(e,t,n){for(var i,o=e.shift(),r=o;;){if((i=Ui(r,n)).width=r?i.width:0,\" \"===r||\"\"===r||i.width<Math.round(t)||r.length<2)return Yi(e,r,o,i);r=Xi(r,i.width,t)}}function Yi(e,t,n,i){if(t.length<n.length){var o=n.slice(t.length).trim();e.unshift(o)}return{width:i.width,height:i.height,text:t}}function Xi(e,t,n){var i=Math.max(e.length*(n/t),1),o=function(e,t){var n,i=e.split(/(\\s|-)/g),o=[],r=0;if(i.length>1)for(;n=i.shift();){if(!(n.length+r<t)){\"-\"===n&&o.pop();break}o.push(n),r+=n.length}return o.join(\"\")}(e,i);return o||(o=e.slice(0,Math.max(Math.round(i-1),1))),o}function Zi(e){this._config=W({},{size:qi,padding:Gi,style:{},align:\"center-top\"},e||{})}Zi.prototype.createText=function(e,t){return this.layoutText(e,t).element},Zi.prototype.getDimensions=function(e,t){return this.layoutText(e,t).dimensions},Zi.prototype.layoutText=function(e,t){var n=W({},this._config.size,t.box),i=W({},this._config.style,t.style),o=function(e){var t=e.split(\"-\");return{horizontal:t[0]||\"center\",vertical:t[1]||\"top\"}}(t.align||this._config.align),r=function(e){return y(e)?W({top:0,left:0,right:0,bottom:0},e):{top:e,left:e,right:e,bottom:e}}(void 0!==t.padding?t.padding:this._config.padding),a=t.fitBox||!1,s=function(e){if(\"fontSize\"in e&&\"lineHeight\"in e)return e.lineHeight*parseInt(e.fontSize,10)}(i),c=e.split(/\\r?\\n/g),p=[],l=n.width-r.left-r.right,u=Ie(\"text\");for(Ce(u,{x:0,y:0}),Ce(u,i),we(function(){var e=document.getElementById(\"helper-svg\");return e||(Ce(e=Ie(\"svg\"),{id:\"helper-svg\",width:0,height:0,style:\"visibility: hidden; position: fixed\"}),document.body.appendChild(e)),e}(),u);c.length;)p.push(Ki(c,l,u));\"middle\"===o.vertical&&(r.top=r.bottom=0);var h=C(p,function(e,t,n){return e+(s||t.height)},0)+r.top+r.bottom,d=C(p,function(e,t,n){return t.width>e?t.width:e},0),m=r.top;\"middle\"===o.vertical&&(m+=(n.height-h)/2),m-=(s||p[0].height)/4;var f=Ie(\"text\");return Ce(f,i),S(p,function(e){var t;switch(m+=s||e.height,o.horizontal){case\"left\":t=r.left;break;case\"right\":t=(a?d:l)-r.right-e.width;break;default:t=Math.max(((a?d:l)-e.width)/2+r.left,0)}var n=Ie(\"tspan\");Ce(n,{x:t,y:m}),n.textContent=e.text,we(f,n)}),Ne(u),{dimensions:{width:d,height:h},element:f}};var Qi=12,Ji=1.2,eo=30;function to(e){var t=W({fontFamily:\"Arial, sans-serif\",fontSize:Qi,fontWeight:\"normal\",lineHeight:Ji},e&&e.defaultStyle||{}),n=parseInt(t.fontSize,10)-1,i=W({},t,{fontSize:n},e&&e.externalStyle||{}),o=new Zi({style:t});this.getExternalLabelBounds=function(e,t){var n=o.getDimensions(t,{box:{width:90,height:30,x:e.width/2+e.x,y:e.height/2+e.y},style:i});return{x:Math.round(e.x+e.width/2-n.width/2),y:Math.round(e.y),width:Math.ceil(n.width),height:Math.ceil(n.height)}},this.getTextAnnotationBounds=function(e,n){var i=o.getDimensions(n,{box:e,style:t,align:\"left-top\",padding:5});return{x:e.x,y:e.y,width:e.width,height:Math.max(eo,Math.round(i.height))}},this.createText=function(e,t){return o.createText(e,t||{})},this.getDefaultStyle=function(){return t},this.getExternalStyle=function(){return i}}to.$inject=[\"config.textRenderer\"];var no=/\\{([^}]+)\\}/g,io=/(?:(?:^|\\.)(.+?)(?=\\[|\\.|$|\\()|\\[('|\")(.+?)\\2\\])(\\(\\))?/g;var oo={__init__:[\"bpmnRenderer\"],bpmnRenderer:[\"type\",Wi],textRenderer:[\"type\",to],pathMap:[\"type\",function(){this.pathMap={EVENT_MESSAGE:{d:\"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}\",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:\"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z\",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:\"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z\",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:\"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 \",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:\"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z\",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:\"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z\",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:\"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z\",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:\"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z\",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:\"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} \",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:\"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} \",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:\"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z\",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:\"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z\",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:\"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z\",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:\"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z\",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:\"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z\",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:\"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z\",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:\"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0\",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:\"m {mx}, {my} m  0 15  l 0 -15 m  4 15  l 0 -15 m  4 15  l 0 -15 \",height:61,width:51,heightElements:[12],widthElements:[1,6,12,15]},DATA_ARROW:{d:\"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z\",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:\"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0\",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:\"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0\",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:\"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0\",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:\"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10\",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:\"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0\",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:\"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z\",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:\"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902\",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:\"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z\",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:\"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}\",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:\"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0\",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:\"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5\"},TASK_TYPE_USER_2:{d:\"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 \"},TASK_TYPE_USER_3:{d:\"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z\"},TASK_TYPE_MANUAL:{d:\"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z\"},TASK_TYPE_INSTANTIATING_SEND:{d:\"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6\"},TASK_TYPE_SERVICE:{d:\"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z\"},TASK_TYPE_SERVICE_FILL:{d:\"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z\"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:\"m {mx},{my} 0,4 20,0 0,-4 z\"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:\"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8\"},MESSAGE_FLOW_MARKER:{d:\"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6\"}},this.getRawPath=function(e){return this.pathMap[e].d},this.getScaledPath=function(e,t){var n,i,o=this.pathMap[e];t.abspos?(n=t.abspos.x,i=t.abspos.y):(n=t.containerWidth*t.position.mx,i=t.containerHeight*t.position.my);var r,a,s={};if(t.position){for(var c=t.containerHeight/o.height*t.yScaleFactor,p=t.containerWidth/o.width*t.xScaleFactor,l=0;l<o.heightElements.length;l++)s[\"y\"+l]=o.heightElements[l]*c;for(var u=0;u<o.widthElements.length;u++)s[\"x\"+u]=o.widthElements[u]*p}return r=o.d,a={mx:n,my:i,e:s},String(r).replace(no,function(e,t){return function(e,t,n){var i=n;return t.replace(io,function(e,t,n,o,r){t=t||o,i&&(t in i&&(i=i[t]),\"function\"==typeof i&&r&&(i=i()))}),i=(null==i||i==n?e:i)+\"\"}(e,t,a)})}}]};var ro={translate:[\"value\",function(e,t){return t=t||{},e.replace(/{([^}]+)}/g,function(e,n){return t[n]||\"{\"+n+\"}\"})}]},ao={width:90,height:20},so=15;function co(e){return Mi(e,\"bpmn:Event\")||Mi(e,\"bpmn:Gateway\")||Mi(e,\"bpmn:DataStoreReference\")||Mi(e,\"bpmn:DataObjectReference\")||Mi(e,\"bpmn:SequenceFlow\")||Mi(e,\"bpmn:MessageFlow\")}function po(e){return ho(e.label)}function lo(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)],o=function(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)];return{x:n.x+(i.x-n.x)/2,y:n.y+(i.y-n.y)/2}}(e),r=Math.atan((i.y-n.y)/(i.x-n.x)),a=o.x,s=o.y;return Math.abs(r)<Math.PI/2?s-=so:a+=so,{x:a,y:s}}function uo(e){return e.waypoints?lo(e.waypoints):{x:e.x+e.width/2,y:e.y+e.height+ao.height/2}}function ho(e){return e&&e.labelTarget}function mo(e,t){return e&&t?Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)):-1}function fo(e,t,n,i){if(void 0===i&&(i=5),!e||!t||!n)return!1;var o=(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x),r=mo(e,t);return Math.abs(o/r)<=i}var yo=2;function go(e,t){return Math.abs(e.x-t.x)<=yo?\"h\":Math.abs(e.y-t.y)<=yo&&\"v\"}function vo(e,t,n){return n=n||0,e.x>t.x-n&&e.y>t.y-n&&e.x<t.x+t.width+n&&e.y<t.y+t.height+n}function bo(e,t){return{x:Math.round(e.x+(t.x-e.x)/2),y:Math.round(e.y+(t.y-e.y)/2)}}var xo=n(4),_o=n.n(xo);function wo(e){return{x:Math.round(e.x),y:Math.round(e.y),width:Math.round(e.width),height:Math.round(e.height)}}function Eo(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function So(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function Po(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}function Co(e){return Eo({x:e.x+(e.width||0)/2,y:e.y+(e.height||0)/2})}function To(e,t,n){y(n=n||0)||(n={x:n,y:n});var i=So(e),o=So(t),r=i.bottom+n.y<=o.top,a=i.left-n.x>=o.right,s=i.top-n.y>=o.bottom,c=r?\"top\":s?\"bottom\":null,p=i.right+n.x<=o.left?\"left\":a?\"right\":null;return p&&c?c+\"-\"+p:p||c||\"intersect\"}function Ro(e,t,n){var i,o,r=(i=e,o=t,_o()(i,o));return 1===r.length?Eo(r[0]):2===r.length&&mo(r[0],r[1])<1?Eo(r[0]):r.length>1?Eo((r=O(r,function(e){var t=Math.floor(100*e.t2)||1;return t=((t=100-t)<10?\"0\":\"\")+t,e.segment2+\"#\"+t}))[n?0:r.length-1]):null}function Mo(e,t){return W({id:e.id,type:e.$type,businessObject:e},t)}function Ao(e,t,n,i){return new Error(e(\"element {element} referenced by {referenced}#{property} not yet drawn\",{element:Pi(n),referenced:Pi(t),property:i}))}function ko(e,t,n,i,o,r){this._eventBus=e,this._canvas=t,this._elementFactory=n,this._elementRegistry=i,this._translate=o,this._textRenderer=r}ko.$inject=[\"eventBus\",\"canvas\",\"elementFactory\",\"elementRegistry\",\"translate\",\"textRenderer\"],ko.prototype.add=function(e,t){var n,i,o,r,a,s,c,p,l=e.di,u=this._translate;if(Mi(l,\"bpmndi:BPMNPlane\"))n=this._elementFactory.createRoot(Mo(e)),this._canvas.setRootElement(n);else if(Mi(l,\"bpmndi:BPMNShape\")){var h=!ki(e);i=t&&(t.hidden||t.collapsed);var d=e.di.bounds;n=this._elementFactory.createShape(Mo(e,{collapsed:h,hidden:i,x:Math.round(d.x),y:Math.round(d.y),width:Math.round(d.width),height:Math.round(d.height)})),Mi(e,\"bpmn:BoundaryEvent\")&&this._attachBoundary(e,n),Mi(e,\"bpmn:Lane\")&&(o=0),Mi(e,\"bpmn:DataStoreReference\")&&(a=t,s=Co(d),c=s.x,p=s.y,c>=a.x&&c<=a.x+a.width&&p>=a.y&&p<=a.y+a.height||(t=this._canvas.getRootElement())),this._canvas.addShape(n,t,o)}else{if(!Mi(l,\"bpmndi:BPMNEdge\"))throw new Error(u(\"unknown di {di} for element {semantic}\",{di:Pi(l),semantic:Pi(e)}));var m=this._getSource(e),f=this._getTarget(e);i=t&&(t.hidden||t.collapsed),n=this._elementFactory.createConnection(Mo(e,{hidden:i,source:m,target:f,waypoints:(r=e.di.waypoint,M(r,function(e){return{x:e.x,y:e.y}}))})),Mi(e,\"bpmn:DataAssociation\")&&(t=null),Mi(e,\"bpmn:SequenceFlow\")&&(o=0),this._canvas.addConnection(n,t,o)}return co(e)&&e.name&&this.addLabel(e,n),this._eventBus.fire(\"bpmnElement.added\",{element:n}),n},ko.prototype._attachBoundary=function(e,t){var n=this._translate,i=e.attachedToRef;if(!i)throw new Error(n(\"missing {semantic}#attachedToRef\",{semantic:Pi(e)}));var o=this._elementRegistry.get(i.id),r=o&&o.attachers;if(!o)throw Ao(n,e,i,\"attachedToRef\");t.host=o,r||(o.attachers=r=[]),-1===r.indexOf(t)&&r.push(t)},ko.prototype.addLabel=function(e,t){var n,i,o;return n=function(e,t){var n,i,o,r=e.di.label;return r&&r.bounds?(o=r.bounds,i={width:Math.max(ao.width,o.width),height:o.height},n={x:o.x+o.width/2,y:o.y+o.height/2}):(n=uo(t),i=ao),W({x:n.x-i.width/2,y:n.y-i.height/2},i)}(e,t),(i=e.name)&&(n=this._textRenderer.getExternalLabelBounds(n,i)),o=this._elementFactory.createLabel(Mo(e,{id:e.id+\"_label\",labelTarget:t,type:\"label\",hidden:t.hidden||!e.name,x:Math.round(n.x),y:Math.round(n.y),width:Math.round(n.width),height:Math.round(n.height)})),this._canvas.addShape(o,t.parent)},ko.prototype._getEnd=function(e,t){var n,i,o=e.$type,r=this._translate;if(i=e[t+\"Ref\"],\"source\"===t&&\"bpmn:DataInputAssociation\"===o&&(i=i&&i[0]),(\"source\"===t&&\"bpmn:DataOutputAssociation\"===o||\"target\"===t&&\"bpmn:DataInputAssociation\"===o)&&(i=e.$parent),n=i&&this._getElement(i))return n;throw i?Ao(r,e,i,t+\"Ref\"):new Error(r(\"{semantic}#{side} Ref not specified\",{semantic:Pi(e),side:t}))},ko.prototype._getSource=function(e){return this._getEnd(e,\"source\")},ko.prototype._getTarget=function(e){return this._getEnd(e,\"target\")},ko.prototype._getElement=function(e){return this._elementRegistry.get(e.id)};var Bo={__depends__:[oo,{__depends__:[ro],bpmnImporter:[\"type\",ko]}]};function No(e){e&&\"function\"==typeof e.stopPropagation&&e.stopPropagation()}function Do(e){return e.originalEvent||e.srcEvent}function Oo(e,t){No(e),No(Do(e))}function Lo(e){return e.pointers&&e.pointers.length&&(e=e.pointers[0]),e.touches&&e.touches.length&&(e=e.touches[0]),e?{x:e.clientX,y:e.clientY}:null}function jo(e){return!(Do(e)||e).button}function Io(e){var t=Do(e)||e;return!!jo(e)&&(/mac/i.test(navigator.platform)?t.metaKey:t.ctrlKey)}function zo(e){return!0}var Fo=500;function $o(e,t,n){var i=n.cls(\"djs-hit\",[\"no-fill\",\"no-border\"],{stroke:\"white\",strokeWidth:15});function o(n,i,o){var r,a;(function(e,t){return!(c[e]||jo)(t)})(n,i)||(o?a=t.getGraphics(o):(r=i.delegateTarget||i.target)&&(a=r,o=t.get(a)),a&&o&&!1===e.fire(n,{element:o,gfx:a,originalEvent:i})&&(i.stopPropagation(),i.preventDefault()))}var r={};function a(e){return r[e]}var s={mouseover:\"element.hover\",mouseout:\"element.out\",click:\"element.click\",dblclick:\"element.dblclick\",mousedown:\"element.mousedown\",mouseup:\"element.mouseup\",contextmenu:\"element.contextmenu\"},c={\"element.contextmenu\":zo};var p=\"svg, .djs-element\";function l(e,t,n,i){var a=r[n]=function(e){o(n,e)};i&&(c[n]=i),a.$delegate=le.bind(e,p,t,a)}function u(e,t,n){var i=a(n);i&&le.unbind(e,t,i.$delegate)}e.on(\"canvas.destroy\",function(e){var t;t=e.svg,S(s,function(e,n){u(t,n,e)})}),e.on(\"canvas.init\",function(e){var t;t=e.svg,S(s,function(e,n){l(t,n,e)})}),e.on([\"shape.added\",\"connection.added\"],function(e){var t,n=e.element,o=e.gfx;n.waypoints?t=ht(n.waypoints):Ce(t=Ie(\"rect\"),{x:0,y:0,width:n.width,height:n.height}),Ce(t,i),we(o,t)}),e.on(\"shape.changed\",Fo,function(e){var t=e.element;Ce(ge(\".djs-hit\",e.gfx),{width:t.width,height:t.height})}),e.on(\"connection.changed\",function(e){var t=e.element;!function(e,t){Ce(e,{points:ut(t)})}(ge(\".djs-hit\",e.gfx),t.waypoints)}),this.fire=o,this.triggerMouseEvent=function(e,t,n){var i=s[e];if(!i)throw new Error(\"unmapped DOM event name <\"+e+\">\");return o(i,t,n)},this.mouseHandler=a,this.registerEvent=l,this.unregisterEvent=u}$o.$inject=[\"eventBus\",\"elementRegistry\",\"styles\"];var Vo={__init__:[\"interactionEvents\"],interactionEvents:[\"type\",$o]},Ho=500;function Wo(e,t,n){this.offset=6;var i=t.cls(\"djs-outline\",[\"no-fill\"]),o=this;function r(e,t){var n=Ie(\"rect\");return Ce(n,W({x:10,y:10,width:100,height:100},i)),we(e,n),n}e.on([\"shape.added\",\"shape.changed\"],Ho,function(e){var t=e.element,n=e.gfx,i=ge(\".djs-outline\",n);i||(i=r(n)),o.updateShapeOutline(i,t)}),e.on([\"connection.added\",\"connection.changed\"],function(e){var t=e.element,n=e.gfx,i=ge(\".djs-outline\",n);i||(i=r(n)),o.updateConnectionOutline(i,t)})}Wo.prototype.updateShapeOutline=function(e,t){Ce(e,{x:-this.offset,y:-this.offset,width:t.width+2*this.offset,height:t.height+2*this.offset})},Wo.prototype.updateConnectionOutline=function(e,t){var n=Et(t);Ce(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+2*this.offset,height:n.height+2*this.offset})},Wo.$inject=[\"eventBus\",\"styles\",\"elementRegistry\"];var Go={__init__:[\"outline\"],outline:[\"type\",Wo]};function qo(e){this._eventBus=e,this._selectedElements=[];var t=this;e.on([\"shape.remove\",\"connection.remove\"],function(e){var n=e.element;t.deselect(n)}),e.on([\"diagram.clear\"],function(e){t.select(null)})}qo.$inject=[\"eventBus\"],qo.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(-1!==n){var i=t.slice();t.splice(n,1),this._eventBus.fire(\"selection.changed\",{oldSelection:i,newSelection:t})}},qo.prototype.get=function(){return this._selectedElements},qo.prototype.isSelected=function(e){return-1!==this._selectedElements.indexOf(e)},qo.prototype.select=function(e,t){var n=this._selectedElements,i=n.slice();f(e)||(e=e?[e]:[]),t?S(e,function(e){-1===n.indexOf(e)&&n.push(e)}):this._selectedElements=n=e.slice(),this._eventBus.fire(\"selection.changed\",{oldSelection:i,newSelection:n})};var Uo=\"hover\",Ko=\"selected\";function Yo(e,t,n,i){function o(e,n){t.addMarker(e,n)}function r(e,n){t.removeMarker(e,n)}this._multiSelectionBox=null,e.on(\"element.hover\",function(e){o(e.element,Uo)}),e.on(\"element.out\",function(e){r(e.element,Uo)}),e.on(\"selection.changed\",function(e){var t=e.oldSelection,n=e.newSelection;S(t,function(e){-1===n.indexOf(e)&&r(e,Ko)}),S(n,function(e){-1===t.indexOf(e)&&o(e,Ko)})})}function Xo(e,t,n,i){e.on(\"create.end\",500,function(e){e.context.canExecute&&t.select(e.context.shape)}),e.on(\"connect.end\",500,function(e){e.context.canExecute&&e.context.target&&t.select(e.context.target)}),e.on(\"shape.move.end\",500,function(e){var n=e.previousSelection||[],o=i.get(e.context.shape.id);_(n,function(e){return o.id===e.id})||t.select(o)}),e.on(\"element.click\",function(e){var i=e.element;i===n.getRootElement()&&(i=null);var o=t.isSelected(i),r=t.get().length>1,a=Io(e);if(o&&r)return a?t.deselect(i):t.select(i);o?t.deselect(i):t.select(i,a)})}Yo.$inject=[\"eventBus\",\"canvas\",\"selection\",\"styles\"],Xo.$inject=[\"eventBus\",\"selection\",\"canvas\",\"elementRegistry\"];var Zo={__init__:[\"selectionVisuals\",\"selectionBehavior\"],__depends__:[Vo,Go],selection:[\"type\",qo],selectionVisuals:[\"type\",Yo],selectionBehavior:[\"type\",Xo]};function Qo(e){this._counter=0,this._prefix=(e?e+\"-\":\"\")+Math.floor(1e9*Math.random())+\"-\"}Qo.prototype.next=function(){return this._prefix+ ++this._counter};var Jo=new Qo(\"ov\");function er(e,t,n,i){var o,r;this._eventBus=t,this._canvas=n,this._elementRegistry=i,this._ids=Jo,this._overlayDefaults=W({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=(o=n.getContainer(),r=ue('<div class=\"djs-overlay-container\" style=\"position: absolute; width: 0; height: 0;\" />'),o.insertBefore(r,o.firstChild),r),this._init()}function tr(e,t,n){W(e.style,{left:t+\"px\",top:n+\"px\"})}function nr(e,t){e.style.display=!1===t?\"none\":\"\"}function ir(e,t){e.style[\"transform-origin\"]=\"top left\",[\"\",\"-ms-\",\"-webkit-\"].forEach(function(n){e.style[n+\"transform\"]=t})}er.$inject=[\"config.overlays\",\"eventBus\",\"canvas\",\"elementRegistry\"],er.prototype.get=function(e){if(b(e)&&(e={id:e}),b(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?E(t.overlays,L({type:e.type})):t.overlays.slice():[]}return e.type?E(this._overlays,L({type:e.type})):e.id?this._overlays[e.id]:null},er.prototype.add=function(e,t,n){if(y(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error(\"must specifiy overlay position\");if(!n.html)throw new Error(\"must specifiy overlay html\");if(!e)throw new Error(\"invalid element specified\");var i=this._ids.next();return n=W({},this._overlayDefaults,n,{id:i,type:t,element:e,html:n.html}),this._addOverlay(n),i},er.prototype.remove=function(e){var t=this.get(e)||[];f(t)||(t=[t]);var n=this;S(t,function(e){var t=n._getOverlayContainer(e.element,!0);if(e&&(be(e.html),be(e.htmlContainer),delete e.htmlContainer,delete e.element,delete n._overlays[e.id]),t){var i=t.overlays.indexOf(e);-1!==i&&t.overlays.splice(i,1)}})},er.prototype.show=function(){nr(this._overlayRoot)},er.prototype.hide=function(){nr(this._overlayRoot,!1)},er.prototype.clear=function(){this._overlays={},this._overlayContainers=[],J(this._overlayRoot)},er.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,i=t.x,o=t.y;if(t.waypoints){var r=Et(t);i=r.x,o=r.y}tr(n,i,o),q(e.html,\"data-container-id\",t.id)},er.prototype._updateOverlay=function(e){var t,n,i=e.position,o=e.htmlContainer,r=e.element,a=i.left,s=i.top;void 0!==i.right&&(t=r.waypoints?Et(r).width:r.width,a=-1*i.right+t);void 0!==i.bottom&&(n=r.waypoints?Et(r).height:r.height,s=-1*i.bottom+n);tr(o,a||0,s||0)},er.prototype._createOverlayContainer=function(e){var t=ue('<div class=\"djs-overlays\" style=\"position: absolute\" />');this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n},er.prototype._updateRoot=function(e){var t=e.scale||1,n=\"matrix(\"+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(\",\")+\")\";ir(this._overlayRoot,n)},er.prototype._getOverlayContainer=function(e,t){var n=_(this._overlayContainers,function(t){return t.element===e});return n||t?n:this._createOverlayContainer(e)},er.prototype._addOverlay=function(e){var t,n,i=e.id,o=e.element,r=e.html;r.get&&r.constructor.prototype.jquery&&(r=r.get(0)),b(r)&&(r=ue(r)),n=this._getOverlayContainer(o),(t=ue('<div class=\"djs-overlay\" data-overlay-id=\"'+i+'\" style=\"position: absolute\">')).appendChild(r),e.type&&Z(t).add(\"djs-overlay-\"+e.type),e.htmlContainer=t,n.overlays.push(e),n.html.appendChild(t),this._overlays[i]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())},er.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,i=n&&n.minZoom,o=n&&n.maxZoom,r=e.htmlContainer,a=!0;n&&((m(i)&&i>t.scale||m(o)&&o<t.scale)&&(a=!1),nr(r,a)),this._updateOverlayScale(e,t)},er.prototype._updateOverlayScale=function(e,t){var n,i,o,r=e.scale,a=e.htmlContainer,s=\"\";!0!==r&&(!1===r?(n=1,i=1):(n=r.min,i=r.max),m(n)&&t.scale<n&&(o=(1/t.scale||1)*n),m(i)&&t.scale>i&&(o=(1/t.scale||1)*i)),m(o)&&(s=\"scale(\"+o+\",\"+o+\")\"),ir(a,s)},er.prototype._updateOverlaysVisibilty=function(e){var t=this;S(this._overlays,function(n){t._updateOverlayVisibilty(n,e)})},er.prototype._init=function(){var e=this._eventBus,t=this;e.on(\"canvas.viewbox.changing\",function(e){t.hide()}),e.on(\"canvas.viewbox.changed\",function(e){var n;n=e.viewbox,t._updateRoot(n),t._updateOverlaysVisibilty(n),t.show()}),e.on([\"shape.remove\",\"connection.remove\"],function(e){var n=e.element;S(t.get({element:n}),function(e){t.remove(e.id)});var i=t._getOverlayContainer(n);if(i){be(i.html);var o=t._overlayContainers.indexOf(i);-1!==o&&t._overlayContainers.splice(o,1)}}),e.on(\"element.changed\",500,function(e){var n=e.element,i=t._getOverlayContainer(n,!0);i&&(S(i.overlays,function(e){t._updateOverlay(e)}),t._updateOverlayContainer(i))}),e.on(\"element.marker.update\",function(e){var n=t._getOverlayContainer(e.element,!0);n&&Z(n.html)[e.add?\"add\":\"remove\"](e.marker)}),e.on(\"diagram.clear\",this.clear,this)};var or={__init__:[\"overlays\"],overlays:[\"type\",er]},rr='<img width=\"52\" height=\"52\" src=\"'+(\"data:image/svg+xml,\"+encodeURIComponent('<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 960 960\"><path fill=\"#fff\" d=\"M960 60v839c0 33-27 61-60 61H60c-33 0-60-27-60-60V60C0 27 27 0 60 0h839c34 0 61 27 61 60z\"/><path fill=\"#52b415\" d=\"M217 548a205 205 0 0 0-144 58 202 202 0 0 0-4 286 202 202 0 0 0 285 3 200 200 0 0 0 48-219 203 203 0 0 0-185-128zM752 6a206 206 0 0 0-192 285 206 206 0 0 0 269 111 207 207 0 0 0 111-260A204 204 0 0 0 752 6zM62 0A62 62 0 0 0 0 62v398l60 46a259 259 0 0 1 89-36c5-28 10-57 14-85l99 2 12 85a246 246 0 0 1 88 38l70-52 69 71-52 68c17 30 29 58 35 90l86 14-2 100-86 12a240 240 0 0 1-38 89l43 58h413c37 0 60-27 60-61V407a220 220 0 0 1-44 40l21 85-93 39-45-76a258 258 0 0 1-98 1l-45 76-94-39 22-85a298 298 0 0 1-70-69l-86 22-38-94 76-45a258 258 0 0 1-1-98l-76-45 40-94 85 22a271 271 0 0 1 41-47z\"/></svg>'))+'\" />';function ar(e){return e.join(\";\")}var sr,cr='<div class=\"bjs-powered-by-lightbox\" style=\"'+ar([\"z-index: 1001\",\"position: fixed\",\"top: 0\",\"left: 0\",\"right: 0\",\"bottom: 0\"])+'\"><div class=\"backdrop\" style=\"'+ar([\"width: 100%\",\"height: 100%\",\"background: rgba(0,0,0,0.2)\"])+'\"></div><div class=\"notice\" style=\"'+ar([\"position: absolute\",\"left: 50%\",\"top: 40%\",\"margin: 0 -130px\",\"width: 260px\",\"padding: 10px\",\"background: white\",\"border: solid 1px #AAA\",\"border-radius: 3px\",\"font-family: Helvetica, Arial, sans-serif\",\"font-size: 14px\",\"line-height: 1.2em\"])+'\"><a href=\"http://bpmn.io\" target=\"_blank\" style=\"float: left; margin-right: 10px\">'+rr+'</a>Web-based tooling for BPMN, DMN and CMMN diagrams powered by <a href=\"http://bpmn.io\" target=\"_blank\">bpmn.io</a>.</div></div>';var pr={width:\"100%\",height:\"100%\",position:\"relative\"};function lr(e){return e+(g(e)?\"px\":\"\")}function ur(e){var t,n;e=W({},pr,e),this._moddle=this._createModdle(e),this._container=this._createContainer(e),t=this._container,n=ue('<a href=\"http://bpmn.io\" target=\"_blank\" class=\"bjs-powered-by\" title=\"Powered by bpmn.io\" style=\"position: absolute; bottom: 15px; right: 15px; z-index: 100\">'+rr+\"</a>\"),t.appendChild(n),ce.bind(n,\"click\",function(e){sr||(sr=ue(cr),le.bind(sr,\".backdrop\",\"click\",function(e){document.body.removeChild(sr)})),document.body.appendChild(sr),e.preventDefault()}),this._init(this._container,this._moddle,e)}function hr(e){return!e.altKey&&(e.ctrlKey||e.metaKey)}function dr(e,t){return(e=f(e)?e:[e]).indexOf(t.key)>-1}function mr(e){return e.shiftKey}s()(ur,rn),ur.prototype.importXML=function(e,t){t=t||function(){};var n=this;e=this._emit(\"import.parse.start\",{xml:e})||e,this._moddle.fromXML(e,\"bpmn:Definitions\",function(e,i,o){i=n._emit(\"import.parse.complete\",{error:e,definitions:i,context:o})||i;var r=o.warnings;if(e)return e=function(e){var t=/unparsable content <([^>]+)> detected([\\s\\S]*)$/.exec(e.message);return t&&(e.message=\"unparsable content <\"+t[1]+\"> detected; this may indicate an invalid BPMN 2.0 diagram file\"+t[2]),e}(e),n._emit(\"import.done\",{error:e,warnings:r}),t(e,r);n.importDefinitions(i,function(e,i){var o=[].concat(r,i||[]);n._emit(\"import.done\",{error:e,warnings:o}),t(e,o)})})},ur.prototype.saveXML=function(e,t){t||(t=e,e={});var n=this,i=this._definitions;if(!i)return t(new Error(\"no definitions loaded\"));i=this._emit(\"saveXML.start\",{definitions:i})||i,this._moddle.toXML(i,e,function(e,i){try{i=n._emit(\"saveXML.serialized\",{error:e,xml:i})||i,n._emit(\"saveXML.done\",{error:e,xml:i})}catch(e){console.error(\"error in saveXML life-cycle listener\",e)}t(e,i)})},ur.prototype.saveSVG=function(e,t){var n,i;t||(t=e,e={}),this._emit(\"saveSVG.start\");try{var o=this.get(\"canvas\"),r=o.getDefaultLayer(),a=ge(\"defs\",o._svg),s=Ke(r),c=a?\"<defs>\"+Ke(a)+\"</defs>\":\"\",p=r.getBBox();n='<?xml version=\"1.0\" encoding=\"utf-8\"?>\\n\\x3c!-- created with bpmn-js / http://bpmn.io --\\x3e\\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\\n<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"'+p.width+'\" height=\"'+p.height+'\" viewBox=\"'+p.x+\" \"+p.y+\" \"+p.width+\" \"+p.height+'\" version=\"1.1\">'+c+s+\"</svg>\"}catch(e){i=e}this._emit(\"saveSVG.done\",{error:i,svg:n}),t(i,n)},ur.prototype.importDefinitions=function(e,t){try{this._definitions&&this.clear(),this._definitions=e}catch(e){return t(e)}return function(e,t,n){var i,o,r,a,s=[];try{i=e.get(\"bpmnImporter\"),o=e.get(\"eventBus\"),r=e.get(\"translate\"),o.fire(\"import.render.start\",{definitions:t}),function(e){new Ri({root:function(e){return i.add(e)},element:function(e,t){return i.add(e,t)},error:function(e,t){s.push({message:e,context:t})}},r).handleDefinitions(e)}(t),o.fire(\"import.render.complete\",{error:a,warnings:s})}catch(e){a=e}n(a,s)}(this,e,t)},ur.prototype.getModules=function(){return this._modules},ur.prototype.destroy=function(){rn.prototype.destroy.call(this),be(this._container)},ur.prototype.on=function(e,t,n,i){return this.get(\"eventBus\").on(e,t,n,i)},ur.prototype.off=function(e,t){this.get(\"eventBus\").off(e,t)},ur.prototype.attachTo=function(e){if(!e)throw new Error(\"parentNode required\");this.detach(),e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),\"string\"==typeof e&&(e=ge(e)),e.appendChild(this._container),this._emit(\"attach\",{}),this.get(\"canvas\").resized()},ur.prototype.getDefinitions=function(){return this._definitions},ur.prototype.detach=function(){var e=this._container,t=e.parentNode;t&&(this._emit(\"detach\",{}),t.removeChild(e))},ur.prototype._init=function(e,t,n){var i,o,r=n.modules||this.getModules(),a=n.additionalModules||[],s=[].concat([{bpmnjs:[\"value\",this],moddle:[\"value\",t]}],r,a),c=W((i=[\"additionalModules\"],o={},S(Object(n),function(e,t){-1===i.indexOf(t)&&(o[t]=e)}),o),{canvas:W({},n.canvas,{container:e}),modules:s});rn.call(this,c),n&&n.container&&this.attachTo(n.container)},ur.prototype._emit=function(e,t){return this.get(\"eventBus\").fire(e,t)},ur.prototype._createContainer=function(e){var t=ue('<div class=\"bjs-container\"></div>');return W(t.style,{width:lr(e.width),height:lr(e.height),position:e.position}),t},ur.prototype._createModdle=function(e){var t=W({},this._moddleExtensions,e.moddleExtensions);return new Si(t)},ur.prototype._modules=[Bo,ro,Zo,or],ur.prototype._moddleExtensions={};function fr(e,t){var n=this;this._config=e||{},this._eventBus=t,this._keyHandler=this._keyHandler.bind(this),t.on(\"diagram.destroy\",function(){n._fire(\"destroy\"),n.unbind()}),t.on(\"diagram.init\",function(){n._fire(\"init\")}),t.on(\"attach\",function(){e&&e.bindTo&&n.bind(e.bindTo)}),t.on(\"detach\",function(){n.unbind()})}fr.$inject=[\"config.keyboard\",\"eventBus\"],fr.prototype._keyHandler=function(e){if(!function(e){return e&&(ye(e,\"input, textarea\")||\"true\"===e.contentEditable)}(e.target)){var t={keyEvent:e};this._eventBus.fire(\"keyboard.keydown\",t)&&e.preventDefault()}},fr.prototype.bind=function(e){this.unbind(),this._node=e,ce.bind(e,\"keydown\",this._keyHandler,!0),this._fire(\"bind\")},fr.prototype.getBinding=function(){return this._node},fr.prototype.unbind=function(){var e=this._node;e&&(this._fire(\"unbind\"),ce.unbind(e,\"keydown\",this._keyHandler,!0)),this._node=null},fr.prototype._fire=function(e){this._eventBus.fire(\"keyboard.\"+e,{node:this._node})},fr.prototype.addListener=function(e,t){v(e)&&(t=e,e=1e3),this._eventBus.on(\"keyboard.keydown\",e,t)},fr.prototype.hasModifier=function(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey},fr.prototype.isCmd=hr,fr.prototype.isShift=mr,fr.prototype.isKey=dr;var yr=500;function gr(e,t){var n=this;e.on(\"editorActions.init\",yr,function(e){var i=e.editorActions;n.registerBindings(t,i)})}gr.$inject=[\"eventBus\",\"keyboard\"],gr.prototype.registerBindings=function(e,t){function n(n,i){t.isRegistered(n)&&e.addListener(i)}n(\"undo\",function(e){var n=e.keyEvent;if(hr(n)&&!mr(n)&&dr([\"z\",\"Z\"],n))return t.trigger(\"undo\"),!0}),n(\"redo\",function(e){var n=e.keyEvent;if(hr(n)&&(dr([\"y\",\"Y\"],n)||dr([\"z\",\"Z\"],n)&&mr(n)))return t.trigger(\"redo\"),!0}),n(\"copy\",function(e){var n=e.keyEvent;if(hr(n)&&dr([\"c\",\"C\"],n))return t.trigger(\"copy\"),!0}),n(\"paste\",function(e){var n=e.keyEvent;if(hr(n)&&dr([\"v\",\"V\"],n))return t.trigger(\"paste\"),!0}),n(\"stepZoom\",function(e){var n=e.keyEvent;if(dr([\"+\",\"Add\"],n)&&hr(n))return t.trigger(\"stepZoom\",{value:1}),!0}),n(\"stepZoom\",function(e){var n=e.keyEvent;if(dr([\"-\",\"Subtract\"],n)&&hr(n))return t.trigger(\"stepZoom\",{value:-1}),!0}),n(\"zoom\",function(e){var n=e.keyEvent;if(dr(\"0\",n)&&hr(n))return t.trigger(\"zoom\",{value:1}),!0}),n(\"removeSelection\",function(e){if(dr([\"Delete\",\"Del\"],e.keyEvent))return t.trigger(\"removeSelection\"),!0})};var vr={__init__:[\"keyboard\",\"keyboardBindings\"],keyboard:[\"type\",fr],keyboardBindings:[\"type\",gr]},br={moveSpeed:50,moveSpeedAccelerated:200};function xr(e,t,n){var i=this;this._config=W({},br,e||{}),t.addListener(function(e){var n=e.keyEvent,o=i._config;if(!t.isCmd(n))return;if(t.isKey([\"ArrowLeft\",\"Left\",\"ArrowUp\",\"Up\",\"ArrowDown\",\"Down\",\"ArrowRight\",\"Right\"],n)){var r,a=t.isShift(n)?o.moveSpeedAccelerated:o.moveSpeed;switch(n.key){case\"ArrowLeft\":case\"Left\":r=\"left\";break;case\"ArrowUp\":case\"Up\":r=\"up\";break;case\"ArrowRight\":case\"Right\":r=\"right\";break;case\"ArrowDown\":case\"Down\":r=\"down\"}return i.moveCanvas({speed:a,direction:r}),!0}}),this.moveCanvas=function(e){var t=0,i=0,o=e.speed/Math.min(Math.sqrt(n.viewbox().scale),1);switch(e.direction){case\"left\":t=o;break;case\"up\":i=o;break;case\"right\":t=-o;break;case\"down\":i=-o}n.scroll({dx:t,dy:i})}}xr.$inject=[\"config.keyboardMove\",\"keyboard\",\"canvas\"];var _r={__depends__:[vr],__init__:[\"keyboardMove\"],keyboardMove:[\"type\",xr]},wr=/^djs-cursor-.*$/;function Er(e){var t=Z(document.body);t.removeMatching(wr),e&&t.add(\"djs-cursor-\"+e)}function Sr(){Er(null)}var Pr=5e3;function Cr(e,t){function n(){return!1}return t=t||\"element.click\",e.once(t,Pr,n),function(){e.off(t,n)}}function Tr(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function Rr(e,t){return{x:e.x-t.x,y:e.y-t.y}}var Mr=15;function Ar(e,t){var n;function i(i){var o,r=n.start,a=Lo(i),s=Rr(a,r);(!n.dragging&&(o=s,Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2))>Mr)&&(n.dragging=!0,Cr(e),Er(\"grab\")),n.dragging)&&(s=Rr(a,n.last||n.start),t.scroll({dx:s.x,dy:s.y}),n.last=a);i.preventDefault()}function o(e){ce.unbind(document,\"mousemove\",i),ce.unbind(document,\"mouseup\",o),n=null,Sr()}e.on(\"element.mousedown\",500,function(e){return function(e){if(oe(e.target,\".djs-draggable\"))return;if(e.button||e.ctrlKey||e.shiftKey||e.altKey)return;return n={start:Lo(e)},ce.bind(document,\"mousemove\",i),ce.bind(document,\"mouseup\",o),!0}(e.originalEvent)})}Ar.$inject=[\"eventBus\",\"canvas\"];var kr={__init__:[\"moveCanvas\"],moveCanvas:[\"type\",Ar]};function Br(e){return Math.log(e)/Math.log(10)}function Nr(e,t){var n=Br(e.min),i=Br(e.max);return(Math.abs(n)+Math.abs(i))/t}var Dr=Math.sign||function(e){return e>=0?1:-1},Or={min:.2,max:4},Lr=.75;function jr(e,t,n){e=e||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=V(this._handleWheel,this),this._totalDelta=0,this._scale=e.scale||Lr;var i=this;t.on(\"canvas.init\",function(t){i._init(!1!==e.enabled)})}jr.$inject=[\"config.zoomScroll\",\"eventBus\",\"canvas\"],jr.prototype.scroll=function(e){this._canvas.scroll(e)},jr.prototype.reset=function(){this._canvas.zoom(\"fit-viewport\")},jr.prototype.zoom=function(e,t){var n=Nr(Or,20);this._totalDelta+=e,Math.abs(this._totalDelta)>.1&&(this._zoom(e,t,n),this._totalDelta=0)},jr.prototype._handleWheel=function(e){if(!oe(e.target,\".djs-scrollable\",!0)){var t=this._container;e.preventDefault();var n,i=e.ctrlKey,o=e.shiftKey,r=-1*this._scale;if(r*=i?0===e.deltaMode?.02:.32:0===e.deltaMode?1:16,i){var a=t.getBoundingClientRect(),s={x:e.clientX-a.left,y:e.clientY-a.top};n=Math.sqrt(Math.pow(e.deltaY,2)+Math.pow(e.deltaX,2))*Dr(e.deltaY)*r,this.zoom(n,s)}else n=o?{dx:r*e.deltaY,dy:0}:{dx:r*e.deltaX,dy:r*e.deltaY},this.scroll(n)}},jr.prototype.stepZoom=function(e,t){var n=Nr(Or,10);this._zoom(e,t,n)},jr.prototype._zoom=function(e,t,n){var i=this._canvas,o=e>0?1:-1,r=Br(i.zoom()),a=Math.round(r/n)*n;a+=n*o;var s,c,p=Math.pow(10,a);i.zoom((s=Or,c=p,Math.max(s.min,Math.min(s.max,c))),t)},jr.prototype.toggle=function(e){var t=this._container,n=this._handleWheel,i=this._enabled;return void 0===e&&(e=!i),i!==e&&ce[e?\"bind\":\"unbind\"](t,\"wheel\",n,!1),this._enabled=e,e},jr.prototype._init=function(e){this.toggle(e)};var Ir={__init__:[\"zoomScroll\"],zoomScroll:[\"type\",jr]};function zr(e){ur.call(this,e)}s()(zr,ur),zr.prototype._navigationModules=[_r,kr,Ir],zr.prototype._modules=[].concat(zr.prototype._modules,zr.prototype._navigationModules);var Fr=n(2),$r=n.n(Fr),Vr=.2,Hr=4,Wr=[\"mousedown\",\"mouseup\",\"mouseover\",\"mouseout\",\"click\",\"dblclick\"];function Gr(e,t){return t.get(e,!1)}function qr(e){e.preventDefault(),e.stopPropagation(),\"function\"==typeof e.stopImmediatePropagation&&e.stopImmediatePropagation()}function Ur(e){function t(t){setTimeout(function(){S(Wr,function(t){ce.unbind(e,t,qr,!0)})},500)}ce.bind(e,\"touchstart\",function(t){S(Wr,function(t){ce.bind(e,t,qr,!0)})},!0),ce.bind(e,\"touchend\",t,!0),ce.bind(e,\"touchcancel\",t,!0);var n=new $r.a.Manager(e,{inputClass:$r.a.TouchInput,recognizers:[]}),i=new $r.a.Tap,o=new $r.a.Pan({threshold:10}),r=new $r.a.Press,a=new $r.a.Pinch,s=new $r.a.Tap({event:\"doubletap\",taps:2});return a.requireFailure(o),a.requireFailure(r),n.add([o,r,a,s,i]),n.reset=function(e){var t=this.recognizers,i=this.session;i.stopped||(n.stop(e),setTimeout(function(){var e,n;for(e=0;n=t[e];e++)n.reset(),n.state=8;i.curRecognizer=null},0))},n.on(\"hammer.input\",function(e){e.srcEvent.defaultPrevented&&n.reset(!0)}),n}function Kr(e,t,n,i,o){var r,a=Gr(\"dragging\",e),s=Gr(\"move\",e),c=Gr(\"contextPad\",e),p=Gr(\"palette\",e);function l(e){return function(t){o.fire(e,t)}}function u(e){return oe(e,\"svg, .djs-element\",!0)}function h(e){function n(e){var n=u(e.target),o=n&&i.get(n);if(s&&t.getRootElement()!==o)return s.start(e,o,!0);!function(e){var n=0,i=0;function o(e){var o=e.deltaX-n,r=e.deltaY-i;t.scroll({dx:o,dy:r}),n=e.deltaX,i=e.deltaY}function a(e){r.off(\"panmove\",o),r.off(\"panend\",a),r.off(\"pancancel\",a)}r.on(\"panmove\",o),r.on(\"panend\",a),r.on(\"pancancel\",a)}()}(r=Ur(e)).on(\"doubletap\",l(\"element.dblclick\")),r.on(\"tap\",l(\"element.click\")),r.on(\"panstart\",n),r.on(\"press\",n),r.on(\"pinchstart\",function(e){var n=t.zoom(),i=e.center;function o(e){var o=1-(1-e.scale)/1.5,r=Math.max(Vr,Math.min(Hr,o*n));t.zoom(r,i),qr(e)}function a(e){r.off(\"pinchmove\",o),r.off(\"pinchend\",a),r.off(\"pinchcancel\",a),r.reset(!0)}r.on(\"pinchmove\",o),r.on(\"pinchend\",a),r.on(\"pinchcancel\",a)})}a&&n.on(\"drag.move\",function(e){var t=e.originalEvent;if(t&&!(t instanceof MouseEvent)){var n=Lo(t),o=u(document.elementFromPoint(n.x,n.y)),r=o&&i.get(o);r!==e.hover&&(e.hover&&a.out(e),r&&(a.hover({element:r,gfx:o}),e.hover=r,e.hoverGfx=o))}}),c&&n.on(\"contextPad.create\",function(e){var t=Ur(e.pad.html);t.on(\"panstart\",function(e){c.trigger(\"dragstart\",e,!0)}),t.on(\"press\",function(e){c.trigger(\"dragstart\",e,!0)}),t.on(\"tap\",function(e){c.trigger(\"click\",e)})}),p&&n.on(\"palette.create\",function(e){var t=Ur(e.container);t.on(\"panstart\",function(e){p.trigger(\"dragstart\",e,!0)}),t.on(\"press\",function(e){p.trigger(\"dragstart\",e,!0)}),t.on(\"tap\",function(e){p.trigger(\"click\",e)})}),n.on(\"canvas.init\",function(e){h(e.svg)})}function Yr(e,t){var n=this;t.on(\"canvas.init\",function(e){n.addBBoxMarker(e.svg)})}Kr.$inject=[\"injector\",\"canvas\",\"eventBus\",\"elementRegistry\",\"interactionEvents\",\"touchFix\"],Yr.$inject=[\"canvas\",\"eventBus\"],Yr.prototype.addBBoxMarker=function(e){var t={fill:\"none\",class:\"outer-bound-marker\"},n=Ie(\"rect\");Ce(n,{x:-1e4,y:1e4,width:10,height:10}),Ce(n,t),we(e,n);var i=Ie(\"rect\");Ce(i,{x:1e4,y:1e4,width:10,height:10}),Ce(i,t),we(e,i)};var Xr={__depends__:[{__depends__:[Vo],__init__:[\"touchInteractionEvents\"],touchInteractionEvents:[\"type\",Kr],touchFix:[\"type\",Yr]}]};function Zr(e){return e&&e[e.length-1]}function Qr(e){return e.y}function Jr(e){return e.x}var ea={left:Jr,center:Jr,right:function(e){return e.x+e.width},top:Qr,middle:Qr,bottom:function(e){return e.y+e.height}};function ta(e){this._modeling=e}ta.$inject=[\"modeling\"],ta.prototype._getOrientationDetails=function(e){var t=\"x\",n=\"width\";return-1!==[\"top\",\"bottom\",\"middle\"].indexOf(e)&&(t=\"y\",n=\"height\"),{axis:t,dimension:n}},ta.prototype._isType=function(e,t){return-1!==t.indexOf(e)},ta.prototype._alignmentPosition=function(e,t){var n,i,o,r=this._getOrientationDetails(e),a=r.axis,s=r.dimension,c={},p={},l=!1;if(this._isType(e,[\"left\",\"top\"]))c[e]=t[0][a];else if(this._isType(e,[\"right\",\"bottom\"]))o=Zr(t),c[e]=o[a]+o[s];else if(this._isType(e,[\"center\",\"middle\"])){if(S(t,function(e){var t=e[a]+Math.round(e[s]/2);p[t]?p[t].elements.push(e):p[t]={elements:[e],center:t}}),n=O(p,function(e){return e.elements.length>1&&(l=!0),e.elements.length}),l)return c[e]=Zr(n).center,c;i=t[0],o=Zr(t=O(t,function(e){return e[a]+e[s]})),c[e]=function(e,t){return Math.round((e[a]+t[a]+t[s])/2)}(i,o)}return c},ta.prototype.trigger=function(e,t){var n=this._modeling,i=O(E(e,function(e){return!(e.waypoints||e.host||e.labelTarget)}),ea[t]),o=this._alignmentPosition(t,i);n.alignElements(i,o)};var na={__init__:[\"alignElements\"],alignElements:[\"type\",ta]};function ia(e,t){return R(t,function(t){return Mi(e,t)})}var oa=50,ra=250,aa=10;function sa(e,t){var n,i=So(e),o=Co(e),r=function(e,t){var n=So(e);function i(e){return Mi(e,\"bpmn:SequenceFlow\")}var o=C([].concat(da(e,i).map((a=5,function(e){return{shape:e,weight:a,distanceTo:function(e){var t=So(e);return t.left-n.right}}})),ha(e,i).map(function(e){return function(t){return{shape:t,weight:e,distanceTo:function(e){var t=So(e);return n.left-t.right}}}}(1))),function(e,t){return e[t.shape.id+\"__weight_\"+t.weight]=t,e},{}),r=C(o,function(e,t){var n,i,o,r=t.shape,a=t.weight,s=t.distanceTo,c=e.fav;return(n=s(r))<0||n>ra?e:(o=e[String(n)]=e[String(n)]||{value:n,count:0},i=o.count+=1*a,(!c||c.count<i)&&(e.fav=o),e)},{});var a;return r.fav?r.fav.value:oa}(e),a=\"left\",s=80,c=30;return Mi(e,\"bpmn:BoundaryEvent\")&&-1!==(a=To(e,e.host,-25)).indexOf(\"top\")&&(c*=-1),pa(e,t,{x:i.right+r+t.width/2,y:o.y+(n=a,-1!=n.indexOf(\"top\")?-1*s:-1!=n.indexOf(\"bottom\")?s:0)},{y:{margin:c,rowSize:s}})}function ca(e,t,n){var i={x:t.x-n.width/2,y:t.y-n.height/2,width:n.width,height:n.height};return _(function(e,t){var n=ua(e);return e.host&&(n=n.concat(ua(e.host))),e.attachers&&(n=n.concat(e.attachers.reduce(function(e,t){return e.concat(ua(t))},[]))),n}(e),function(e){return e!==n&&\"intersect\"===To(e,i,aa)})}function pa(e,t,n,i){function o(e){var o={x:n.x,y:n.y};return[\"x\",\"y\"].forEach(function(a){var s=i[a];if(s){var c=\"x\"===a?\"width\":\"height\",p=s.margin,l=s.rowSize;o[a]=p<0?Math.min(e[a]+p-t[c]/2,n[a]-l+p):Math.max(r[a]+r[c]+p+t[c]/2,n[a]+l+p)}}),o}for(var r;r=ca(e,n,t);)n=o(r);return n}function la(){return!0}function ua(e,t){return[].concat(da(e,t),ha(e,t))}function ha(e,t){return t||(t=la),e.incoming.filter(t).map(function(e){return e.source})}function da(e,t){return t||(t=la),e.outgoing.filter(t).map(function(e){return e.target})}function ma(e,t){function n(t,n){return e.fire(t,n)}this.append=function(e,i){var o=n(\"autoPlace\",{source:e,shape:i});o||(o=function(e,t){if(Mi(t,\"bpmn:TextAnnotation\"))return function(e,t){var n=So(e);return pa(e,t,{x:n.right+t.width/2,y:n.top-50-t.height/2},{y:{margin:-30,rowSize:20}})}(e,t);if(ia(t,[\"bpmn:DataObjectReference\",\"bpmn:DataStoreReference\"]))return function(e,t){var n=So(e);return pa(e,t,{x:n.right-10+t.width/2,y:n.bottom+40+t.width/2},{x:{margin:30,rowSize:30}})}(e,t);if(Mi(t,\"bpmn:FlowNode\"))return sa(e,t);return function(e,t){var n=So(e),i=Co(e);return{x:n.right+oa+t.width/2,y:i.y}}(e,t)}(e,i));var r=t.appendShape(e,i,o,e.parent);return n(\"autoPlace.end\",{shape:r}),r}}function fa(e,t){e.on(\"autoPlace.end\",500,function(e){t.select(e.shape)})}ma.$inject=[\"eventBus\",\"modeling\"],fa.$inject=[\"eventBus\",\"selection\"];var ya={__init__:[\"autoPlaceSelectionBehavior\"],autoPlace:[\"type\",ma],autoPlaceSelectionBehavior:[\"type\",fa]};function ga(e){this._eventBus=e}ga.$inject=[\"eventBus\"],ga.prototype.on=function(e,t,n,i,o,r){if((v(t)||g(t))&&(r=o,o=i,i=n,n=t,t=null),v(n)&&(r=o,o=i,i=n,n=1e3),y(o)&&(r=o,o=!1),!v(i))throw new Error(\"handlerFn must be a function\");f(e)||(e=[e]);var a=this._eventBus;S(e,function(e){var s=[\"commandStack\",e,t].filter(function(e){return e}).join(\".\");a.on(s,n,o?function(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}(i,r):i,r)})};function va(e,t,n,i){ga.call(this,e),this._elementRegistry=t,this._modeling=n,this._rules=i;var o=this;this.postExecuted([\"shape.create\"],function(e){var t=e.context,n=t.hints,i=t.shape,r=t.parent||t.newParent;(!n||!1!==n.root&&!1!==n.autoResize)&&o._expand([i],r)}),this.postExecuted([\"elements.move\"],function(e){var t=e.context,n=l(k(t.closure.topLevel)),i=t.hints,r=!i||i.autoResize;!1!==r&&S(B(n,function(e){return e.parent.id}),function(e,t){f(r)&&(e=e.filter(function(e){return-1!==r.indexOf(e)})),o._expand(e,t)})}),this.postExecuted([\"shape.toggleCollapse\"],function(e){var t=e.context,n=t.hints,i=t.shape;(!n||!1!==n.root&&!1!==n.autoResize)&&(i.collapsed||o._expand(i.children||[],i))}),this.postExecuted([\"shape.resize\"],function(e){var t=e.context,n=t.hints,i=t.shape,r=i.parent;(!n||!1!==n.root&&!1!==n.autoResize)&&r&&o._expand([i],r)})}function ba(e){e.invoke(va,this)}function xa(e){ga.call(this,e),this.init()}function _a(e){xa.call(this,e);var t=this;this.addRule(\"element.autoResize\",function(e){return t.canResize(e.elements,e.target)})}function wa(e,t){_a.call(this,e),this._modeling=t}S([\"canExecute\",\"preExecute\",\"preExecuted\",\"execute\",\"executed\",\"postExecute\",\"postExecuted\",\"revert\",\"reverted\"],function(e){ga.prototype[e]=function(t,n,i,o,r){(v(t)||g(t))&&(r=o,o=i,i=n,n=t,t=null),this.on(t,e,n,i,o,r)}}),va.$inject=[\"eventBus\",\"elementRegistry\",\"modeling\",\"rules\"],s()(va,ga),va.prototype._getOptimalBounds=function(e,t){var n=this.getOffset(t),i=this.getPadding(t),o=So(Et(e)),r=So(t),a={};return o.top-r.top<i.top&&(a.top=o.top-n.top),o.left-r.left<i.left&&(a.left=o.left-n.left),r.right-o.right<i.right&&(a.right=o.right+n.right),r.bottom-o.bottom<i.bottom&&(a.bottom=o.bottom+n.bottom),Po(W({},r,a))},va.prototype._expand=function(e,t){if(\"string\"==typeof t&&(t=this._elementRegistry.get(t)),this._rules.allowed(\"element.autoResize\",{elements:e,target:t})){var n=this._getOptimalBounds(e,t);if(function(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}(n,t)){this.resize(t,n);var i=t.parent;i&&this._expand([t],i)}}},va.prototype.getOffset=function(e){return{top:60,bottom:60,left:100,right:100}},va.prototype.getPadding=function(e){return{top:2,bottom:2,left:15,right:15}},va.prototype.resize=function(e,t){this._modeling.resizeShape(e,t)},ba.$inject=[\"injector\"],s()(ba,va),ba.prototype.resize=function(e,t){Mi(e,\"bpmn:Participant\")?this._modeling.resizeLane(e,t):this._modeling.resizeShape(e,t)},xa.$inject=[\"eventBus\"],s()(xa,ga),xa.prototype.addRule=function(e,t,n){var i=this;\"string\"==typeof e&&(e=[e]),e.forEach(function(e){i.canExecute(e,t,function(e,t,i){return n(e)},!0)})},xa.prototype.init=function(){},_a.$inject=[\"eventBus\"],s()(_a,xa),_a.prototype.canResize=function(e,t){return!1},s()(wa,_a),wa.$inject=[\"eventBus\",\"modeling\"],wa.prototype.canResize=function(e,t){if(!Mi(t,\"bpmn:Participant\")&&!Mi(t,\"bpmn:Lane\")&&!Mi(t,\"bpmn:SubProcess\"))return!1;var n=!0;return S(e,function(e){(Mi(e,\"bpmn:Lane\")||e.labelTarget)&&(n=!1)}),n};var Ea={__init__:[\"bpmnAutoResize\",\"bpmnAutoResizeProvider\"],bpmnAutoResize:[\"type\",ba],bpmnAutoResizeProvider:[\"type\",wa]},Sa=Math.round,Pa=\"djs-drag-active\";function Ca(e){e.preventDefault()}function Ta(e,t,n){var i,o={threshold:5,trapClick:!0};function r(e){var n=t.viewbox(),i=t._container.getBoundingClientRect();return{x:n.x+(e.x-i.left)/n.scale,y:n.y+(e.y-i.top)/n.scale}}function a(t,n){n=n||i;var o=e.createEvent(W({},n.payload,n.data,{isTouch:n.isTouch}));return!1!==e.fire(\"drag.\"+t,o)&&e.fire(n.prefix+\".\"+t,o)}function s(e,o){var s,c=i.payload,p=i.displacement,l=i.globalStart,u=Lo(e),h=Rr(u,l),d=i.localStart,f=r(u),y=Rr(f,d);if(!i.active&&(o||(s=h,Math.sqrt(Math.pow(s.x,2)+Math.pow(s.y,2))>i.threshold))){if(W(c,{x:Sa(d.x+p.x),y:Sa(d.y+p.y),dx:0,dy:0},{originalEvent:e}),!1===a(\"start\"))return m();i.active=!0,i.keepSelection||(c.previousSelection=n.get(),n.select(null)),i.cursor&&Er(i.cursor),t.addMarker(t.getRootElement(),Pa)}Oo(e),i.active&&(W(c,{x:Sa(f.x+p.x),y:Sa(f.y+p.y),dx:Sa(y.x),dy:Sa(y.y)},{originalEvent:e}),a(\"move\"))}function c(e){var t=!0;i.active&&(e&&(i.payload.originalEvent=e,Oo(e)),t=a(\"end\")),!1===t&&a(\"rejected\"),a(\"ended\",f(!0!==t))}function p(e){27===e.which&&(Ca(e),m())}function l(t){var n;i.active&&(n=Cr(e),setTimeout(n,400),Ca(t)),c(t)}function u(e){s(e)}function h(e){var t=i.payload;t.hoverGfx=e.gfx,t.hover=e.element,a(\"hover\")}function d(e){a(\"out\");var t=i.payload;t.hoverGfx=null,t.hover=null}function m(e){var t;if(i){var n=i.active;n&&a(\"cancel\"),t=f(e),n&&a(\"canceled\",t)}}function f(o){var r,f;a(\"cleanup\"),Sr(),f=i.trapClick?l:c,ce.unbind(document,\"mousemove\",s),ce.unbind(document,\"dragstart\",Ca),ce.unbind(document,\"selectstart\",Ca),ce.unbind(document,\"mousedown\",f,!0),ce.unbind(document,\"mouseup\",f,!0),ce.unbind(document,\"keyup\",p),ce.unbind(document,\"touchstart\",u,!0),ce.unbind(document,\"touchcancel\",m,!0),ce.unbind(document,\"touchmove\",s,!0),ce.unbind(document,\"touchend\",c,!0),e.off(\"element.hover\",h),e.off(\"element.out\",d),t.removeMarker(t.getRootElement(),Pa);var y=i.payload.previousSelection;return!1!==o&&y&&!n.get().length&&n.select(y),r=i,i=null,r}e.on(\"diagram.destroy\",m),this.init=function(t,n,f,y){i&&m(!1),\"string\"==typeof n&&(y=f,f=n,n=null);var g,v,b,x,_,w=(y=W({},o,y||{})).data||{};x=y.trapClick?l:c,t?(g=Do(t)||t,v=Lo(t),Oo(t),\"dragstart\"===g.type&&Ca(g)):(g=null,v={x:0,y:0}),b=r(v),n||(n=b),_=function(e){return\"undefined\"!=typeof TouchEvent&&e instanceof TouchEvent}(g),i=W({prefix:f,data:w,payload:{},globalStart:v,displacement:Rr(n,b),localStart:b,isTouch:_},y),y.manual||(_?(ce.bind(document,\"touchstart\",u,!0),ce.bind(document,\"touchcancel\",m,!0),ce.bind(document,\"touchmove\",s,!0),ce.bind(document,\"touchend\",c,!0)):(ce.bind(document,\"mousemove\",s),ce.bind(document,\"dragstart\",Ca),ce.bind(document,\"selectstart\",Ca),ce.bind(document,\"mousedown\",x,!0),ce.bind(document,\"mouseup\",x,!0)),ce.bind(document,\"keyup\",p),e.on(\"element.hover\",h),e.on(\"element.out\",d)),a(\"init\"),y.autoActivate&&s(t,!0)},this.move=s,this.hover=h,this.out=d,this.end=c,this.cancel=m,this.context=function(){return i},this.setOptions=function(e){W(o,e)}}function Ra(e,t,n){var i=this;e.on(\"drag.start\",function(t){e.once(\"drag.move\",function(){e.once(\"drag.move\",function(e){i.ensureHover(e)})})}),this.ensureHover=function(e){if(!e.hover){var i,o,r,a=e.originalEvent;a instanceof MouseEvent&&(i=Lo(a),(r=function(e){return oe(e,\"svg, .djs-element\",!0)}(document.elementFromPoint(i.x,i.y)))&&(o=n.get(r),t.hover({element:o,gfx:r})))}}}Ta.$inject=[\"eventBus\",\"canvas\",\"selection\"],Ra.$inject=[\"eventBus\",\"dragging\",\"elementRegistry\"];var Ma={__init__:[\"hoverFix\"],__depends__:[Zo],dragging:[\"type\",Ta],hoverFix:[\"type\",Ra]};function Aa(e,t){this._eventBus=e,this._canvas=t,this._init()}Aa.$inject=[\"eventBus\",\"canvas\"],Aa.prototype.getHoverContext=function(){var e=this._canvas.viewbox();return{element:this._hoverElement,point:{x:e.x+Math.round(this._mouseX/e.scale),y:e.y+Math.round(this._mouseY/e.scale)}}},Aa.prototype._init=function(){var e=this._eventBus,t=this._canvas.getContainer();this._setMousePosition=V(this._setMousePosition,this),t.addEventListener(\"mousemove\",this._setMousePosition),e.on(\"diagram.destroy\",function(){t.removeEventListener(\"mousemove\",this._setMousePosition)},this),e.on(\"element.hover\",this._setHoverElement,this)},Aa.prototype._setHoverElement=function(e){this._hoverElement=e.element},Aa.prototype._setMousePosition=function(e){this._mouseX=e.layerX,this._mouseY=e.layerY};var ka={__init__:[\"mouseTracking\"],mouseTracking:[\"type\",Aa]};function Ba(e,t,n,i){this._canvas=n,this._mouseTracking=i,this._opts=W({scrollThresholdIn:[20,20,20,20],scrollThresholdOut:[0,0,0,0],scrollRepeatTimeout:15,scrollStep:10},e);var o=this;t.on(\"drag.move\",function(e){var t=o._toBorderPoint(e);o.startScroll(t)}),t.on([\"drag.cleanup\"],function(){o.stopScroll()})}function Na(e,t,n){return t<e&&e<n}Ba.$inject=[\"config.autoScroll\",\"eventBus\",\"canvas\",\"mouseTracking\"],Ba.prototype.startScroll=function(e){var t=this._canvas,n=this._opts,i=this,o=t.getContainer().getBoundingClientRect(),r=[e.x,e.y,o.width-e.x,o.height-e.y];this.stopScroll();for(var a=0,s=0,c=0;c<4;c++)Na(r[c],n.scrollThresholdOut[c],n.scrollThresholdIn[c])&&(0===c?a=n.scrollStep:1==c?s=n.scrollStep:2==c?a=-n.scrollStep:3==c&&(s=-n.scrollStep));0===a&&0===s||(t.scroll({dx:a,dy:s}),this._scrolling=setTimeout(function(){i.startScroll(e)},n.scrollRepeatTimeout))},Ba.prototype.stopScroll=function(){clearTimeout(this._scrolling)},Ba.prototype.setOptions=function(e){this._opts=W({},this._opts,e)},Ba.prototype._toBorderPoint=function(e){var t=this._canvas._container.getBoundingClientRect(),n=Lo(e.originalEvent);return{x:n.x-t.left,y:n.y-t.top}};var Da={__depends__:[Ma,ka],__init__:[\"autoScroll\"],autoScroll:[\"type\",Ba]};function Oa(e){this._commandStack=e.get(\"commandStack\",!1)}Oa.$inject=[\"injector\"],Oa.prototype.allowed=function(e,t){var n=!0,i=this._commandStack;return i&&(n=i.canExecute(e,t)),void 0===n||n};var La={__init__:[\"rules\"],rules:[\"type\",Oa]},ja=\"djs-bendpoint\",Ia=\"djs-segment-dragger\";function za(e,t){var n=Ie(\"g\");ke(n).add(ja),we(e,n);var i=Ie(\"circle\");Ce(i,{cx:0,cy:0,r:4}),ke(i).add(\"djs-visual\"),we(n,i);var o=Ie(\"circle\");return Ce(o,{cx:0,cy:0,r:10}),ke(o).add(\"djs-hit\"),we(n,o),t&&ke(n).add(t),n}function Fa(e,t,n){var i=Ie(\"g\"),o=bo(t,n),r=go(t,n);return we(e,i),function(e,t,n){var i=Ie(\"g\");we(e,i);var o=Ie(\"rect\");Ce(o,{x:-7,y:-1.5,width:14,height:3}),ke(o).add(\"djs-visual\"),we(i,o);var r=Ie(\"rect\");Ce(r,{x:-10,y:-4.5,width:20,height:9}),ke(r).add(\"djs-hit\"),we(i,r),Jt(i,\"h\"===n?90:0)}(i,0,r),ke(i).add(Ia),ke(i).add(\"h\"===r?\"vertical\":\"horizontal\"),Qt(i,o.x,o.y),i}var $a=n(3),Va=n.n($a),Ha=Math.round,Wa=Math.max;var Ga=10;function qa(e,t){return function(e,t){var n,i;for(n=0;i=e[n];n++)if(mo(i,t)<=Ga)return{point:e[n],bendpoint:!0,index:n};return null}(e,t)||function(e,t){var n,i,o,r,a=_o()((o=Ga,[[\"M\",(i=t).x,i.y],[\"m\",0,-o],[\"a\",o,o,0,1,1,0,2*o],[\"a\",o,o,0,1,1,0,-2*o],[\"z\"]]),(n=[],e.forEach(function(e,t){n.push([0===t?\"M\":\"L\",e.x,e.y])}),n)),s=a[0],c=a[a.length-1];return s?s!==c?s.segment2!==c.segment2?{point:e[r=Wa(s.segment2,c.segment2)-1],bendpoint:!0,index:r}:{point:{x:Ha(s.x+c.x)/2,y:Ha(s.y+c.y)/2},index:s.segment2}:{point:{x:Ha(s.x),y:Ha(s.y)},index:s.segment2}:null}(e,t)}function Ua(e,t,n,i,o){function r(e,n){return qa(e,function(e,t){var n,i=Lo(t),o=e._container.getBoundingClientRect();n={x:o.left,y:o.top};var r=e.viewbox();return{x:r.x+(i.x-n.x)/r.scale,y:r.y+(i.y-n.y)/r.scale}}(t,n))}function a(e,t){var n=t.waypoints,a=r(n,e);if(a)return!function(e,t,n){var i,o,r,a,s,c,p=e.index,l=e.point;return!(p<=0||e.bendpoint)&&(r=bo(i=t[p-1],o=t[p]),a=go(i,o),s=Math.abs(l.x-r.x),c=Math.abs(l.y-r.y),a&&s<=n&&c<=n)}(a,n,10)?i.start(e,t,a.index,!a.bendpoint):o.start(e,t,a.index),!0}function s(e,t,i){ce.bind(e,t,function(e){n.triggerMouseEvent(t,e,i),e.stopPropagation()})}function c(e,n){var i=t.getLayer(\"overlays\"),o=ge('.djs-bendpoints[data-element-id=\"'+Va()(e.id)+'\"]',i);return!o&&n&&(Ce(o=Ie(\"g\"),{\"data-element-id\":e.id}),ke(o).add(\"djs-bendpoints\"),we(i,o),s(o,\"mousedown\",e),s(o,\"click\",e),s(o,\"dblclick\",e)),o}function p(e,t){t.waypoints.forEach(function(t,n){var i=za(e);we(e,i),Qt(i,t.x,t.y)}),za(e,\"floating\")}function l(e,t){for(var n,i,o=t.waypoints,r=1;r<o.length;r++)go(n=o[r-1],i=o[r])&&Fa(e,n,i)}function u(e){var t=c(e);return t||(p(t=c(e,!0),e),l(t,e)),t}function h(e){var t=c(e);t&&(!function(e){S(ve(\".\"+Ia,e),function(e){Ne(e)})}(t),function(e){S(ve(\".\"+ja,e),function(e){Ne(e)})}(t),l(t,e),p(t,e))}e.on(\"connection.changed\",function(e){h(e.element)}),e.on(\"connection.remove\",function(e){var t=c(e.element);t&&Ne(t)}),e.on(\"element.marker.update\",function(e){var t,n=e.element;n.waypoints&&(t=u(n),e.add?ke(t).add(e.marker):ke(t).remove(e.marker))}),e.on(\"element.mousemove\",function(e){var t,n,i=e.element,o=i.waypoints;if(o){if(!(t=ge(\".floating\",c(i,!0))))return;(n=r(o,e.originalEvent))&&Qt(t,n.point.x,n.point.y)}}),e.on(\"element.mousedown\",function(e){var t=e.originalEvent,n=e.element,i=n.waypoints;if(i)return a(t,n)}),e.on(\"selection.changed\",function(e){var t=e.newSelection[0];t&&t.waypoints&&u(t)}),e.on(\"element.hover\",function(e){var t=e.element;t.waypoints&&(u(t),n.registerEvent(e.gfx,\"mousemove\",\"element.mousemove\"))}),e.on(\"element.out\",function(e){n.unregisterEvent(e.gfx,\"mousemove\",\"element.mousemove\")}),e.on(\"element.updateId\",function(e){var t=e.element,n=e.newId;if(t.waypoints){var i=c(t);i&&Ce(i,{\"data-element-id\":n})}}),this.addHandles=u,this.updateHandles=h,this.getBendpointsContainer=c}Ua.$inject=[\"eventBus\",\"canvas\",\"interactionEvents\",\"bendpointMove\",\"connectionSegmentMove\"];var Ka=\"connect-ok\",Ya=\"connect-not-ok\",Xa=\"connect-hover\",Za=\"djs-updating\",Qa=\"connection.updateWaypoints\",Ja=\"connection.reconnectStart\",es=\"connection.reconnectEnd\",ts=Math.round;function ns(e,t,n,i,o,r,a){var s=e.get(\"connectionDocking\",!1);function c(e){o.update(\"connection\",e.connection,e.connectionGfx)}this.start=function(e,t,o,r){var a,s=t.waypoints,c=n.getGraphics(t);a={connection:t,bendpointIndex:o,insert:r,type:r||0!==o?r||o!==s.length-1?Qa:es:Ja},i.init(e,\"bendpoint.move\",{data:{connection:t,connectionGfx:c,context:a}})},t.on(\"bendpoint.move.start\",function(e){var t=e.context,i=t.connection,o=i.waypoints,r=o.slice(),a=t.insert,s=t.bendpointIndex;t.originalWaypoints=o,a&&r.splice(s,0,null),i.waypoints=r,t.draggerGfx=za(n.getLayer(\"overlays\")),ke(t.draggerGfx).add(\"djs-dragging\"),n.addMarker(i,Za)}),t.on(\"bendpoint.move.hover\",function(e){var t=e.context;if(t.hover=e.hover,e.hover){n.addMarker(e.hover,Xa);var i=t.allowed=r.allowed(t.type,t);i?(n.removeMarker(t.hover,Ya),n.addMarker(t.hover,Ka),t.target=t.hover):!1===i&&(n.removeMarker(t.hover,Ka),n.addMarker(t.hover,Ya),t.target=null)}}),t.on([\"bendpoint.move.out\",\"bendpoint.move.cleanup\"],function(e){var t=e.context.hover;t&&(n.removeMarker(t,Xa),n.removeMarker(t,e.context.target?Ka:Ya))}),t.on(\"bendpoint.move.move\",function(e){var t,n,i=e.context,o=i.type,r=e.connection;r.waypoints[i.bendpointIndex]={x:e.x,y:e.y},s&&(i.hover&&(o===Ja&&(t=i.hover),o===es&&(n=i.hover)),r.waypoints=s.getCroppedWaypoints(r,t,n)),Qt(i.draggerGfx,e.x,e.y),c(e)}),t.on([\"bendpoint.move.end\",\"bendpoint.move.cancel\"],function(e){var t=e.context,i=t.hover,o=t.connection;Ne(t.draggerGfx),t.newWaypoints=o.waypoints.slice(),o.waypoints=t.originalWaypoints,n.removeMarker(o,Za),i&&(n.removeMarker(i,Ka),n.removeMarker(i,Ya))}),t.on(\"bendpoint.move.end\",function(e){var t,n=e.context,i=n.newWaypoints,o=n.bendpointIndex,r=i[o],s=n.allowed;if(r.x=ts(r.x),r.y=ts(r.y),s&&n.type===Ja)a.reconnectStart(n.connection,n.target,r);else if(s&&n.type===es)a.reconnectEnd(n.connection,n.target,r);else{if(!1===s||n.type!==Qa)return c(e),!1;t={bendpointMove:{insert:e.context.insert,bendpointIndex:o}},a.updateWaypoints(n.connection,function(e){e=e.slice();for(var t,n,i,o=0;e[o];)t=e[o],n=e[o-1],0===mo(t,i=e[o+1])||fo(n,i,t)?e.splice(o,1):o++;return e}(i),t)}}),t.on(\"bendpoint.move.cancel\",function(e){c(e)})}ns.$inject=[\"injector\",\"eventBus\",\"canvas\",\"dragging\",\"graphicsFactory\",\"rules\",\"modeling\"];var is=\"connect-hover\",os=\"djs-updating\";function rs(e,t,n){return as(e,t,e[t]+n)}function as(e,t,n){return{x:\"x\"===t?n:e.x,y:\"y\"===t?n:e.y}}function ss(e){return\"x\"===e?\"y\":\"x\"}function cs(e,t,n){var i,o;return e.original?e.original:(i=Co(t),as(e,o=ss(n),i[o]))}function ps(e,t,n,i,o,r,a){var s=e.get(\"connectionDocking\",!1);function c(e,t){if(!s)return t;var n,i=e.waypoints;return e.waypoints=t,n=s.getCroppedWaypoints(e),e.waypoints=i,n}function p(e){o.update(\"connection\",e.connection,e.connectionGfx)}function l(e,t,n){var i=e.newWaypoints,o=function(e,t,n,i){var o=Math.max(t[i],n[i]),r=Math.min(t[i],n[i]);return as(t,i,Math.min(Math.max(r+20,e[i]),o-20))}(n,i[e.segmentStartIndex+t],i[e.segmentEndIndex+t],ss(e.axis));Qt(e.draggerGfx,o.x,o.y)}this.start=function(e,t,o){var r,a,s,c=n.getGraphics(t),p=o-1,l=o,u=t.waypoints,h=u[p],d=u[l];(a=go(h,d))&&(s=\"v\"===a?\"y\":\"x\",0===p&&(h=cs(h,t.source,s)),l===u.length-1&&(d=cs(d,t.target,s)),r={connection:t,segmentStartIndex:p,segmentEndIndex:l,segmentStart:h,segmentEnd:d,axis:s},i.init(e,{x:(h.x+d.x)/2,y:(h.y+d.y)/2},\"connectionSegment.move\",{cursor:\"x\"===s?\"resize-ew\":\"resize-ns\",data:{connection:t,connectionGfx:c,context:r}}))},t.on(\"connectionSegment.move.start\",function(e){var t=e.context,i=e.connection,o=n.getLayer(\"overlays\");t.originalWaypoints=i.waypoints.slice(),t.draggerGfx=Fa(o,t.segmentStart,t.segmentEnd),ke(t.draggerGfx).add(\"djs-dragging\"),n.addMarker(i,os)}),t.on(\"connectionSegment.move.move\",function(e){var t,n,i=e.context,o=i.connection,r=i.segmentStartIndex,a=i.segmentEndIndex,s=i.segmentStart,u=i.segmentEnd,h=i.axis,d=i.originalWaypoints.slice(),m=rs(s,h,e[\"d\"+h]),f=rs(u,h,e[\"d\"+h]),y=d.length,g=0;d[r]=m,d[a]=f,r<2&&(t=To(o.source,m),1===r?\"intersect\"===t&&(d.shift(),d[0]=m,g--):\"intersect\"!==t&&(d.unshift(s),g++)),a>y-3&&(n=To(o.target,f),a===y-2?\"intersect\"===n&&(d.pop(),d[d.length-1]=f):\"intersect\"!==n&&d.push(u)),i.newWaypoints=o.waypoints=c(o,d),l(i,g,e),i.newSegmentStartIndex=r+g,p(e)}),t.on(\"connectionSegment.move.hover\",function(e){e.context.hover=e.hover,n.addMarker(e.hover,is)}),t.on([\"connectionSegment.move.out\",\"connectionSegment.move.cleanup\"],function(e){var t=e.context.hover;t&&n.removeMarker(t,is)}),t.on(\"connectionSegment.move.cleanup\",function(e){var t=e.context,i=t.connection;t.draggerGfx&&Ne(t.draggerGfx),n.removeMarker(i,os)}),t.on([\"connectionSegment.move.cancel\",\"connectionSegment.move.end\"],function(e){var t=e.context;t.connection.waypoints=t.originalWaypoints,p(e)}),t.on(\"connectionSegment.move.end\",function(e){var t=e.context,n=t.connection,i=t.newWaypoints,o=t.newSegmentStartIndex,r=function(e,t){var n=0;return{waypoints:e.filter(function(i,o){return!fo(e[o-1],e[o+1],i)||(n=o<=t?n-1:n,!1)}),segmentOffset:n}}(i=i.map(function(e){return{original:e.original,x:Math.round(e.x),y:Math.round(e.y)}}),o),s=c(n,r.waypoints),p=r.segmentOffset,l={segmentMove:{segmentStartIndex:t.segmentStartIndex,newSegmentStartIndex:o+p}};a.updateWaypoints(n,s,l)})}ps.$inject=[\"injector\",\"eventBus\",\"canvas\",\"dragging\",\"graphicsFactory\",\"rules\",\"modeling\"];var ls=Math.abs,us=Math.round,hs=10;function ds(e){function t(e,t){if(f(e)){for(var n=e.length;n--;)if(ls(e[n]-t)<=hs)return e[n]}else{var i=t%(e=+e);if(i<hs)return t-i;if(i>e-hs)return t-i+e}return t}function n(e){if(e.width)return{x:us(e.width/2+e.x),y:us(e.height/2+e.y)}}e.on(\"connectionSegment.move.move\",1500,function(e){var i,o,r=function(e){var t=e.snapPoints,i=e.connection,o=i.waypoints,r=e.segmentStart,a=e.segmentStartIndex,s=e.segmentEnd,c=e.segmentEndIndex,p=e.axis;if(t)return t;var l=[o[a-1],r,s,o[c+1]];return a<2&&l.unshift(n(i.source)),c>o.length-3&&l.unshift(n(i.target)),e.snapPoints=t={horizontal:[],vertical:[]},S(l,function(e){e&&(e=e.original||e,\"y\"===p&&t.horizontal.push(e.y),\"x\"===p&&t.vertical.push(e.x))}),t}(e.context),a=e.x,s=e.y;if(r){var c=a-(i=t(r.vertical,a)),p=s-(o=t(r.horizontal,s));W(e,{dx:e.dx-c,dy:e.dy-p,x:i,y:o})}}),e.on(\"bendpoint.move.move\",1500,function(e){var i=e.context,o=function(e){var t=e.snapPoints,n=e.connection.waypoints,i=e.bendpointIndex;if(t)return t;var o=[n[i-1],n[i+1]];return e.snapPoints=t={horizontal:[],vertical:[]},S(o,function(e){e&&(e=e.original||e,t.horizontal.push(e.y),t.vertical.push(e.x))}),t}(i),r=i.target,a=r&&n(r),s=e.x,c=e.y;if(o){var p=s-t(a?o.vertical.concat([a.x]):o.vertical,s),l=c-t(a?o.horizontal.concat([a.y]):o.horizontal,c);W(e,{dx:e.dx-p,dy:e.dy-l,x:e.x-p,y:e.y-l})}})}ds.$inject=[\"eventBus\"];var ms={__depends__:[Ma,La],__init__:[\"bendpoints\",\"bendpointSnapping\"],bendpoints:[\"type\",Ua],bendpointMove:[\"type\",ns],connectionSegmentMove:[\"type\",ps],bendpointSnapping:[\"type\",ds]},fs=Math.min,ys=Math.max;function gs(e){e.preventDefault()}function vs(e){e.stopPropagation()}function bs(e){this.container=e.container,this.parent=ue('<div class=\"djs-direct-editing-parent\"><div class=\"djs-direct-editing-content\" contenteditable=\"true\"></div></div>'),this.content=ge(\"[contenteditable]\",this.parent),this.keyHandler=e.keyHandler||function(){},this.resizeHandler=e.resizeHandler||function(){},this.autoResize=V(this.autoResize,this),this.handlePaste=V(this.handlePaste,this)}function xs(e,t){this._eventBus=e,this._providers=[],this._textbox=new bs({container:t.getContainer(),keyHandler:V(this._handleKey,this),resizeHandler:V(this._handleResize,this)})}bs.prototype.create=function(e,t,n,i){var o=this.parent,r=this.content,a=this.container;i=this.options=i||{};var s=G(t=this.style=t||{},[\"width\",\"height\",\"maxWidth\",\"maxHeight\",\"minWidth\",\"minHeight\",\"left\",\"top\",\"backgroundColor\",\"position\",\"overflow\",\"border\",\"wordWrap\",\"textAlign\",\"outline\",\"transform\"]);W(o.style,{width:e.width+\"px\",height:e.height+\"px\",maxWidth:e.maxWidth+\"px\",maxHeight:e.maxHeight+\"px\",minWidth:e.minWidth+\"px\",minHeight:e.minHeight+\"px\",left:e.x+\"px\",top:e.y+\"px\",backgroundColor:\"#ffffff\",position:\"absolute\",overflow:\"visible\",border:\"1px solid #ccc\",boxSizing:\"border-box\",wordWrap:\"normal\",textAlign:\"center\",outline:\"none\"},s);var c=G(t,[\"fontFamily\",\"fontSize\",\"fontWeight\",\"lineHeight\",\"padding\",\"paddingTop\",\"paddingRight\",\"paddingBottom\",\"paddingLeft\"]);return W(r.style,{boxSizing:\"border-box\",width:\"100%\",outline:\"none\",wordWrap:\"break-word\"},c),i.centerVertically&&W(r.style,{position:\"absolute\",top:\"50%\",transform:\"translate(0, -50%)\"},c),r.innerText=n,ce.bind(r,\"keydown\",this.keyHandler),ce.bind(r,\"mousedown\",vs),ce.bind(r,\"paste\",this.handlePaste),i.autoResize&&ce.bind(r,\"input\",this.autoResize),i.resizable&&this.resizable(t),a.appendChild(o),this.setSelection(r.lastChild,r.lastChild&&r.lastChild.length),o},bs.prototype.handlePaste=function(e){var t,n,i=this,o=this.options,r=this.style;if(e.preventDefault(),t=e.clipboardData?e.clipboardData.getData(\"text/plain\"):window.clipboardData.getData(\"Text\"),!document.execCommand(\"insertHTML\",!1,t)){var a,s,c=this.getSelection(),p=c.startContainer,l=c.endContainer,u=c.startOffset,h=c.endOffset,d=c.commonAncestorContainer,m=(n=d.childNodes,[].slice.call(n));if(d.nodeType===Node.TEXT_NODE){var f=p.textContent;p.textContent=f.substring(0,u)+t+f.substring(h),a=p,s=u+t.length}else if(p===this.content&&l===this.content){var y=document.createTextNode(t);this.content.insertBefore(y,m[u]),a=y,s=y.textContent.length}else{var g=m.indexOf(p),v=m.indexOf(l);m.forEach(function(e,n){n===g?e.textContent=p.textContent.substring(0,u)+t+l.textContent.substring(h):n>g&&n<=v&&be(e)}),a=p,s=u+t.length}a&&void 0!==s&&setTimeout(function(){i.setSelection(a,s)})}if(o.autoResize){var b=this.autoResize(r);b&&this.resizeHandler(b)}},bs.prototype.autoResize=function(){var e=this.parent,t=this.content,n=parseInt(this.style.fontSize)||12;if(t.scrollHeight>e.offsetHeight||t.scrollHeight<e.offsetHeight-n){var i=e.getBoundingClientRect(),o=t.scrollHeight;e.style.height=o+\"px\",this.resizeHandler({width:i.width,height:i.height,dx:0,dy:o-i.height})}},bs.prototype.resizable=function(){var e=this,t=this.parent,n=this.resizeHandle,i=parseInt(this.style.minWidth)||0,o=parseInt(this.style.minHeight)||0,r=parseInt(this.style.maxWidth)||1/0,a=parseInt(this.style.maxHeight)||1/0;if(!n){var s,c,p,l;n=this.resizeHandle=ue('<div class=\"djs-direct-editing-resize-handle\"></div>');var u=function(n){gs(n),vs(n);var u=fs(ys(p+n.clientX-s,i),r),h=fs(ys(l+n.clientY-c,o),a);t.style.width=u+\"px\",t.style.height=h+\"px\",e.resizeHandler({width:p,height:l,dx:n.clientX-s,dy:n.clientY-c})},h=function(e){gs(e),vs(e),ce.unbind(document,\"mousemove\",u,!1),ce.unbind(document,\"mouseup\",h,!1)};ce.bind(n,\"mousedown\",function(e){gs(e),vs(e),s=e.clientX,c=e.clientY;var n=t.getBoundingClientRect();p=n.width,l=n.height,ce.bind(document,\"mousemove\",u),ce.bind(document,\"mouseup\",h)})}W(n.style,{position:\"absolute\",bottom:\"0px\",right:\"0px\",cursor:\"nwse-resize\",width:\"0\",height:\"0\",borderTop:(parseInt(this.style.fontSize)/4||3)+\"px solid transparent\",borderRight:(parseInt(this.style.fontSize)/4||3)+\"px solid #ccc\",borderBottom:(parseInt(this.style.fontSize)/4||3)+\"px solid #ccc\",borderLeft:(parseInt(this.style.fontSize)/4||3)+\"px solid transparent\"}),t.appendChild(n)},bs.prototype.destroy=function(){var e=this.parent,t=this.content,n=this.resizeHandle;t.innerText=\"\",e.removeAttribute(\"style\"),t.removeAttribute(\"style\"),ce.unbind(t,\"keydown\",this.keyHandler),ce.unbind(t,\"mousedown\",vs),ce.unbind(t,\"input\",this.autoResize),ce.unbind(t,\"paste\",this.handlePaste),n&&(n.removeAttribute(\"style\"),be(n)),be(e)},bs.prototype.getValue=function(){return this.content.innerText},bs.prototype.getSelection=function(){return window.getSelection().getRangeAt(0)},bs.prototype.setSelection=function(e,t){var n=document.createRange();null===e?n.selectNodeContents(this.content):(n.setStart(e,t),n.setEnd(e,t));var i=window.getSelection();i.removeAllRanges(),i.addRange(n)},xs.$inject=[\"eventBus\",\"canvas\"],xs.prototype.registerProvider=function(e){this._providers.push(e)},xs.prototype.isActive=function(){return!!this._active},xs.prototype.cancel=function(){this._active&&(this._fire(\"cancel\"),this.close())},xs.prototype._fire=function(e,t){this._eventBus.fire(\"directEditing.\"+e,t||{active:this._active})},xs.prototype.close=function(){this._textbox.destroy(),this._fire(\"deactivate\"),this._active=null,this.resizable=void 0},xs.prototype.complete=function(){var e=this._active;if(e){var t=this.getValue(),n=this.$textbox.getBoundingClientRect();(t!==e.context.text||this.resizable)&&e.provider.update(e.element,t,e.context.text,{x:n.top,y:n.left,width:n.width,height:n.height}),this._fire(\"complete\"),this.close()}},xs.prototype.getValue=function(){return this._textbox.getValue()},xs.prototype._handleKey=function(e){e.stopPropagation();var t=e.keyCode||e.charCode;return 27===t?(e.preventDefault(),this.cancel()):13!==t||e.shiftKey?void 0:(e.preventDefault(),this.complete())},xs.prototype._handleResize=function(e){this._fire(\"resize\",e)},xs.prototype.activate=function(e){var t;this.isActive()&&this.cancel();var n=_(this._providers,function(n){return(t=n.activate(e))?n:null});return t&&(this.$textbox=this._textbox.create(t.bounds,t.style,t.text,t.options),this._active={element:e,context:t,provider:n},t.options&&t.options.resizable&&(this.resizable=!0),this._fire(\"activate\")),!!t};var _s={__depends__:[Vo],__init__:[\"directEditing\"],directEditing:[\"type\",xs]};function ws(e,t,n){this._providers=[],this._eventBus=t,this._overlays=n;var i=m(e&&e.scale)?e.scale:{min:1,max:1.5};this._overlaysConfig={position:{right:-9,top:-6},scale:i},this._current=null,this._init()}ws.$inject=[\"config.contextPad\",\"eventBus\",\"overlays\"],ws.prototype._init=function(){var e=this._eventBus,t=this;e.on(\"selection.changed\",function(e){var n=e.newSelection;1===n.length?t.open(n[0]):t.close()}),e.on(\"elements.delete\",function(e){S(e.elements,function(e){t.isOpen(e)&&t.close()})}),e.on(\"element.changed\",function(e){var n=e.element,i=t._current;i&&i.element===n&&t.open(n,!0)})},ws.prototype.registerProvider=function(e){this._providers.push(e)},ws.prototype.getEntries=function(e){var t={};return S(this._providers,function(n){S(n.getContextPadEntries(e),function(e,n){t[n]=e})}),t},ws.prototype.trigger=function(e,t,n){var i,o,r=this._current.element,a=this._current.entries,s=t.delegateTarget||t.target;if(!s)return t.preventDefault();if(i=a[q(s,\"data-action\")].action,o=t.originalEvent||t,v(i)){if(\"click\"===e)return i(o,r,n)}else if(i[e])return i[e](o,r,n);t.preventDefault()},ws.prototype.open=function(e,t){!t&&this.isOpen(e)||(this.close(),this._updateAndOpen(e))},ws.prototype._updateAndOpen=function(e){var t=this.getEntries(e),n=this.getPad(e),i=n.html;S(t,function(e,t){var n,o,r,a,s=e.group||\"default\",c=ue(e.html||'<div class=\"entry\" draggable=\"true\"></div>');q(c,\"data-action\",t),(n=ge(\"[data-group=\"+s+\"]\",i))||(n=ue('<div class=\"group\" data-group=\"'+s+'\"></div>'),i.appendChild(n)),n.appendChild(c),e.className&&(o=c,r=e.className,a=Z(o),(f(r)?r:r.split(/\\s+/g)).forEach(function(e){a.add(e)})),e.title&&q(c,\"title\",e.title),e.imageUrl&&c.appendChild(ue('<img src=\"'+e.imageUrl+'\">'))}),Z(i).add(\"open\"),this._current={element:e,pad:n,entries:t},this._eventBus.fire(\"contextPad.open\",{current:this._current})},ws.prototype.getPad=function(e){if(this.isOpen())return this._current.pad;var t=this,n=this._overlays,i=ue('<div class=\"djs-context-pad\"></div>'),o=W({html:i},this._overlaysConfig);le.bind(i,\".entry\",\"click\",function(e){t.trigger(\"click\",e)}),le.bind(i,\".entry\",\"dragstart\",function(e){t.trigger(\"dragstart\",e)}),ce.bind(i,\"mousedown\",function(e){e.stopPropagation()}),this._overlayId=n.add(e,\"context-pad\",o);var r=n.get(this._overlayId);return this._eventBus.fire(\"contextPad.create\",{element:e,pad:r}),r},ws.prototype.close=function(){this.isOpen()&&(this._overlays.remove(this._overlayId),this._overlayId=null,this._eventBus.fire(\"contextPad.close\",{current:this._current}),this._current=null)},ws.prototype.isOpen=function(e){return!(!this._current||e&&this._current.element!==e)};var Es={__depends__:[Vo,or],contextPad:[\"type\",ws]},Ss=\"connect-ok\",Ps=\"connect-not-ok\";function Cs(e,t,n,i,o,r){function a(e,t){return i.allowed(\"connection.create\",{source:e,target:t})}e.on(\"connect.move\",function(e){var t,n=e.context,i=n.source,o=n.target;Ce(n.visual,{points:[(t=function(e,t,n,i){var o=r.getShapePath(n),a=i&&r.getShapePath(i),s=r.getConnectionPath({waypoints:[e,t]});return[e=Ro(o,s,!0)||e,t=i&&Ro(a,s,!1)||t]}(n.sourcePosition,{x:e.x,y:e.y},i,o))[0].x,t[0].y,t[1].x,t[1].y]})}),e.on(\"connect.hover\",function(e){var t,n=e.context,i=n.source,r=e.hover;null!==(t=n.canExecute=a(i,r))&&(n.target=r,o.addMarker(r,t?Ss:Ps))}),e.on([\"connect.out\",\"connect.cleanup\"],function(e){var t=e.context;t.target&&o.removeMarker(t.target,t.canExecute?Ss:Ps),t.target=null,t.canExecute=!1}),e.on(\"connect.cleanup\",function(e){var t=e.context;t.visual&&Ne(t.visual)}),e.on(\"connect.start\",function(e){var t,n=e.context;Ce(t=Ie(\"polyline\"),{stroke:\"#333\",strokeDasharray:[1],strokeWidth:2,\"pointer-events\":\"none\"}),we(o.getDefaultLayer(),t),n.visual=t}),e.on(\"connect.end\",function(e){var t=e.context,i=t.source,o=t.sourcePosition,r=t.target,s={x:e.x,y:e.y},c=t.canExecute||a(i,r);if(!c)return!1;var p=null,l={connectionStart:o,connectionEnd:s};\"object\"==typeof c&&(p=c),n.connect(i,r,p,l)}),this.start=function(e,n,i,o){\"object\"!=typeof i&&(o=i,i=Co(n)),t.init(e,\"connect\",{autoActivate:o,data:{shape:n,context:{source:n,sourcePosition:i}}})}}Cs.$inject=[\"eventBus\",\"dragging\",\"modeling\",\"rules\",\"canvas\",\"graphicsFactory\"];var Ts={__depends__:[Zo,La,Ma],connect:[\"type\",Cs]},Rs=750,Ms=\"drop-ok\",As=\"drop-not-ok\",ks=\"attach-ok\",Bs=\"new-parent\";function Ns(e,t,n,i,o,r,a){function s(e,t){[ks,Ms,As,Bs].forEach(function(n){n===t?o.addMarker(e,n):o.removeMarker(e,n)})}e.on(\"create.move\",function(e){var t,i=e.context,o=e.hover,r=i.shape,a=i.source,c={x:e.x,y:e.y};t=i.canExecute=o&&function(e,t,i,o){if(!t)return!1;var r,a,s,c={source:i,shape:e,target:t,position:o};return(a=n.allowed(\"shape.attach\",c))||(r=n.allowed(\"shape.create\",c)),(r||a)&&(s=i&&n.allowed(\"connection.create\",{source:i,target:e,hints:{targetParent:t,targetAttach:a}})),!(!r&&!a)&&{attach:a,connect:s}}(r,o,a,c),o&&null!==t&&(i.target=o,t&&t.attach?s(o,ks):s(o,t?Bs:As))}),e.on(\"create.move\",Rs,function(e){var t=e.context,n=t.shape,i=t.visual;i||(i=t.visual=function(e){var t,n,i;Ce(t=Ie(\"g\"),r.cls(\"djs-drag-group\",[\"no-events\"])),we(o.getDefaultLayer(),t),ke(n=Ie(\"g\")).add(\"djs-dragger\"),we(t,n),Qt(n,e.width/-2,e.height/-2);var s=Ie(\"g\");return ke(s).add(\"djs-visual\"),we(n,s),i=s,a.drawShape(i,e),t}(n)),Qt(i,e.x,e.y)}),e.on([\"create.end\",\"create.out\",\"create.cleanup\"],function(e){var t=e.context.target;t&&s(t,null)}),e.on(\"create.end\",function(e){var t=e.context,n=t.source,o=t.shape,r=t.target,a=t.canExecute,s=a&&a.attach,c=a&&a.connect,p={x:e.x,y:e.y};if(!a)return!1;o=c?i.appendShape(n,o,p,r,{attach:s,connection:!0===c?{}:c}):i.createShape(o,p,r,{attach:s}),t.shape=o}),e.on(\"create.cleanup\",function(e){var t=e.context;t.visual&&Ne(t.visual)}),this.start=function(e,n,i){t.init(e,\"create\",{cursor:\"grabbing\",autoActivate:!0,data:{shape:n,context:{shape:n,source:i}}})}}Ns.$inject=[\"eventBus\",\"dragging\",\"rules\",\"modeling\",\"canvas\",\"styles\",\"graphicsFactory\"];var Ds={__depends__:[Ma,Zo,La],create:[\"type\",Ns]};function Os(e,t,n){var i=m(e&&e.scale)?e.scale:{min:1,max:1.5};this._config={scale:i},this._eventBus=t,this._canvas=n,this._providers={},this._current={}}Os.$inject=[\"config.popupMenu\",\"eventBus\",\"canvas\"],Os.prototype.registerProvider=function(e,t){this._providers[e]=t},Os.prototype.isEmpty=function(e,t){if(!e)throw new Error(\"element parameter is missing\");if(!t)throw new Error(\"providerId parameter is missing\");var n=this._providers[t],i=n.getEntries(e),o=n.getHeaderEntries&&n.getHeaderEntries(e),r=i.length>0,a=o&&o.length>0;return!r&&!a},Os.prototype.open=function(e,t,n){var i=this._providers[t];if(!e)throw new Error(\"Element is missing\");if(!i)throw new Error(\"Provider is not registered: \"+t);if(!n)throw new Error(\"the position argument is missing\");this.isOpen()&&this.close(),this._emit(\"open\");var o=this._current={provider:i,className:t,element:e,position:n};i.getHeaderEntries&&(o.headerEntries=i.getHeaderEntries(e)),o.entries=i.getEntries(e),o.container=this._createContainer();var r=o.headerEntries||[],a=o.entries||[];r.length&&o.container.appendChild(this._createEntries(o.headerEntries,\"djs-popup-header\")),a.length&&o.container.appendChild(this._createEntries(o.entries,\"djs-popup-body\"));var s=this._canvas.getContainer();this._attachContainer(o.container,s,n.cursor)},Os.prototype.close=function(){this.isOpen()&&(this._emit(\"close\"),this._unbindHandlers(),be(this._current.container),this._current.container=null)},Os.prototype.isOpen=function(){return!!this._current.container},Os.prototype.trigger=function(e){e.preventDefault();var t=q(e.delegateTarget||e.target,\"data-id\"),n=this._getEntry(t);if(n.action)return n.action.call(null,e,n)},Os.prototype._getEntry=function(e){var t=L({id:e}),n=_(this._current.entries,t)||_(this._current.headerEntries,t);if(!n)throw new Error(\"entry not found\");return n},Os.prototype._emit=function(e){this._eventBus.fire(\"popupMenu.\"+e)},Os.prototype._createContainer=function(){var e=ue('<div class=\"djs-popup\">'),t=this._current.position,n=this._current.className;return W(e.style,{position:\"absolute\",left:t.x+\"px\",top:t.y+\"px\",visibility:\"hidden\"}),Z(e).add(n),e},Os.prototype._attachContainer=function(e,t,n){var i=this;le.bind(e,\".entry\",\"click\",function(e){i.trigger(e)}),this._updateScale(e),t.appendChild(e),n&&this._assureIsInbounds(e,n),this._bindHandlers()},Os.prototype._updateScale=function(e){var t,n,i,o,r=this._canvas.zoom(),a=this._config.scale,s=r;!0!==a&&(!1===a?(t=1,n=1):(t=a.min,n=a.max),m(t)&&r<t&&(s=t),m(n)&&r>n&&(s=n)),o=\"scale(\"+s+\")\",(i=e).style[\"transform-origin\"]=\"top left\",[\"\",\"-ms-\",\"-webkit-\"].forEach(function(e){i.style[e+\"transform\"]=o})},Os.prototype._assureIsInbounds=function(e,t){var n,i,o=this._canvas._container.getBoundingClientRect(),r=e.offsetLeft,a=e.offsetTop,s=e.scrollWidth,c=e.scrollHeight,p={},l=t.x-o.left,u=t.y-o.top;r+s>o.width&&(p.x=!0),a+c>o.height&&(p.y=!0),p.x&&p.y?(n=l-s+\"px\",i=u-c+\"px\"):p.x?(n=l-s+\"px\",i=u+\"px\"):p.y&&u<c?(n=l+\"px\",i=\"10px\"):p.y&&(n=l+\"px\",i=u-c+\"px\"),W(e.style,{left:n,top:i},{visibility:\"visible\",\"z-index\":1e3})},Os.prototype._createEntries=function(e,t){var n=ue(\"<div>\"),i=this;return Z(n).add(t),S(e,function(e){var t=i._createEntry(e,n);n.appendChild(t)}),n},Os.prototype._createEntry=function(e){if(!e.id)throw new Error(\"every entry must have the id property set\");var t=ue(\"<div>\"),n=Z(t);if(n.add(\"entry\"),e.className&&e.className.split(\" \").forEach(function(e){n.add(e)}),q(t,\"data-id\",e.id),e.label){var i=ue(\"<span>\");i.textContent=e.label,t.appendChild(i)}return e.imageUrl&&t.appendChild(ue('<img src=\"'+e.imageUrl+'\" />')),!0===e.active&&n.add(\"active\"),!0===e.disabled&&n.add(\"disabled\"),e.title&&(t.title=e.title),t},Os.prototype._bindHandlers=function(){var e=this._eventBus,t=this;function n(){t.close()}e.once(\"contextPad.close\",n),e.once(\"canvas.viewbox.changing\",n),e.once(\"commandStack.changed\",n)},Os.prototype._unbindHandlers=function(){var e=this._eventBus,t=this;function n(){t.close()}e.off(\"contextPad.close\",n),e.off(\"canvas.viewbox.changed\",n),e.off(\"commandStack.changed\",n)};var Ls={__init__:[\"popupMenu\"],popupMenu:[\"type\",Os]},js=Math.round;function Is(e){this._modeling=e}Is.$inject=[\"modeling\"],Is.prototype.replaceElement=function(e,t,n){var i=this._modeling,o=null;return e.waypoints||(t.x=js(e.x+(t.width||e.width)/2),t.y=js(e.y+(t.height||e.height)/2),o=i.replaceShape(e,t,n)),o};var zs={__init__:[\"replace\"],replace:[\"type\",Is]},Fs=[\"lanes\",\"incoming\",\"outgoing\",\"artifacts\",\"default\",\"flowElements\",\"dataInputAssociations\",\"dataOutputAssociations\"];function $s(e,t){var n=[];return S(e.properties,function(e){t&&e.default||n.push(e.ns.name)}),n}function Vs(e,t){this._eventBus=e,this._bpmnFactory=t}Vs.prototype.clone=function(e,t,n){var i=this,o={newElement:t,hasNestedProperty:!1};return S(n=O(n,function(e){return\"bpmn:extensionElements\"===e}),function(n){var r,a,s,c=e.get(n),p=t.get(n),l=t.$model.getPropertyDescriptor(t,n);p!==c&&(l&&(l.isId||l.isReference)||(s=c,R([\"boolean\",\"string\",\"number\"],function(e){return typeof s===e})||null===c?t.set(n,c):f(c)?S(c,function(e){var n;o.refTopLevelProperty=e,n=i._deepClone(e,o),o.hasNestedProperty&&(n.$parent=t,p.push(n)),o.hasNestedProperty=!1}):(a=n.replace(/bpmn:/,\"\"),o.refTopLevelProperty=c,r=i._deepClone(c,o),o.hasNestedProperty&&(r.$parent=t,t.set(a,r)),o.hasNestedProperty=!1)))}),t},Vs.prototype._deepClone=function(e,t){var n=this,i=this._eventBus,o=this._bpmnFactory.create(e.$type),r=E(Object.keys(e),function(e){var t=o.$model.getPropertyDescriptor(o,e);return(!t||!t.isId&&!t.isReference)&&(-1===Fs.indexOf(e)&&\"$type\"!==e)});return r.length||(t.hasNestedProperty=!0),S(r,function(r){void 0!==e[r]&&(e[r].$type||f(e[r]))?f(e[r])?(o[r]=[],S(e[r],function(a){var s,c=e.$model.getTypeDescriptor(a.$type);if(c){if(!i.fire(\"property.clone\",{newElement:t.newElement,refTopLevelProperty:t.refTopLevelProperty,propertyDescriptor:c})&&\"bpmn:ExtensionElements\"===e.$type&&c.meta&&c.meta.allowedIn&&!function(e,t){var n=e.meta.allowedIn;return 1===n.length&&\"*\"===n[0]||-1!==n.indexOf(t)}(c,t.newElement.$type))return!1;(s=n._deepClone(a,t)).$parent=o,o[r]||(o[r]=[]),t.hasNestedProperty=!0,o[r].push(s)}})):e[r].$type&&(o[r]=n._deepClone(e[r],t),o[r]&&(t.hasNestedProperty=!0,o[r].$parent=o)):(t.hasNestedProperty=!0,o[r]=e[r])}),o};var Hs=[\"cancelActivity\",\"instantiate\",\"eventGatewayType\",\"triggeredByEvent\",\"isInterrupting\"];function Ws(e,t,n,i,o){var r=new Vs(o,e);this.replaceElement=function(o,a,s){s=s||{};var c=a.type,p=o.businessObject;if(Gs(p)&&\"bpmn:SubProcess\"===c&&function(e,t){var n=e&&x(e,\"collapsed\")?e.collapsed:!ki(e);return n!==(t&&(x(t,\"collapsed\")||x(t,\"isExpanded\"))?x(t,\"collapsed\")?t.collapsed:!t.isExpanded:n)&&(e.collapsed=n,!0)}(o,a))return i.toggleCollapse(o),o;var l,u=e.create(c),h={type:c,businessObject:u},d=$s(p.$descriptor),m=$s(u.$descriptor,!0),f=(l=m,d.filter(function(e){return-1!==l.indexOf(e)}));W(u,G(a,Hs));var y=E(f,function(e){var t=e.replace(/bpmn:/,\"\");return\"eventDefinitions\"===t?qs(o,a.eventDefinitionType):\"loopCharacteristics\"===t?!Bi(u):!(e in u||\"processRef\"===t&&!1===a.isExpanded||\"triggeredByEvent\"===t||-1!==Fs.indexOf(t))});return u=r.clone(p,u,y),a.eventDefinitionType&&(qs(u,a.eventDefinitionType)||(h.eventDefinitionType=a.eventDefinitionType)),Mi(p,\"bpmn:Activity\")&&(Gs(p)?h.isExpanded=ki(p):a&&x(a,\"isExpanded\")&&(h.isExpanded=a.isExpanded),ki(p)&&!Mi(p,\"bpmn:Task\")&&h.isExpanded&&(h.width=o.width,h.height=o.height)),Gs(p)&&!Gs(u)&&(s.moveChildren=!1),Mi(p,\"bpmn:Participant\")&&(!0===a.isExpanded?u.processRef=e.create(\"bpmn:Process\"):s.moveChildren=!1,h.width=o.width,h.height=o.height),u.name=p.name,ia(p,[\"bpmn:ExclusiveGateway\",\"bpmn:InclusiveGateway\",\"bpmn:Activity\"])&&ia(u,[\"bpmn:ExclusiveGateway\",\"bpmn:InclusiveGateway\",\"bpmn:Activity\"])&&(u.default=p.default),(\"fill\"in p.di||\"stroke\"in p.di)&&W(h,{colors:G(p.di,[\"fill\",\"stroke\"])}),h=t.replaceElement(o,h,s),!1!==s.select&&n.select(h),h}}function Gs(e){return Mi(e,\"bpmn:SubProcess\")}function qs(e,t){var n=Ai(e);return t&&n.get(\"eventDefinitions\").some(function(e){return Mi(e,t)})}Ws.$inject=[\"bpmnFactory\",\"replace\",\"selection\",\"modeling\",\"eventBus\"];var Us={__depends__:[Zo,zs],bpmnReplace:[\"type\",Ws]};function Ks(e){return function(t){var n=t.target,i=Ai(e),o=i.eventDefinitions&&i.eventDefinitions[0],r=i.$type===n.type,a=(o&&o.$type)===n.eventDefinitionType,s=i.triggeredByEvent===n.triggeredByEvent,c=void 0===n.isExpanded||n.isExpanded===ki(i);return!(r&&a&&s&&c)}}var Ys=[{label:\"Start Event\",actionName:\"replace-with-none-start\",className:\"bpmn-icon-start-event-none\",target:{type:\"bpmn:StartEvent\"}},{label:\"Intermediate Throw Event\",actionName:\"replace-with-none-intermediate-throwing\",className:\"bpmn-icon-intermediate-event-none\",target:{type:\"bpmn:IntermediateThrowEvent\"}},{label:\"End Event\",actionName:\"replace-with-none-end\",className:\"bpmn-icon-end-event-none\",target:{type:\"bpmn:EndEvent\"}},{label:\"Message Start Event\",actionName:\"replace-with-message-start\",className:\"bpmn-icon-start-event-message\",target:{type:\"bpmn:StartEvent\",eventDefinitionType:\"bpmn:MessageEventDefinition\"}},{label:\"Timer Start Event\",actionName:\"replace-with-timer-start\",className:\"bpmn-icon-start-event-timer\",target:{type:\"bpmn:StartEvent\",eventDefinitionType:\"bpmn:TimerEventDefinition\"}},{label:\"Conditional Start Event\",actionName:\"replace-with-conditional-start\",className:\"bpmn-icon-start-event-condition\",target:{type:\"bpmn:StartEvent\",eventDefinitionType:\"bpmn:ConditionalEventDefinition\"}},{label:\"Signal Start Event\",actionName:\"replace-with-signal-start\",className:\"bpmn-icon-start-event-signal\",target:{type:\"bpmn:StartEvent\",eventDefinitionType:\"bpmn:SignalEventDefinition\"}}],Xs=[{label:\"Start Event\",actionName:\"replace-with-none-start\",className:\"bpmn-icon-start-event-none\",target:{type:\"bpmn:StartEvent\"}},{label:\"Intermediate Throw Event\",actionName:\"replace-with-none-intermediate-throw\",className:\"bpmn-icon-intermediate-event-none\",target:{type:\"bpmn:IntermediateThrowEvent\"}},{label:\"End Event\",actionName:\"replace-with-none-end\",className:\"bpmn-icon-end-event-none\",target:{type:\"bpmn:EndEvent\"}},{label:\"Message Intermediate Catch Event\",actionName:\"replace-with-message-intermediate-catch\",className:\"bpmn-icon-intermediate-event-catch-message\",target:{type:\"bpmn:IntermediateCatchEvent\",eventDefinitionType:\"bpmn:MessageEventDefinition\"}},{label:\"Message Intermediate Throw Event\",actionName:\"replace-with-message-intermediate-throw\",className:\"bpmn-icon-intermediate-event-throw-message\",target:{type:\"bpmn:IntermediateThrowEvent\",eventDefinitionType:\"bpmn:MessageEventDefinition\"}},{label:\"Timer Intermediate Catch Event\",actionName:\"replace-with-timer-intermediate-catch\",className:\"bpmn-icon-intermediate-event-catch-timer\",target:{type:\"bpmn:IntermediateCatchEvent\",eventDefinitionType:\"bpmn:TimerEventDefinition\"}},{label:\"Escalation Intermediate Throw Event\",actionName:\"replace-with-escalation-intermediate-throw\",className:\"bpmn-icon-intermediate-event-throw-escalation\",target:{type:\"bpmn:IntermediateThrowEvent\",eventDefinitionType:\"bpmn:EscalationEventDefinition\"}},{label:\"Conditional Intermediate Catch Event\",actionName:\"replace-with-conditional-intermediate-catch\",className:\"bpmn-icon-intermediate-event-catch-condition\",target:{type:\"bpmn:IntermediateCatchEvent\",eventDefinitionType:\"bpmn:ConditionalEventDefinition\"}},{label:\"Link Intermediate Catch Event\",actionName:\"replace-with-link-intermediate-catch\",className:\"bpmn-icon-intermediate-event-catch-link\",target:{type:\"bpmn:IntermediateCatchEvent\",eventDefinitionType:\"bpmn:LinkEventDefinition\"}},{label:\"Link Intermediate Throw Event\",actionName:\"replace-with-link-intermediate-throw\",className:\"bpmn-icon-intermediate-event-throw-link\",target:{type:\"bpmn:IntermediateThrowEvent\",eventDefinitionType:\"bpmn:LinkEventDefinition\"}},{label:\"Compensation Intermediate Throw Event\",actionName:\"replace-with-compensation-intermediate-throw\",className:\"bpmn-icon-intermediate-event-throw-compensation\",target:{type:\"bpmn:IntermediateThrowEvent\",eventDefinitionType:\"bpmn:CompensateEventDefinition\"}},{label:\"Signal Intermediate Catch Event\",actionName:\"replace-with-signal-intermediate-catch\",className:\"bpmn-icon-intermediate-event-catch-signal\",target:{type:\"bpmn:IntermediateCatchEvent\",eventDefinitionType:\"bpmn:SignalEventDefinition\"}},{label:\"Signal Intermediate Throw Event\",actionName:\"replace-with-signal-intermediate-throw\",className:\"bpmn-icon-intermediate-event-throw-signal\",target:{type:\"bpmn:IntermediateThrowEvent\",eventDefinitionType:\"bpmn:SignalEventDefinition\"}}],Zs=[{label:\"Start Event\",actionName:\"replace-with-none-start\",className:\"bpmn-icon-start-event-none\",target:{type:\"bpmn:StartEvent\"}},{label:\"Intermediate Throw Event\",actionName:\"replace-with-none-intermediate-throw\",className:\"bpmn-icon-intermediate-event-none\",target:{type:\"bpmn:IntermediateThrowEvent\"}},{label:\"End Event\",actionName:\"replace-with-none-end\",className:\"bpmn-icon-end-event-none\",target:{type:\"bpmn:EndEvent\"}},{label:\"Message End Event\",actionName:\"replace-with-message-end\",className:\"bpmn-icon-end-event-message\",target:{type:\"bpmn:EndEvent\",eventDefinitionType:\"bpmn:MessageEventDefinition\"}},{label:\"Escalation End Event\",actionName:\"replace-with-escalation-end\",className:\"bpmn-icon-end-event-escalation\",target:{type:\"bpmn:EndEvent\",eventDefinitionType:\"bpmn:EscalationEventDefinition\"}},{label:\"Error End Event\",actionName:\"replace-with-error-end\",className:\"bpmn-icon-end-event-error\",target:{type:\"bpmn:EndEvent\",eventDefinitionType:\"bpmn:ErrorEventDefinition\"}},{label:\"Cancel End Event\",actionName:\"replace-with-cancel-end\",className:\"bpmn-icon-end-event-cancel\",target:{type:\"bpmn:EndEvent\",eventDefinitionType:\"bpmn:CancelEventDefinition\"}},{label:\"Compensation End Event\",actionName:\"replace-with-compensation-end\",className:\"bpmn-icon-end-event-compensation\",target:{type:\"bpmn:EndEvent\",eventDefinitionType:\"bpmn:CompensateEventDefinition\"}},{label:\"Signal End Event\",actionName:\"replace-with-signal-end\",className:\"bpmn-icon-end-event-signal\",target:{type:\"bpmn:EndEvent\",eventDefinitionType:\"bpmn:SignalEventDefinition\"}},{label:\"Terminate End Event\",actionName:\"replace-with-terminate-end\",className:\"bpmn-icon-end-event-terminate\",target:{type:\"bpmn:EndEvent\",eventDefinitionType:\"bpmn:TerminateEventDefinition\"}}],Qs=[{label:\"Exclusive Gateway\",actionName:\"replace-with-exclusive-gateway\",className:\"bpmn-icon-gateway-xor\",target:{type:\"bpmn:ExclusiveGateway\"}},{label:\"Parallel Gateway\",actionName:\"replace-with-parallel-gateway\",className:\"bpmn-icon-gateway-parallel\",target:{type:\"bpmn:ParallelGateway\"}},{label:\"Inclusive Gateway\",actionName:\"replace-with-inclusive-gateway\",className:\"bpmn-icon-gateway-or\",target:{type:\"bpmn:InclusiveGateway\"}},{label:\"Complex Gateway\",actionName:\"replace-with-complex-gateway\",className:\"bpmn-icon-gateway-complex\",target:{type:\"bpmn:ComplexGateway\"}},{label:\"Event based Gateway\",actionName:\"replace-with-event-based-gateway\",className:\"bpmn-icon-gateway-eventbased\",target:{type:\"bpmn:EventBasedGateway\",instantiate:!1,eventGatewayType:\"Exclusive\"}}],Js=[{label:\"Transaction\",actionName:\"replace-with-transaction\",className:\"bpmn-icon-transaction\",target:{type:\"bpmn:Transaction\",isExpanded:!0}},{label:\"Event Sub Process\",actionName:\"replace-with-event-subprocess\",className:\"bpmn-icon-event-subprocess-expanded\",target:{type:\"bpmn:SubProcess\",triggeredByEvent:!0,isExpanded:!0}},{label:\"Sub Process (collapsed)\",actionName:\"replace-with-collapsed-subprocess\",className:\"bpmn-icon-subprocess-collapsed\",target:{type:\"bpmn:SubProcess\",isExpanded:!1}}],ec=[{label:\"Sub Process\",actionName:\"replace-with-subprocess\",className:\"bpmn-icon-subprocess-expanded\",target:{type:\"bpmn:SubProcess\",isExpanded:!0}},{label:\"Event Sub Process\",actionName:\"replace-with-event-subprocess\",className:\"bpmn-icon-event-subprocess-expanded\",target:{type:\"bpmn:SubProcess\",triggeredByEvent:!0,isExpanded:!0}}],tc=[{label:\"Sub Process\",actionName:\"replace-with-subprocess\",className:\"bpmn-icon-subprocess-expanded\",target:{type:\"bpmn:SubProcess\",isExpanded:!0}},{label:\"Transaction\",actionName:\"replace-with-transaction\",className:\"bpmn-icon-transaction\",target:{type:\"bpmn:Transaction\",isExpanded:!0}}],nc=[{label:\"Task\",actionName:\"replace-with-task\",className:\"bpmn-icon-task\",target:{type:\"bpmn:Task\"}},{label:\"Send Task\",actionName:\"replace-with-send-task\",className:\"bpmn-icon-send\",target:{type:\"bpmn:SendTask\"}},{label:\"Receive Task\",actionName:\"replace-with-receive-task\",className:\"bpmn-icon-receive\",target:{type:\"bpmn:ReceiveTask\"}},{label:\"User Task\",actionName:\"replace-with-user-task\",className:\"bpmn-icon-user\",target:{type:\"bpmn:UserTask\"}},{label:\"Manual Task\",actionName:\"replace-with-manual-task\",className:\"bpmn-icon-manual\",target:{type:\"bpmn:ManualTask\"}},{label:\"Business Rule Task\",actionName:\"replace-with-rule-task\",className:\"bpmn-icon-business-rule\",target:{type:\"bpmn:BusinessRuleTask\"}},{label:\"Service Task\",actionName:\"replace-with-service-task\",className:\"bpmn-icon-service\",target:{type:\"bpmn:ServiceTask\"}},{label:\"Script Task\",actionName:\"replace-with-script-task\",className:\"bpmn-icon-script\",target:{type:\"bpmn:ScriptTask\"}},{label:\"Call Activity\",actionName:\"replace-with-call-activity\",className:\"bpmn-icon-call-activity\",target:{type:\"bpmn:CallActivity\"}},{label:\"Sub Process (collapsed)\",actionName:\"replace-with-collapsed-subprocess\",className:\"bpmn-icon-subprocess-collapsed\",target:{type:\"bpmn:SubProcess\",isExpanded:!1}},{label:\"Sub Process (expanded)\",actionName:\"replace-with-expanded-subprocess\",className:\"bpmn-icon-subprocess-expanded\",target:{type:\"bpmn:SubProcess\",isExpanded:!0}}],ic=[{label:\"Message Boundary Event\",actionName:\"replace-with-message-boundary\",className:\"bpmn-icon-intermediate-event-catch-message\",target:{type:\"bpmn:BoundaryEvent\",eventDefinitionType:\"bpmn:MessageEventDefinition\"}},{label:\"Timer Boundary Event\",actionName:\"replace-with-timer-boundary\",className:\"bpmn-icon-intermediate-event-catch-timer\",target:{type:\"bpmn:BoundaryEvent\",eventDefinitionType:\"bpmn:TimerEventDefinition\"}},{label:\"Escalation Boundary Event\",actionName:\"replace-with-escalation-boundary\",className:\"bpmn-icon-intermediate-event-catch-escalation\",target:{type:\"bpmn:BoundaryEvent\",eventDefinitionType:\"bpmn:EscalationEventDefinition\"}},{label:\"Conditional Boundary Event\",actionName:\"replace-with-conditional-boundary\",className:\"bpmn-icon-intermediate-event-catch-condition\",target:{type:\"bpmn:BoundaryEvent\",eventDefinitionType:\"bpmn:ConditionalEventDefinition\"}},{label:\"Error Boundary Event\",actionName:\"replace-with-error-boundary\",className:\"bpmn-icon-intermediate-event-catch-error\",target:{type:\"bpmn:BoundaryEvent\",eventDefinitionType:\"bpmn:ErrorEventDefinition\"}},{label:\"Cancel Boundary Event\",actionName:\"replace-with-cancel-boundary\",className:\"bpmn-icon-intermediate-event-catch-cancel\",target:{type:\"bpmn:BoundaryEvent\",eventDefinitionType:\"bpmn:CancelEventDefinition\"}},{label:\"Signal Boundary Event\",actionName:\"replace-with-signal-boundary\",className:\"bpmn-icon-intermediate-event-catch-signal\",target:{type:\"bpmn:BoundaryEvent\",eventDefinitionType:\"bpmn:SignalEventDefinition\"}},{label:\"Compensation Boundary Event\",actionName:\"replace-with-compensation-boundary\",className:\"bpmn-icon-intermediate-event-catch-compensation\",target:{type:\"bpmn:BoundaryEvent\",eventDefinitionType:\"bpmn:CompensateEventDefinition\"}},{label:\"Message Boundary Event (non-interrupting)\",actionName:\"replace-with-non-interrupting-message-boundary\",className:\"bpmn-icon-intermediate-event-catch-non-interrupting-message\",target:{type:\"bpmn:BoundaryEvent\",eventDefinitionType:\"bpmn:MessageEventDefinition\",cancelActivity:!1}},{label:\"Timer Boundary Event (non-interrupting)\",actionName:\"replace-with-non-interrupting-timer-boundary\",className:\"bpmn-icon-intermediate-event-catch-non-interrupting-timer\",target:{type:\"bpmn:BoundaryEvent\",eventDefinitionType:\"bpmn:TimerEventDefinition\",cancelActivity:!1}},{label:\"Escalation Boundary Event (non-interrupting)\",actionName:\"replace-with-non-interrupting-escalation-boundary\",className:\"bpmn-icon-intermediate-event-catch-non-interrupting-escalation\",target:{type:\"bpmn:BoundaryEvent\",eventDefinitionType:\"bpmn:EscalationEventDefinition\",cancelActivity:!1}},{label:\"Conditional Boundary Event (non-interrupting)\",actionName:\"replace-with-non-interrupting-conditional-boundary\",className:\"bpmn-icon-intermediate-event-catch-non-interrupting-condition\",target:{type:\"bpmn:BoundaryEvent\",eventDefinitionType:\"bpmn:ConditionalEventDefinition\",cancelActivity:!1}},{label:\"Signal Boundary Event (non-interrupting)\",actionName:\"replace-with-non-interrupting-signal-boundary\",className:\"bpmn-icon-intermediate-event-catch-non-interrupting-signal\",target:{type:\"bpmn:BoundaryEvent\",eventDefinitionType:\"bpmn:SignalEventDefinition\",cancelActivity:!1}}],oc=[{label:\"Message Start Event\",actionName:\"replace-with-message-start\",className:\"bpmn-icon-start-event-message\",target:{type:\"bpmn:StartEvent\",eventDefinitionType:\"bpmn:MessageEventDefinition\"}},{label:\"Timer Start Event\",actionName:\"replace-with-timer-start\",className:\"bpmn-icon-start-event-timer\",target:{type:\"bpmn:StartEvent\",eventDefinitionType:\"bpmn:TimerEventDefinition\"}},{label:\"Conditional Start Event\",actionName:\"replace-with-conditional-start\",className:\"bpmn-icon-start-event-condition\",target:{type:\"bpmn:StartEvent\",eventDefinitionType:\"bpmn:ConditionalEventDefinition\"}},{label:\"Signal Start Event\",actionName:\"replace-with-signal-start\",className:\"bpmn-icon-start-event-signal\",target:{type:\"bpmn:StartEvent\",eventDefinitionType:\"bpmn:SignalEventDefinition\"}},{label:\"Error Start Event\",actionName:\"replace-with-error-start\",className:\"bpmn-icon-start-event-error\",target:{type:\"bpmn:StartEvent\",eventDefinitionType:\"bpmn:ErrorEventDefinition\"}},{label:\"Escalation Start Event\",actionName:\"replace-with-escalation-start\",className:\"bpmn-icon-start-event-escalation\",target:{type:\"bpmn:StartEvent\",eventDefinitionType:\"bpmn:EscalationEventDefinition\"}},{label:\"Compensation Start Event\",actionName:\"replace-with-compensation-start\",className:\"bpmn-icon-start-event-compensation\",target:{type:\"bpmn:StartEvent\",eventDefinitionType:\"bpmn:CompensateEventDefinition\"}},{label:\"Message Start Event (non-interrupting)\",actionName:\"replace-with-non-interrupting-message-start\",className:\"bpmn-icon-start-event-non-interrupting-message\",target:{type:\"bpmn:StartEvent\",eventDefinitionType:\"bpmn:MessageEventDefinition\",isInterrupting:!1}},{label:\"Timer Start Event (non-interrupting)\",actionName:\"replace-with-non-interrupting-timer-start\",className:\"bpmn-icon-start-event-non-interrupting-timer\",target:{type:\"bpmn:StartEvent\",eventDefinitionType:\"bpmn:TimerEventDefinition\",isInterrupting:!1}},{label:\"Conditional Start Event (non-interrupting)\",actionName:\"replace-with-non-interrupting-conditional-start\",className:\"bpmn-icon-start-event-non-interrupting-condition\",target:{type:\"bpmn:StartEvent\",eventDefinitionType:\"bpmn:ConditionalEventDefinition\",isInterrupting:!1}},{label:\"Signal Start Event (non-interrupting)\",actionName:\"replace-with-non-interrupting-signal-start\",className:\"bpmn-icon-start-event-non-interrupting-signal\",target:{type:\"bpmn:StartEvent\",eventDefinitionType:\"bpmn:SignalEventDefinition\",isInterrupting:!1}},{label:\"Escalation Start Event (non-interrupting)\",actionName:\"replace-with-non-interrupting-escalation-start\",className:\"bpmn-icon-start-event-non-interrupting-escalation\",target:{type:\"bpmn:StartEvent\",eventDefinitionType:\"bpmn:EscalationEventDefinition\",isInterrupting:!1}}],rc=[{label:\"Sequence Flow\",actionName:\"replace-with-sequence-flow\",className:\"bpmn-icon-connection\"},{label:\"Default Flow\",actionName:\"replace-with-default-flow\",className:\"bpmn-icon-default-flow\"},{label:\"Conditional Flow\",actionName:\"replace-with-conditional-flow\",className:\"bpmn-icon-conditional-flow\"}],ac=[{label:\"Expanded Pool\",actionName:\"replace-with-expanded-pool\",className:\"bpmn-icon-participant\",target:{type:\"bpmn:Participant\",isExpanded:!0}},{label:\"Collapsed Pool\",actionName:\"replace-with-collapsed-pool\",className:\"bpmn-icon-lane\",target:{type:\"bpmn:Participant\",isExpanded:!1}}];function sc(e,t,n,i,o,r){this._popupMenu=e,this._modeling=t,this._moddle=n,this._bpmnReplace=i,this._rules=o,this._translate=r,this.register()}sc.$inject=[\"popupMenu\",\"modeling\",\"moddle\",\"bpmnReplace\",\"rules\",\"translate\"],sc.prototype.register=function(){this._popupMenu.registerProvider(\"bpmn-replace\",this)},sc.prototype.getEntries=function(e){var t,n=e.businessObject;if(!this._rules.allowed(\"shape.replace\",{element:e}))return[];var i=Ks(e);return Mi(n,\"bpmn:StartEvent\")&&!Bi(n.$parent)?(t=E(Ys,i),this._createEntries(e,t)):Mi(n,\"bpmn:Participant\")?(t=E(ac,function(e){return ki(n)!==e.target.isExpanded}),this._createEntries(e,t)):Mi(n,\"bpmn:StartEvent\")&&Bi(n.$parent)?(t=E(oc,function(t){var n=!1!==t.target.isInterrupting,o=Ai(e).isInterrupting===n;return i(t)||!i(t)&&!o}),this._createEntries(e,t)):Mi(n,\"bpmn:EndEvent\")?(t=E(Zs,function(e){return!(\"bpmn:CancelEventDefinition\"==e.target.eventDefinitionType&&!Mi(n.$parent,\"bpmn:Transaction\"))&&i(e)}),this._createEntries(e,t)):Mi(n,\"bpmn:BoundaryEvent\")?(t=E(ic,function(e){var t=e.target;if(\"bpmn:CancelEventDefinition\"==t.eventDefinition&&!Mi(n.attachedToRef,\"bpmn:Transaction\"))return!1;var o=!1!==t.cancelActivity,r=n.cancelActivity==o;return i(e)||!i(e)&&!r}),this._createEntries(e,t)):Mi(n,\"bpmn:IntermediateCatchEvent\")||Mi(n,\"bpmn:IntermediateThrowEvent\")?(t=E(Xs,i),this._createEntries(e,t)):Mi(n,\"bpmn:Gateway\")?(t=E(Qs,i),this._createEntries(e,t)):Mi(n,\"bpmn:Transaction\")?(t=E(ec,i),this._createEntries(e,t)):Bi(n)&&ki(n)?(t=E(tc,i),this._createEntries(e,t)):Mi(n,\"bpmn:SubProcess\")&&ki(n)?(t=E(Js,i),this._createEntries(e,t)):Mi(n,\"bpmn:AdHocSubProcess\")&&!ki(n)?(t=E(nc,function(t){var n=t.target,i=\"bpmn:SubProcess\"===n.type,o=!0===n.isExpanded;return Ks(e)&&(!i||o)}),this._createEntries(e,t)):Mi(n,\"bpmn:SequenceFlow\")?this._createSequenceFlowEntries(e,rc):Mi(n,\"bpmn:FlowNode\")?(t=E(nc,i),Mi(n,\"bpmn:SubProcess\")&&!ki(n)&&(t=E(t,function(e){return\"Sub Process (collapsed)\"!==e.label})),this._createEntries(e,t)):[]},sc.prototype.getHeaderEntries=function(e){var t=[];return Mi(e,\"bpmn:Activity\")&&!Bi(e)&&(t=t.concat(this._getLoopEntries(e))),!Mi(e,\"bpmn:SubProcess\")||Mi(e,\"bpmn:Transaction\")||Bi(e)||t.push(this._getAdHocEntry(e)),t},sc.prototype._createEntries=function(e,t){var n=[],i=this;return S(t,function(t){var o=i._createMenuEntry(t,e);n.push(o)}),n},sc.prototype._createSequenceFlowEntries=function(e,t){var n=Ai(e),i=[],o=this._modeling,r=this._moddle,a=this;return S(t,function(t){switch(t.actionName){case\"replace-with-default-flow\":n.sourceRef.default!==n&&(Mi(n.sourceRef,\"bpmn:ExclusiveGateway\")||Mi(n.sourceRef,\"bpmn:InclusiveGateway\")||Mi(n.sourceRef,\"bpmn:ComplexGateway\")||Mi(n.sourceRef,\"bpmn:Activity\"))&&i.push(a._createMenuEntry(t,e,function(){o.updateProperties(e.source,{default:n})}));break;case\"replace-with-conditional-flow\":!n.conditionExpression&&Mi(n.sourceRef,\"bpmn:Activity\")&&i.push(a._createMenuEntry(t,e,function(){var t=r.create(\"bpmn:FormalExpression\",{body:\"\"});o.updateProperties(e,{conditionExpression:t})}));break;default:if(Mi(n.sourceRef,\"bpmn:Activity\")&&n.conditionExpression)return i.push(a._createMenuEntry(t,e,function(){o.updateProperties(e,{conditionExpression:void 0})}));if((Mi(n.sourceRef,\"bpmn:ExclusiveGateway\")||Mi(n.sourceRef,\"bpmn:InclusiveGateway\")||Mi(n.sourceRef,\"bpmn:ComplexGateway\")||Mi(n.sourceRef,\"bpmn:Activity\"))&&n.sourceRef.default===n)return i.push(a._createMenuEntry(t,e,function(){o.updateProperties(e.source,{default:void 0})}))}}),i},sc.prototype._createMenuEntry=function(e,t,n){var i=this._translate,o=this._bpmnReplace.replaceElement;return n=n||function(){return o(t,e.target)},{label:i(e.label),className:e.className,id:e.actionName,action:n}},sc.prototype._getLoopEntries=function(e){var t=this,n=this._translate;function i(n,i){var o;i.active?o=void 0:(o=t._moddle.create(i.options.loopCharacteristics),i.options.isSequential&&(o.isSequential=i.options.isSequential)),t._modeling.updateProperties(e,{loopCharacteristics:o})}var o,r,a,s=Ai(e).loopCharacteristics;return s&&(o=s.isSequential,r=void 0===s.isSequential,a=void 0!==s.isSequential&&!s.isSequential),[{id:\"toggle-parallel-mi\",className:\"bpmn-icon-parallel-mi-marker\",title:n(\"Parallel Multi Instance\"),active:a,action:i,options:{loopCharacteristics:\"bpmn:MultiInstanceLoopCharacteristics\",isSequential:!1}},{id:\"toggle-sequential-mi\",className:\"bpmn-icon-sequential-mi-marker\",title:n(\"Sequential Multi Instance\"),active:o,action:i,options:{loopCharacteristics:\"bpmn:MultiInstanceLoopCharacteristics\",isSequential:!0}},{id:\"toggle-loop\",className:\"bpmn-icon-loop-marker\",title:n(\"Loop\"),active:r,action:i,options:{loopCharacteristics:\"bpmn:StandardLoopCharacteristics\"}}]},sc.prototype._getAdHocEntry=function(e){var t=this._translate,n=Mi(Ai(e),\"bpmn:AdHocSubProcess\"),i=this._bpmnReplace.replaceElement;return{id:\"toggle-adhoc\",className:\"bpmn-icon-ad-hoc-marker\",title:t(\"Ad-hoc\"),active:n,action:function(t,o){return i(e,n?{type:\"bpmn:SubProcess\"}:{type:\"bpmn:AdHocSubProcess\"})}}};var cc={__depends__:[Ls,Us],__init__:[\"replaceMenuProvider\"],replaceMenuProvider:[\"type\",sc]},pc=Math.max,lc=Math.min,uc=20;function hc(e,t){return{top:e.top-t.top,right:e.right-t.right,bottom:e.bottom-t.bottom,left:e.left-t.left}}function dc(e,t,n){var i=t[e],o=n.min&&n.min[e],r=n.max&&n.max[e];return g(o)&&(i=(/top|left/.test(e)?lc:pc)(i,o)),g(r)&&(i=(/top|left/.test(e)?pc:lc)(i,r)),i}function mc(e,t){return void 0!==e?e:uc}function fc(e){return!e.waypoints&&\"label\"!==e.type}function yc(e,t){var n;if((n=void 0===e.length?E(e.children,fc):e).length)return function(e,t){var n,i,o,r;return\"object\"==typeof t?(n=mc(t.left),i=mc(t.right),o=mc(t.top),r=mc(t.bottom)):n=i=o=r=mc(t),{x:e.x-n,y:e.y-o,width:e.width+n+i,height:e.height+o+r}}(Et(n),t)}var gc=Math.abs;var vc=[\"bpmn:Participant\",\"bpmn:Process\",\"bpmn:SubProcess\"];function bc(e,t){return t=t||[],e.children.filter(function(e){Mi(e,\"bpmn:Lane\")&&(bc(e,t),t.push(e))}),t}function xc(e){return e.children.filter(function(e){return Mi(e,\"bpmn:Lane\")})}function _c(e){return function(e,t){for(\"string\"==typeof t&&(t=[t]);e=e.parent;)if(ia(e,t))return e;return null}(e,vc)||e}function wc(e,t){var n=_c(e),i=bc(n,Mi(n,\"bpmn:Process\")?[]:[n]),o=So(e),r=So(t),a=function(e,t){return hc(So(t),So(e))}(e,t),s=[];return i.forEach(function(t){if(t!==e){var n,i,c=0,p=a.right,l=0,u=a.left,h=So(t);a.top&&(gc(h.bottom-o.top)<10&&(l=r.top-h.bottom),gc(h.top-o.top)<5&&(c=r.top-h.top)),a.bottom&&(gc(h.top-o.bottom)<10&&(c=r.bottom-h.top),gc(h.bottom-o.bottom)<5&&(l=r.bottom-h.bottom)),(c||p||l||u)&&s.push({shape:t,newBounds:(n=t,i={top:c,right:p,bottom:l,left:u},{x:n.x+(i.left||0),y:n.y+(i.top||0),width:n.width-(i.left||0)+(i.right||0),height:n.height-(i.top||0)+(i.bottom||0)})})}}),s}function Ec(e,t,n,i,o,r,a,s,c,p,l,u){e=e||{},i.registerProvider(this),this._contextPad=i,this._modeling=o,this._elementFactory=r,this._connect=a,this._create=s,this._popupMenu=c,this._canvas=p,this._rules=l,this._translate=u,!1!==e.autoPlace&&(this._autoPlace=t.get(\"autoPlace\",!1)),n.on(\"create.end\",250,function(e){var t=e.context.shape;if(Io(e)){var n=i.getEntries(t);n.replace&&n.replace.action.click(e,t)}})}function Sc(e,t,n){var i=e.$instanceOf(t),o=!1;return S(e.eventDefinitions||[],function(e){e.$type===n&&(o=!0)}),i&&o}Ec.$inject=[\"config.contextPad\",\"injector\",\"eventBus\",\"contextPad\",\"modeling\",\"elementFactory\",\"connect\",\"create\",\"popupMenu\",\"canvas\",\"rules\",\"translate\"],Ec.prototype.getContextPadEntries=function(e){var t=this._contextPad,n=this._modeling,i=this._elementFactory,o=this._connect,r=this._create,a=this._popupMenu,s=this._canvas,c=this._rules,p=this._autoPlace,l=this._translate,u={};if(\"label\"===e.type)return u;var h=e.businessObject;function d(e,t){o.start(e,t)}function m(e,t,n,o){function a(t,n){var a=i.createShape(W({type:e},o));r.start(t,a,n)}return\"string\"!=typeof n&&(o=n,n=l(\"Append {type}\",{type:e.replace(/^bpmn:/,\"\")})),{group:\"model\",className:t,title:n,action:{dragstart:a,click:p?function(t,n){var r=i.createShape(W({type:e},o));p.append(n,r)}:a}}}function y(e){return function(i,o){n.splitLane(o,e),t.open(o,!0)}}if(ia(h,[\"bpmn:Lane\",\"bpmn:Participant\"])&&ki(h)){var g=xc(e);W(u,{\"lane-insert-above\":{group:\"lane-insert-above\",className:\"bpmn-icon-lane-insert-above\",title:l(\"Add Lane above\"),action:{click:function(e,t){n.addLane(t,\"top\")}}}}),g.length<2&&(e.height>=120&&W(u,{\"lane-divide-two\":{group:\"lane-divide\",className:\"bpmn-icon-lane-divide-two\",title:l(\"Divide into two Lanes\"),action:{click:y(2)}}}),e.height>=180&&W(u,{\"lane-divide-three\":{group:\"lane-divide\",className:\"bpmn-icon-lane-divide-three\",title:l(\"Divide into three Lanes\"),action:{click:y(3)}}})),W(u,{\"lane-insert-below\":{group:\"lane-insert-below\",className:\"bpmn-icon-lane-insert-below\",title:l(\"Add Lane below\"),action:{click:function(e,t){n.addLane(t,\"bottom\")}}}})}Mi(h,\"bpmn:FlowNode\")&&(Mi(h,\"bpmn:EventBasedGateway\")?W(u,{\"append.receive-task\":m(\"bpmn:ReceiveTask\",\"bpmn-icon-receive-task\"),\"append.message-intermediate-event\":m(\"bpmn:IntermediateCatchEvent\",\"bpmn-icon-intermediate-event-catch-message\",l(\"Append MessageIntermediateCatchEvent\"),{eventDefinitionType:\"bpmn:MessageEventDefinition\"}),\"append.timer-intermediate-event\":m(\"bpmn:IntermediateCatchEvent\",\"bpmn-icon-intermediate-event-catch-timer\",l(\"Append TimerIntermediateCatchEvent\"),{eventDefinitionType:\"bpmn:TimerEventDefinition\"}),\"append.condtion-intermediate-event\":m(\"bpmn:IntermediateCatchEvent\",\"bpmn-icon-intermediate-event-catch-condition\",l(\"Append ConditionIntermediateCatchEvent\"),{eventDefinitionType:\"bpmn:ConditionalEventDefinition\"}),\"append.signal-intermediate-event\":m(\"bpmn:IntermediateCatchEvent\",\"bpmn-icon-intermediate-event-catch-signal\",l(\"Append SignalIntermediateCatchEvent\"),{eventDefinitionType:\"bpmn:SignalEventDefinition\"})}):Sc(h,\"bpmn:BoundaryEvent\",\"bpmn:CompensateEventDefinition\")?W(u,{\"append.compensation-activity\":m(\"bpmn:Task\",\"bpmn-icon-task\",l(\"Append compensation activity\"),{isForCompensation:!0})}):Mi(h,\"bpmn:EndEvent\")||h.isForCompensation||Sc(h,\"bpmn:IntermediateThrowEvent\",\"bpmn:LinkEventDefinition\")||Bi(h)||W(u,{\"append.end-event\":m(\"bpmn:EndEvent\",\"bpmn-icon-end-event-none\"),\"append.gateway\":m(\"bpmn:ExclusiveGateway\",\"bpmn-icon-gateway-none\",l(\"Append Gateway\")),\"append.append-task\":m(\"bpmn:Task\",\"bpmn-icon-task\"),\"append.intermediate-event\":m(\"bpmn:IntermediateThrowEvent\",\"bpmn-icon-intermediate-event-none\",l(\"Append Intermediate/Boundary Event\"))})),a.isEmpty(e,\"bpmn-replace\")||W(u,{replace:{group:\"edit\",className:\"bpmn-icon-screw-wrench\",title:l(\"Change type\"),action:{click:function(e,n){var i=W(function(e){var n=s.getContainer(),i=t.getPad(e).html,o=n.getBoundingClientRect(),r=i.getBoundingClientRect(),a=r.top-o.top;return{x:r.left-o.left,y:a+r.height+5}}(n),{cursor:{x:e.x,y:e.y}});a.open(n,\"bpmn-replace\",i)}}}}),ia(h,[\"bpmn:FlowNode\",\"bpmn:InteractionNode\",\"bpmn:DataObjectReference\",\"bpmn:DataStoreReference\"])&&W(u,{\"append.text-annotation\":m(\"bpmn:TextAnnotation\",\"bpmn-icon-text-annotation\"),connect:{group:\"connect\",className:\"bpmn-icon-connection-multi\",title:l(\"Connect using \"+(h.isForCompensation?\"\":\"Sequence/MessageFlow or \")+\"Association\"),action:{click:d,dragstart:d}}}),ia(h,[\"bpmn:DataObjectReference\",\"bpmn:DataStoreReference\"])&&W(u,{connect:{group:\"connect\",className:\"bpmn-icon-connection-multi\",title:l(\"Connect using DataInputAssociation\"),action:{click:d,dragstart:d}}});var v=c.allowed(\"elements.delete\",{elements:[e]});return f(v)&&(v=v[0]===e),v&&W(u,{delete:{group:\"edit\",className:\"bpmn-icon-trash\",title:l(\"Remove\"),action:{click:function(t){n.removeElements([e])}}}}),u};var Pc={__depends__:[_s,Es,Zo,Ts,Ds,cc],__init__:[\"contextPadProvider\"],contextPadProvider:[\"type\",Ec]};function Cc(){}Cc.prototype.get=function(){return this._data},Cc.prototype.set=function(e){this._data=e},Cc.prototype.clear=function(){var e=this._data;return delete this._data,e},Cc.prototype.isEmpty=function(){return!this._data};var Tc={clipboard:[\"type\",Cc]};function Rc(e,t,n,i,o,r){this._eventBus=e,this._modeling=t,this._elementFactory=n,this._rules=i,this._canvas=r,this._clipboard=o,this._descriptors=[],this.registerDescriptor(function(e,t){return t.priority=1,t.id=e.id,e.parent&&(t.parent=e.parent.id),e.labelTarget&&(t.priority=4,t.labelTarget=e.labelTarget.id),e.host&&(t.priority=2,t.host=e.host.id),\"number\"==typeof e.x&&(t.x=e.x,t.y=e.y),e.width&&(t.width=e.width,t.height=e.height),e.waypoints&&(t.priority=3,t.waypoints=[],S(e.waypoints,function(e){var n={x:e.x,y:e.y};e.original&&(n.original={x:e.original.x,y:e.original.y}),t.waypoints.push(n)})),e.source&&e.target&&(t.source=e.source.id,t.target=e.target.id),t})}Rc.$inject=[\"eventBus\",\"modeling\",\"elementFactory\",\"rules\",\"clipboard\",\"canvas\"],Rc.prototype.copy=function(e){var t,n,i=this._clipboard;if(f(e)||(e=e?[e]:[]),e.length)return t=this.createTree(e),n=this._bbox=Tr(Et(t.allShapes)),delete t.allShapes,S(t,function(e){S(e,function(t){var i,o;t.labelTarget?(o=_(e,L({id:t.labelTarget})),i=o.waypoints?Rr(t,o.waypoints[0]):Rr(t,o)):3===t.priority?(i=[],S(t.waypoints,function(e){var t=Rr(e,n);i.push(t)})):i=Rr(t,n),t.delta=i})}),this._eventBus.fire(\"elements.copy\",{context:{tree:t}}),0===Object.keys(t).length?i.clear():i.set(t),this._eventBus.fire(\"elements.copied\",{context:{tree:t}}),t},Rc.prototype.paste=function(e){var t,n=this._clipboard,i=this._modeling,o=this._eventBus,r=this._rules,a=n.get(),s=e.element,c=e.point;n.isEmpty()||(t=C(a,function(e,t,n){var i=parseInt(n,10);return isNaN(i)?e:(e[i]=t,e)},{}),r.allowed(\"elements.paste\",{tree:t,target:s})?i.pasteElements(t,s,c):o.fire(\"elements.paste.rejected\",{context:{tree:t,position:c,target:s}}))},Rc.prototype._computeDelta=function(e,t){var n=this._bbox,i={};return t.labelTarget?Rr(t,t.labelTarget):(3===t.priority?(i=[],S(t.waypoints,function(e){var t=Rr(e,n);i.push(t)})):i=Rr(t,n),i)},Rc.prototype.hasRelations=function(e,t){var n,i;return!(t.waypoints&&(n=_(e,L({id:t.source.id})),i=_(e,L({id:t.target.id})),!n||!i))&&!(t.labelTarget&&!_(e,L({id:t.labelTarget.id})))},Rc.prototype.registerDescriptor=function(e){if(\"function\"!=typeof e)throw new Error(\"the descriptor must be a function\");if(-1!==this._descriptors.indexOf(e))throw new Error(\"this descriptor is already registered\");this._descriptors.push(e)},Rc.prototype._executeDescriptors=function(e){return e.descriptor||(e.descriptor={}),S(this._descriptors,function(t){e.descriptor=t(e.element,e.descriptor)}),e},Rc.prototype.createTree=function(e){var t,n=this._rules,i=this,o={},r=[],a=function(e){var t={},n=[],i=[],o=[];return S(e,function(e){var i=e.parent;t[i.id]||(t[i.id]=[]),-1===n.indexOf(i.id)&&n.push(i.id),t[i.id].push(e)}),S(n,function(e){S(t[e],function(e){t[e.id]&&o.push(e.id)})}),S(n,function(e){-1===o.indexOf(e)&&(i=i.concat(t[e]))}),i}(e);function s(e){var t=w(r,L({element:e.element}));if(-1===t)return r.push(e);r[t].depth<e.depth&&(r.splice(t,1),r.push(e))}return o.allShapes=[],xt(a,function(e,t,n){var i=e.children;if(!e.labelTarget)return S(e.labels,function(e){s({element:e,depth:n})}),S([e.attachers,e.incoming,e.outgoing],function(e){e&&e.length&&S(e,function(e){S(e.labels,function(e){s({element:e,depth:n})}),s({element:e,depth:n})})}),s({element:e,depth:n}),i||void 0}),r=O(r=M(r,function(e){return i._executeDescriptors(e)}),function(e){return e.descriptor.priority}),t=M(r,function(e){return e.element}),S(r,function(e){var r,a,s=e.depth;i.hasRelations(o.allShapes,e.element)&&(r=t,a=e.element,n.allowed(\"element.copy\",{collection:r,element:a})&&(o.allShapes.push(e.element),o[s]||(o[s]=[]),o[s].push(e.descriptor)))}),o};var Mc={__depends__:[Tc,La,ka],__init__:[\"copyPaste\"],copyPaste:[\"type\",Rc]};function Ac(e,t,n){S(n,function(n){void 0!==t[n]&&(e[n]=t[n])})}function kc(e,t,n,i,o,r){var a=new Vs(t,e);n.registerDescriptor(function(e,t){var n=t.oldBusinessObject=Ai(e),i={};return t.type=e.type,Ac(t,n.di,[\"isExpanded\"]),Ac(i,n.di,[\"fill\",\"stroke\"]),t.colors=i,\"label\"===e.type?t:(Ac(t,n,[\"processRef\",\"triggeredByEvent\"]),n.default&&(t.default=n.default.id),t)}),t.on(\"element.paste\",function(t){var n,i,s,c,p=t.descriptor,l=t.createdElements,u=p.parent,h=o.getRootElement(),d=p.oldBusinessObject;n=e.create(d.$type);var m=$s(d.$descriptor);m=E(m,function(e){return-1===Fs.indexOf(e.replace(/bpmn:/,\"\"))}),p.businessObject=a.clone(d,n,m),\"label\"!==p.type&&(Mi(u,\"bpmn:Process\")&&(p.parent=Mi(h,\"bpmn:Collaboration\")?h:u),\"bpmn:DataOutputAssociation\"!==p.type&&\"bpmn:DataInputAssociation\"!==p.type&&\"bpmn:MessageFlow\"!==p.type||(p.parent=h),Mi(u,\"bpmn:Lane\")&&(p.parent=u.parent),p.waypoints&&(i=l[p.source],s=l[p.target],i&&s&&(i=i.element,s=s.element),(c=r.canConnect(i,s))&&(p.type=c.type)),delete n.id,e._ensureId(n),\"bpmn:Participant\"===p.type&&p.processRef&&(p.processRef=n.processRef=e.create(\"bpmn:Process\")),Ac(n,p,[\"isExpanded\",\"triggeredByEvent\"]),function(e,t){S(t,function(t){e[t]&&delete e[t]})}(p,[\"triggeredByEvent\"]))})}kc.$inject=[\"bpmnFactory\",\"eventBus\",\"copyPaste\",\"clipboard\",\"canvas\",\"bpmnRules\"];var Bc={__depends__:[Mc],__init__:[\"bpmnCopyPaste\"],bpmnCopyPaste:[\"type\",kc]},Nc={horizontal:[\"x\",\"width\"],vertical:[\"y\",\"height\"]};function Dc(e){this._modeling=e,this._filters=[],this.registerFilter(function(e,t,n){var i,o=0,r=0;return S(e,function(e){e.waypoints||e.labelTarget||(o+=e[n],r+=1)}),i=Math.round(o/r),E(e,function(e){return e[n]<i+50})})}Dc.$inject=[\"modeling\"],Dc.prototype.registerFilter=function(e){if(\"function\"!=typeof e)throw new Error(\"the filter has to be a function\");this._filters.push(e)},Dc.prototype.trigger=function(e,t){var n,i,o=this._modeling;if(!(e.length<3||(this._setOrientation(t),i=this._filterElements(e),(n=this._createGroups(i)).length<=2)))return o.distributeElements(n,this._axis,this._dimension),n},Dc.prototype._filterElements=function(e){var t=this._filters,n=this._axis,i=this._dimension,o=[].concat(e);return t.length?(S(t,function(e){o=e(o,n,i)}),o):e},Dc.prototype._createGroups=function(e){var t=[],n=this,i=this._axis,o=this._dimension;if(!i)throw new Error('must have a defined \"axis\" and \"dimension\"');return S(O(e,i),function(e,r){var a,s=n._findRange(e,i,o),c=t[t.length-1];c&&n._hasIntersection(c.range,s)?t[t.length-1].elements.push(e):(a={range:s,elements:[e]},t.push(a))}),t},Dc.prototype._setOrientation=function(e){var t=Nc[e];this._axis=t[0],this._dimension=t[1]},Dc.prototype._hasIntersection=function(e,t){return Math.max(e.min,e.max)>=Math.min(t.min,t.max)&&Math.min(e.min,e.max)<=Math.max(t.min,t.max)},Dc.prototype._findRange=function(e){var t=e[this._axis];return{min:t+5,max:t+e[this._dimension]-5}};var Oc={__init__:[\"distributeElements\"],distributeElements:[\"type\",Dc]};function Lc(e){e.registerFilter(function(e){return E(e,function(e){var t=ia(e,[\"bpmn:Association\",\"bpmn:BoundaryEvent\",\"bpmn:DataInputAssociation\",\"bpmn:DataOutputAssociation\",\"bpmn:Lane\",\"bpmn:MessageFlow\",\"bpmn:Participant\",\"bpmn:SequenceFlow\",\"bpmn:TextAnnotation\"]);return!(e.labelTarget||t)})})}Lc.$inject=[\"distributeElements\"];var jc={__depends__:[Oc],__init__:[\"bpmnDistributeElements\"],bpmnDistributeElements:[\"type\",Lc]};function Ic(e,t){this._actions={};var n=this;e.on(\"diagram.init\",function(){n._registerDefaultActions(t),e.fire(\"editorActions.init\",{editorActions:n})})}function zc(e,t){return new Error(e+\" \"+t)}Ic.$inject=[\"eventBus\",\"injector\"],Ic.prototype._registerDefaultActions=function(e){var t=e.get(\"commandStack\",!1),n=e.get(\"modeling\",!1),i=e.get(\"selection\",!1),o=e.get(\"zoomScroll\",!1),r=e.get(\"copyPaste\",!1),a=e.get(\"canvas\",!1),s=e.get(\"rules\",!1),c=e.get(\"mouseTracking\",!1),p=e.get(\"keyboardMove\",!1),l=e.get(\"keyboardMoveSelection\",!1);t&&(this.register(\"undo\",function(){t.undo()}),this.register(\"redo\",function(){t.redo()})),r&&i&&this.register(\"copy\",function(){var e=i.get();r.copy(e)}),c&&r&&this.register(\"paste\",function(){var e=c.getHoverContext();r.paste(e)}),o&&this.register(\"stepZoom\",function(e){o.stepZoom(e.value)}),a&&this.register(\"zoom\",function(e){a.zoom(e.value)}),n&&i&&s&&this.register(\"removeSelection\",function(){var e=i.get();if(e.length){var t,o=s.allowed(\"elements.delete\",{elements:e});!1!==o&&(t=f(o)?o:e).length&&n.removeElements(t.slice())}}),p&&this.register(\"moveCanvas\",function(e){p.moveCanvas(e)}),l&&this.register(\"moveSelection\",function(e){l.moveSelection(e.direction,e.accelerated)})},Ic.prototype.trigger=function(e,t){if(!this._actions[e])throw zc(e,\"is not a registered action\");return this._actions[e](t)},Ic.prototype.register=function(e,t){var n=this;if(\"string\"==typeof e)return this._registerAction(e,t);S(e,function(e,t){n._registerAction(t,e)})},Ic.prototype._registerAction=function(e,t){if(this.isRegistered(e))throw zc(e,\"is already registered\");this._actions[e]=t},Ic.prototype.unregister=function(e){if(!this.isRegistered(e))throw zc(e,\"is not a registered action\");this._actions[e]=void 0},Ic.prototype.getActions=function(){return Object.keys(this._actions)},Ic.prototype.isRegistered=function(e){return!!this._actions[e]};var Fc={__init__:[\"editorActions\"],editorActions:[\"type\",Ic]};function $c(e){e.invoke(Ic,this)}s()($c,Ic),$c.$inject=[\"injector\"],$c.prototype._registerDefaultActions=function(e){Ic.prototype._registerDefaultActions.call(this,e);var t=e.get(\"canvas\",!1),n=e.get(\"elementRegistry\",!1),i=e.get(\"selection\",!1),o=e.get(\"spaceTool\",!1),r=e.get(\"lassoTool\",!1),a=e.get(\"handTool\",!1),s=e.get(\"globalConnect\",!1),c=e.get(\"distributeElements\",!1),p=e.get(\"alignElements\",!1),l=e.get(\"directEditing\",!1),u=e.get(\"searchPad\",!1),h=e.get(\"modeling\",!1);t&&n&&i&&this._registerAction(\"selectElements\",function(){var e=t.getRootElement(),o=n.filter(function(t){return t!==e});return i.select(o),o}),o&&this._registerAction(\"spaceTool\",function(){o.toggle()}),r&&this._registerAction(\"lassoTool\",function(){r.toggle()}),a&&this._registerAction(\"handTool\",function(){a.toggle()}),s&&this._registerAction(\"globalConnectTool\",function(){s.toggle()}),i&&c&&this._registerAction(\"distributeElements\",function(e){var t=i.get(),n=e.type;t.length&&c.trigger(t,n)}),i&&p&&this._registerAction(\"alignElements\",function(e){var t=i.get(),n=[],o=e.type;t.length&&(n=E(t,function(e){return!Mi(e,\"bpmn:Lane\")}),p.trigger(n,o))}),i&&h&&this._registerAction(\"setColor\",function(e){var t=i.get();t.length&&h.setColor(t,e)}),i&&l&&this._registerAction(\"directEditing\",function(){var e=i.get();e.length&&l.activate(e[0])}),u&&this._registerAction(\"find\",function(){u.toggle()}),t&&h&&this._registerAction(\"moveToOrigin\",function(){var e,i,o=t.getRootElement();e=Et(i=Mi(o,\"bpmn:Collaboration\")?n.filter(function(e){return Mi(e.parent,\"bpmn:Collaboration\")}):n.filter(function(e){return e!==o&&!Mi(e.parent,\"bpmn:SubProcess\")})),h.moveElements(i,{x:-e.x,y:-e.y},o)})};var Vc={__depends__:[Fc],editorActions:[\"type\",$c]};function Hc(e){e.invoke(gr,this)}s()(Hc,gr),Hc.$inject=[\"injector\"],Hc.prototype.registerBindings=function(e,t){function n(n,i){t.isRegistered(n)&&e.addListener(i)}gr.prototype.registerBindings.call(this,e,t),n(\"selectElements\",function(n){var i=n.keyEvent;if(e.isKey([\"a\",\"A\"],i)&&e.isCmd(i))return t.trigger(\"selectElements\"),!0}),n(\"find\",function(n){var i=n.keyEvent;if(e.isKey([\"f\",\"F\"],i)&&e.isCmd(i))return t.trigger(\"find\"),!0}),n(\"spaceTool\",function(n){var i=n.keyEvent;if(!e.hasModifier(i))return e.isKey([\"s\",\"S\"],i)?(t.trigger(\"spaceTool\"),!0):void 0}),n(\"lassoTool\",function(n){var i=n.keyEvent;if(!e.hasModifier(i))return e.isKey([\"l\",\"L\"],i)?(t.trigger(\"lassoTool\"),!0):void 0}),n(\"handTool\",function(n){var i=n.keyEvent;if(!e.hasModifier(i))return e.isKey([\"h\",\"H\"],i)?(t.trigger(\"handTool\"),!0):void 0}),n(\"globalConnectTool\",function(n){var i=n.keyEvent;if(!e.hasModifier(i))return e.isKey([\"c\",\"C\"],i)?(t.trigger(\"globalConnectTool\"),!0):void 0}),n(\"directEditing\",function(n){var i=n.keyEvent;if(!e.hasModifier(i))return e.isKey([\"e\",\"E\"],i)?(t.trigger(\"directEditing\"),!0):void 0})};var Wc={__depends__:[vr],__init__:[\"keyboardBindings\"],keyboardBindings:[\"type\",Hc]},Gc={moveSpeed:1,moveSpeedAccelerated:10},qc=1500,Uc={ArrowLeft:\"left\",Left:\"left\",ArrowUp:\"up\",Up:\"up\",ArrowRight:\"right\",Right:\"right\",ArrowDown:\"down\",Down:\"down\"},Kc={left:function(e){return{x:-e,y:0}},up:function(e){return{x:0,y:-e}},right:function(e){return{x:e,y:0}},down:function(e){return{x:0,y:e}}};function Yc(e,t,n,i){var o=this;this._config=W({},Gc,e||{}),t.addListener(qc,function(e){var n=e.keyEvent,i=Uc[n.key];if(i&&!t.isCmd(n)){var r=t.isShift(n);return o.moveSelection(i,r),!0}}),this.moveSelection=function(e,t){var o=i.get();if(o.length){var r=this._config[t?\"moveSpeedAccelerated\":\"moveSpeed\"],a=Kc[e](r);n.moveElements(o,a)}}}Yc.$inject=[\"config.keyboardMoveSelection\",\"keyboard\",\"modeling\",\"selection\"];var Xc={__depends__:[vr,Zo],__init__:[\"keyboardMoveSelection\"],keyboardMoveSelection:[\"type\",Yc]};function Zc(e,t,n,i){e.on(\"element.changed\",function(i){var o=i.element;(o.parent||o===t.getRootElement())&&(i.gfx=n.getGraphics(o)),i.gfx&&e.fire(St(o)+\".changed\",i)}),e.on(\"elements.changed\",function(t){var n=t.elements;n.forEach(function(t){e.fire(\"element.changed\",{element:t})}),i.updateContainments(n)}),e.on(\"shape.changed\",function(e){i.update(\"shape\",e.element,e.gfx)}),e.on(\"connection.changed\",function(e){i.update(\"connection\",e.element,e.gfx)})}Zc.$inject=[\"eventBus\",\"canvas\",\"elementRegistry\",\"graphicsFactory\"];var Qc={__init__:[\"changeSupport\"],changeSupport:[\"type\",Zc]};function Jc(e,t,n){this._elementRegistry=e,this._canvas=t,this._styles=n}Jc.$inject=[\"elementRegistry\",\"canvas\",\"styles\"],Jc.prototype.getGfx=function(e){return this._elementRegistry.getGraphics(e)},Jc.prototype.addDragger=function(e,t){var n=this.getGfx(e),i=n.cloneNode(!0),o=n.getBoundingClientRect();return function(e){return e.waypoints}(e)&&function e(t){t.children&&S(t.children,function(t){e(t)});t.style.markerStart=\"\";t.style.markerEnd=\"\"}(i),Ce(i,this._styles.cls(\"djs-dragger\",[],{x:o.top,y:o.left})),we(t,i),i},Jc.prototype.addFrame=function(e,t){var n=Ie(\"rect\",{class:\"djs-resize-overlay\",width:e.width,height:e.height,x:e.x,y:e.y});return we(t,n),n};var ep={__init__:[\"previewSupport\"],previewSupport:[\"type\",Jc]};function tp(e,t,n,i){this._dragging=i,this._rules=t;var o=this;function r(e,t){var n,i=e.shape,r=e.direction,a=e.resizeConstraints;e.delta=t,n=function(e,t,n){var i=n.x,o=n.y;switch(t){case\"nw\":return{x:e.x+i,y:e.y+o,width:e.width-i,height:e.height-o};case\"sw\":return{x:e.x+i,y:e.y,width:e.width-i,height:e.height+o};case\"ne\":return{x:e.x,y:e.y+o,width:e.width+i,height:e.height-o};case\"se\":return{x:e.x,y:e.y,width:e.width+i,height:e.height+o};default:throw new Error(\"unrecognized direction: \"+t)}}(i,r,t),e.newBounds=function(e,t){if(!t)return e;var n=So(e);return Po({top:dc(\"top\",n,t),right:dc(\"right\",n,t),bottom:dc(\"bottom\",n,t),left:dc(\"left\",n,t)})}(n,a),e.canExecute=o.canResize(e)}e.on(\"resize.start\",function(e){var t,n,i;t=e.context,n=t.resizeConstraints,i=t.minBounds,void 0===n&&(void 0===i&&(i=o.computeMinResizeBox(t)),t.resizeConstraints={min:So(i)})}),e.on(\"resize.move\",function(e){var t={x:e.dx,y:e.dy};r(e.context,t)}),e.on(\"resize.end\",function(e){var t,i,o,r;t=e.context,i=t.shape,o=t.canExecute,r=t.newBounds,o&&(r=wo(r),n.resizeShape(i,r))})}tp.prototype.canResize=function(e){var t=this._rules,n=G(e,[\"newBounds\",\"shape\",\"delta\",\"direction\"]);return t.allowed(\"shape.resize\",n)},tp.prototype.activate=function(e,t,n){var i,o,r=this._dragging;if(\"string\"==typeof n&&(n={direction:n}),!(o=(i=W({shape:t},n)).direction))throw new Error(\"must provide a direction (nw|se|ne|sw)\");r.init(e,\"resize\",{autoActivate:!0,cursor:\"resize-\"+(/nw|se/.test(o)?\"nwse\":\"nesw\"),data:{shape:t,context:i}})},tp.prototype.computeMinResizeBox=function(e){var t=e.shape;return function(e,t,n,i){var o=So(t),r={top:/n/.test(e)?o.bottom-n.height:o.top,left:/w/.test(e)?o.right-n.width:o.left,bottom:/s/.test(e)?o.top+n.height:o.bottom,right:/e/.test(e)?o.left+n.width:o.right},a=i?So(i):r;return Po({top:lc(r.top,a.top),left:lc(r.left,a.left),bottom:pc(r.bottom,a.bottom),right:pc(r.right,a.right)})}(e.direction,t,e.minDimensions||{width:10,height:10},yc(t,e.childrenBoxPadding))},tp.$inject=[\"eventBus\",\"rules\",\"modeling\",\"dragging\"];var np=\"djs-resizing\",ip=\"resize-not-ok\",op=500;function rp(e,t,n){e.on(\"resize.move\",op,function(e){var i,o,r,a;i=e.context,o=i.shape,r=i.newBounds,(a=i.frame)||(a=i.frame=n.addFrame(o,t.getDefaultLayer()),t.addMarker(o,np)),r.width>5&&Ce(a,{x:r.x,width:r.width}),r.height>5&&Ce(a,{y:r.y,height:r.height}),i.canExecute?ke(a).remove(ip):ke(a).add(ip)}),e.on(\"resize.cleanup\",function(e){var n,i;n=e.context,i=n.shape,n.frame&&Ne(n.frame),t.removeMarker(i,np)})}rp.$inject=[\"eventBus\",\"canvas\",\"previewSupport\"];function ap(e,t,n,i){this._resize=i,this._canvas=t;var o=this;e.on(\"selection.changed\",function(e){var t=e.newSelection;o.removeResizers(),1===t.length&&S(t,V(o.addResizer,o))}),e.on(\"shape.changed\",function(e){var t=e.element;n.isSelected(t)&&(o.removeResizers(),o.addResizer(t))})}ap.prototype.makeDraggable=function(e,t,n){var i=this._resize;function o(t){jo(t)&&i.activate(t,e,n)}ce.bind(t,\"mousedown\",o),ce.bind(t,\"touchstart\",o)},ap.prototype._createResizer=function(e,t,n,i,o){var r=this._getResizersParent(),a=Ie(\"g\");ke(a).add(\"djs-resizer\"),ke(a).add(\"djs-resizer-\"+e.id),ke(a).add(\"djs-resizer-\"+o),we(r,a);var s=Ie(\"rect\");Ce(s,{x:-7,y:-7,width:5,height:5}),ke(s).add(\"djs-resizer-visual\"),we(a,s);var c=Ie(\"rect\");return Ce(c,{x:-7,y:-7,width:20,height:20}),ke(c).add(\"djs-resizer-hit\"),we(a,c),Zt(a,t,n,i),a},ap.prototype.createResizer=function(e,t){var n,i=So(e);n=\"nw\"===t?this._createResizer(e,i.left,i.top,0,t):\"ne\"===t?this._createResizer(e,i.right,i.top,90,t):\"se\"===t?this._createResizer(e,i.right,i.bottom,180,t):this._createResizer(e,i.left,i.bottom,270,t),this.makeDraggable(e,n,t)},ap.prototype.addResizer=function(e){this._resize.canResize({shape:e})&&(this.createResizer(e,\"nw\"),this.createResizer(e,\"ne\"),this.createResizer(e,\"se\"),this.createResizer(e,\"sw\"))},ap.prototype.removeResizers=function(){De(this._getResizersParent())},ap.prototype._getResizersParent=function(){return this._canvas.getLayer(\"resizers\")},ap.$inject=[\"eventBus\",\"canvas\",\"selection\",\"resize\"];var sp={__depends__:[La,Ma,ep],__init__:[\"resize\",\"resizePreview\",\"resizeHandles\"],resize:[\"type\",tp],resizePreview:[\"type\",rp],resizeHandles:[\"type\",ap]};function cp(e){return Mi(e,\"bpmn:FlowElement\")||Mi(e,\"bpmn:Participant\")||Mi(e,\"bpmn:Lane\")||Mi(e,\"bpmn:SequenceFlow\")||Mi(e,\"bpmn:MessageFlow\")?\"name\":Mi(e,\"bpmn:TextAnnotation\")?\"text\":void 0}function pp(e){var t=e.businessObject,n=cp(t);if(n)return t[n]||\"\"}function lp(e,t,n,i,o,r){function a(e,t){(t||ia(e,[\"bpmn:Task\",\"bpmn:TextAnnotation\"])||up(e))&&n.activate(e)}this._canvas=t,this._modeling=i,this._textRenderer=r,n.registerProvider(this),e.on(\"element.dblclick\",function(e){a(e.element,!0)}),e.on([\"element.mousedown\",\"drag.init\",\"canvas.viewbox.changing\",\"autoPlace\",\"popupMenu.open\"],function(e){n.isActive()&&n.complete()}),e.on([\"commandStack.changed\"],function(e){n.isActive()&&n.cancel()}),e.on(\"directEditing.activate\",function(e){o.removeResizers()}),e.on(\"create.end\",500,function(e){var t=e.shape,n=e.context.canExecute;e.isTouch||n&&a(t)}),e.on(\"autoPlace.end\",500,function(e){a(e.shape)})}function up(e){return Mi(e,\"bpmn:SubProcess\")&&!ki(e)}lp.$inject=[\"eventBus\",\"canvas\",\"directEditing\",\"modeling\",\"resizeHandles\",\"textRenderer\"],lp.prototype.activate=function(e){var t=pp(e);if(void 0!==t){var n={text:t};W(n,this.getEditingBBox(e));var i={};return(ia(e,[\"bpmn:Task\",\"bpmn:Participant\",\"bpmn:Lane\",\"bpmn:CallActivity\"])||up(e))&&W(i,{centerVertically:!0}),co(e)&&W(i,{autoResize:!0}),Mi(e,\"bpmn:TextAnnotation\")&&W(i,{resizable:!0,autoResize:!0}),W(n,{options:i}),n}},lp.prototype.getEditingBBox=function(e){var t=this._canvas,n=e.label||e,i=t.getAbsoluteBBox(n),o=i.x+i.width/2,r=i.y+i.height/2,a={x:i.x,y:i.y},s=t.zoom(),c=this._textRenderer.getDefaultStyle(),p=this._textRenderer.getExternalStyle(),l=p.fontSize*s,u=p.lineHeight,h=c.fontSize*s,d=c.lineHeight,m={fontFamily:this._textRenderer.getDefaultStyle().fontFamily,fontWeight:this._textRenderer.getDefaultStyle().fontWeight};(Mi(e,\"bpmn:Lane\")||function(e){return Mi(e,\"bpmn:Participant\")&&ki(e)}(e))&&(W(a,{width:i.height,height:30*s,x:i.x-i.height/2+15*s,y:r-30*s/2}),W(m,{fontSize:h+\"px\",lineHeight:d,paddingTop:7*s+\"px\",paddingBottom:7*s+\"px\",paddingLeft:5*s+\"px\",paddingRight:5*s+\"px\",transform:\"rotate(-90deg)\"})),(ia(e,[\"bpmn:Task\",\"bpmn:CallActivity\"])||function(e){return Mi(e,\"bpmn:Participant\")&&!ki(e)}(e)||up(e))&&(W(a,{width:i.width,height:i.height}),W(m,{fontSize:h+\"px\",lineHeight:d,paddingTop:7*s+\"px\",paddingBottom:7*s+\"px\",paddingLeft:5*s+\"px\",paddingRight:5*s+\"px\"})),function(e){return Mi(e,\"bpmn:SubProcess\")&&ki(e)}(e)&&(W(a,{width:i.width,x:i.x}),W(m,{fontSize:h+\"px\",lineHeight:d,paddingTop:7*s+\"px\",paddingBottom:7*s+\"px\",paddingLeft:5*s+\"px\",paddingRight:5*s+\"px\"}));var f=90*s,y=7*s,g=4*s;if(n.labelTarget&&(W(a,{width:f,height:i.height+y+g,x:o-f/2,y:i.y-y}),W(m,{fontSize:l+\"px\",lineHeight:u,paddingTop:y+\"px\",paddingBottom:g+\"px\"})),co(n)&&!po(n)&&!ho(n)){var v=uo(e),b=t.getAbsoluteBBox({x:v.x,y:v.y,width:0,height:0}),x=l+y+g;W(a,{width:f,height:x,x:b.x-f/2,y:b.y-x/2}),W(m,{fontSize:l+\"px\",lineHeight:u,paddingTop:y+\"px\",paddingBottom:g+\"px\"})}return Mi(e,\"bpmn:TextAnnotation\")&&(W(a,{width:i.width,height:i.height,minWidth:30*s,minHeight:10*s}),W(m,{textAlign:\"left\",paddingTop:5*s+\"px\",paddingBottom:7*s+\"px\",paddingLeft:7*s+\"px\",paddingRight:5*s+\"px\",fontSize:h+\"px\",lineHeight:d})),{bounds:a,style:m}},lp.prototype.update=function(e,t,n,i){var o,r,a;Mi(e,\"bpmn:TextAnnotation\")&&(r=this._canvas.getAbsoluteBBox(e),o={x:e.x,y:e.y,width:e.width/r.width*i.width,height:e.height/r.height*i.height}),(a=t)&&a.trim()||(t=null),this._modeling.updateLabel(e,t,o)};var hp=\"djs-element-hidden\",dp=\"djs-label-hidden\";function mp(e,t,n,i){var o,r,a,s=this,c=t.getDefaultLayer();e.on(\"directEditing.activate\",function(e){var n=e.active;if(Mi(o=n.element.label||n.element,\"bpmn:TextAnnotation\")){r=t.getAbsoluteBBox(o),a=Ie(\"g\");var p=i.getScaledPath(\"TEXT_ANNOTATION\",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:o.height,position:{mx:0,my:0}}),l=s.path=Ie(\"path\");Ce(l,{d:p,strokeWidth:2,stroke:fp(o)}),we(a,l),we(c,a),Qt(a,o.x,o.y)}Mi(o,\"bpmn:TextAnnotation\")||o.labelTarget?t.addMarker(o,hp):(Mi(o,\"bpmn:Task\")||Mi(o,\"bpmn:CallActivity\")||Mi(o,\"bpmn:SubProcess\")||Mi(o,\"bpmn:Participant\"))&&t.addMarker(o,dp)}),e.on(\"directEditing.resize\",function(e){if(Mi(o,\"bpmn:TextAnnotation\")){var t=e.height,n=e.dy,a=Math.max(o.height/r.height*(t+n),0),c=i.getScaledPath(\"TEXT_ANNOTATION\",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:a,position:{mx:0,my:0}});Ce(s.path,{d:c})}}),e.on([\"directEditing.complete\",\"directEditing.cancel\"],function(e){var n=e.active;n&&(t.removeMarker(n.element.label||n.element,hp),t.removeMarker(o,dp)),o=void 0,r=void 0,a&&(Ne(a),a=void 0)})}function fp(e,t){return Ai(e).di.get(\"stroke\")||t||\"black\"}mp.$inject=[\"eventBus\",\"canvas\",\"elementRegistry\",\"pathMap\"];var yp={__depends__:[Qc,sp,_s],__init__:[\"labelEditingProvider\",\"labelEditingPreview\"],labelEditingProvider:[\"type\",lp],labelEditingPreview:[\"type\",mp]};function gp(e,t){function n(e){if(po(e)){var n=function(e){var t=Co(e.label),n=Co(e),i=bp(n,t);if(o=i,-1===vp.indexOf(o))return;var o;var r=[].concat(e.incoming.map(function(e){return e.waypoints[e.waypoints.length-2]}),e.outgoing.map(function(e){return e.waypoints[1]})).map(function(e){return bp(n,e)}),a=vp.filter(function(e){return-1===r.indexOf(e)});if(-1!==a.indexOf(i))return;return a[0]}(e);n&&function(e,n){var o,r=Co(e),a=e.label,s=Co(a),c=So(e);switch(n){case\"top\":o={x:r.x,y:c.top-i-a.height/2};break;case\"left\":o={x:c.left-i-a.width/2,y:r.y};break;case\"bottom\":o={x:r.x,y:c.bottom+i+a.height/2};break;case\"right\":o={x:c.right+i+a.width/2,y:r.y}}var p=Rr(o,s);t.moveShape(a,p)}(e,n)}}ga.call(this,e),this.postExecuted([\"connection.create\",\"connection.layout\",\"connection.reconnectEnd\",\"connection.reconnectStart\",\"connection.updateWaypoints\"],function(e){var t=e.context.connection,i=t.source,o=t.target;n(i),n(o)}),this.postExecuted([\"label.create\"],function(e){n(e.context.shape.labelTarget)});var i=10}s()(gp,ga),gp.$inject=[\"eventBus\",\"modeling\"];var vp=[\"top\",\"bottom\",\"left\",\"right\"];function bp(e,t){return To(t,e,5)}function xp(e,t,n){ga.call(this,e),this.preExecute(\"shape.append\",function(e){var t=e.source,n=e.shape;e.position||(Mi(n,\"bpmn:TextAnnotation\")?e.position={x:t.x+t.width/2+75,y:t.y-50-n.height/2}:e.position={x:t.x+t.width+80+n.width/2,y:t.y+t.height/2})},!0)}function _p(e,t){function n(e){return E(e.attachers,function(e){return Mi(e,\"bpmn:BoundaryEvent\")})}ga.call(this,e),this.postExecute(\"connection.create\",function(e){var i=e.context.source,o=e.context.target,r=n(o);Mi(i,\"bpmn:EventBasedGateway\")&&Mi(o,\"bpmn:ReceiveTask\")&&r.length>0&&t.removeElements(r)}),this.postExecute(\"connection.reconnectStart\",function(e){var i=e.context.oldSource,o=e.context.newSource;Mi(i,\"bpmn:Gateway\")&&Mi(o,\"bpmn:EventBasedGateway\")&&S(o.outgoing,function(e){var i=e.target,o=n(i);Mi(i,\"bpmn:ReceiveTask\")&&o.length>0&&t.removeElements(o)})})}function wp(e,t,n){ga.call(this,e),this.preExecute(\"elements.paste\",1500,function(e){var t=e.topParent;if(t.parent||(e.topParent=n.getRootElement()),Mi(t,\"bpmn:Lane\"))do{t=e.topParent=t.parent}while(Mi(t,\"bpmn:Lane\")||!Mi(t,\"bpmn:Participant\"))},!0),this.postExecute(\"elements.paste\",function(e){var n=e.tree.createdElements;S(n,function(e){var i,o=e.element,r=o.businessObject,a=e.descriptor;(Mi(r,\"bpmn:ExclusiveGateway\")||Mi(r,\"bpmn:InclusiveGateway\")||Mi(r,\"bpmn:Activity\"))&&a.default&&(i=(i=n[a.default])?i.element:void 0,delete o.default,t.updateProperties(o,{default:i}))})},!0)}function Ep(e,t,n,i){ga.call(this,e),this.preExecute(\"shape.create\",function(e){var t,o=e.shape,r=e.host,a={cancelActivity:!0};r&&Mi(o,\"bpmn:IntermediateThrowEvent\")&&(a.attachedToRef=r.businessObject,t={type:\"bpmn:BoundaryEvent\",businessObject:i.create(\"bpmn:BoundaryEvent\",a)},e.shape=n.createShape(t))},!0)}function Sp(e,t,n){ga.call(this,e),this.preExecute(\"shape.create\",function(e){var n=e.context.shape;if(Mi(n,\"bpmn:DataObjectReference\")&&\"label\"!==n.type){var i=t.create(\"bpmn:DataObject\");n.businessObject.dataObjectRef=i}})}function Pp(e,t,n,i,o){ga.call(this,e),this.preExecute(\"shape.create\",function(e){var n=e.parent,i=e.shape,r=e.position,a=o.getRootElement();if(Mi(n,\"bpmn:Process\")&&Mi(i,\"bpmn:Participant\")&&!Mi(a,\"bpmn:Collaboration\")){var s=t.makeCollaboration();e.position=r,e.parent=s,e.processRoot=n}},!0),this.execute(\"shape.create\",function(e){var t=e.processRoot,n=e.shape;t&&(e.oldProcessRef=n.businessObject.processRef,n.businessObject.processRef=t.businessObject)},!0),this.revert(\"shape.create\",function(e){var t=e.processRoot,n=e.shape;t&&(n.businessObject.processRef=e.oldProcessRef)},!0),this.postExecute(\"shape.create\",function(e){var n=e.processRoot,i=e.shape;if(n){var o=n.children.slice();t.moveElements(o,{x:0,y:0},i)}},!0)}s()(xp,ga),xp.$inject=[\"eventBus\",\"elementFactory\",\"bpmnRules\"],_p.$inject=[\"eventBus\",\"modeling\"],s()(_p,ga),wp.$inject=[\"eventBus\",\"modeling\",\"canvas\"],s()(wp,ga),Ep.$inject=[\"eventBus\",\"modeling\",\"elementFactory\",\"bpmnFactory\"],s()(Ep,ga),Sp.$inject=[\"eventBus\",\"bpmnFactory\",\"moddle\"],s()(Sp,ga),Pp.$inject=[\"eventBus\",\"modeling\",\"elementFactory\",\"bpmnFactory\",\"canvas\"],s()(Pp,ga);var Cp=\"__targetRef_placeholder\";function Tp(e,t){function n(e,n){var i=e.get(\"properties\"),o=_(i,function(e){return e.name===Cp});return!o&&n&&gt(i,o=t.create(\"bpmn:Property\",{name:Cp})),o}function i(e,t){var i=n(e);i&&(function(e,t,n){return _(e.get(\"dataInputAssociations\"),function(e){return e!==n&&e.targetRef===t})}(e,i,t)||yt(e.get(\"properties\"),i))}function o(e){var t,o=e.context,r=o.connection,a=r.businessObject,s=r.target,c=s&&s.businessObject,p=o.newTarget,l=p&&p.businessObject,u=o.oldTarget||o.target,h=u&&u.businessObject,d=r.businessObject;h&&h!==c&&i(h,a),l&&l!==c&&i(l,a),c?(t=n(c,!0),d.targetRef=t):d.targetRef=null}ga.call(this,e),this.executed([\"connection.create\",\"connection.delete\",\"connection.move\",\"connection.reconnectEnd\"],Rp(o)),this.reverted([\"connection.create\",\"connection.delete\",\"connection.move\",\"connection.reconnectEnd\"],Rp(o))}function Rp(e){return function(t){if(Mi(t.context.connection,\"bpmn:DataInputAssociation\"))return e(t)}}function Mp(e){this._bpmnUpdater=e}function Ap(e,t,n,i){function o(e){return e.children.filter(function(e){return Mi(e,\"bpmn:DataStoreReference\")&&!e.labelTarget})}function r(e,i){var o=e.businessObject||e;if(i=i||n.filter(function(e){return Mi(e,\"bpmn:Participant\")})[0]){var r=i.businessObject||i;t.execute(\"dataStore.updateContainment\",{dataStoreBo:o,newSemanticParent:r.processRef||r,newDiParent:r.di})}}ga.call(this,i),t.registerHandler(\"dataStore.updateContainment\",Mp),this.preExecute(\"shape.create\",function(e){var t=e.context,n=t.shape;Mi(n,\"bpmn:DataStoreReference\")&&\"label\"!==n.type&&(t.hints||(t.hints={}),t.hints.autoResize=!1)}),this.preExecute(\"elements.move\",function(e){var t=e.context,n=t.shapes;n.filter(function(e){return Mi(e,\"bpmn:DataStoreReference\")}).length&&(t.hints||(t.hints={}),t.hints.autoResize=n.filter(function(e){return!Mi(e,\"bpmn:DataStoreReference\")}))}),this.postExecute(\"shape.create\",function(e){var t=e.context.shape,n=t.parent;Mi(t,\"bpmn:DataStoreReference\")&&\"label\"!==t.type&&Mi(n,\"bpmn:Collaboration\")&&r(t)}),this.postExecute(\"shape.move\",function(e){var t=e.context,n=t.shape,i=t.oldParent,o=n.parent;Mi(i,\"bpmn:Collaboration\")||Mi(n,\"bpmn:DataStoreReference\")&&\"label\"!==n.type&&Mi(o,\"bpmn:Collaboration\")&&r(n,Mi(i,\"bpmn:Participant\")?i:function(e,t){for(;e.parent;){if(Mi(e.parent,t))return e.parent;e=e.parent}}(i,\"bpmn:Participant\"))}),this.postExecute(\"shape.delete\",function(t){var n=t.context.shape,i=e.getRootElement();ia(n,[\"bpmn:Participant\",\"bpmn:SubProcess\"])&&Mi(i,\"bpmn:Collaboration\")&&o(i).filter(function(e){return function(e,t){var n=e.businessObject||e,i=t.businessObject||t;for(;n.$parent;){if(n.$parent===i.processRef||i)return!0;n=n.$parent}return!1}(e,n)}).forEach(function(e){r(e)})}),this.postExecute(\"canvas.updateRoot\",function(e){var t=e.context,n=t.oldRoot,i=t.newRoot;o(n).forEach(function(e){Mi(i,\"bpmn:Process\")&&r(e,i)})})}Tp.$inject=[\"eventBus\",\"bpmnFactory\"],s()(Tp,ga),Mp.$inject=[\"bpmnUpdater\"],Mp.prototype.execute=function(e){var t=e.dataStoreBo,n=e.newSemanticParent,i=e.newDiParent;e.oldSemanticParent=t.$parent,e.oldDiParent=t.di.$parent,this._bpmnUpdater.updateSemanticParent(t,n),this._bpmnUpdater.updateDiParent(t.di,i)},Mp.prototype.revert=function(e){var t=e.dataStoreBo,n=e.oldSemanticParent,i=e.oldDiParent;this._bpmnUpdater.updateSemanticParent(t,n),this._bpmnUpdater.updateDiParent(t.di,i)},Ap.$inject=[\"canvas\",\"commandStack\",\"elementRegistry\",\"eventBus\"],s()(Ap,ga);var kp=500;function Bp(e,t,n){ga.call(this,e),this.postExecuted(\"shape.delete\",kp,function(e){var t=e.context,i=t.hints,o=t.shape,r=t.oldParent;Mi(o,\"bpmn:Lane\")&&(i&&i.nested||function(e,t){var i,o,r,a=xc(t),s=[],c=[];xt(a,function(t){return t.y>e.y?c.push(t):s.push(t),t.children}),a.length&&(i=c.length&&s.length?e.height/2:e.height,s.length&&(o=n.calculateAdjustments(s,\"y\",i,e.y-10),n.makeSpace(o.movingShapes,o.resizingShapes,{x:0,y:i},\"s\")),c.length&&(r=n.calculateAdjustments(c,\"y\",-i,e.y+e.height+10),n.makeSpace(r.movingShapes,r.resizingShapes,{x:0,y:-i},\"n\")))}(o,r))})}function Np(e,t,n){function i(e,i,o){var r,a,s,c,p,l,u,h=i.waypoints,d=e.outgoing.slice(),m=e.incoming.slice(),f=qa(h,o);if(f){if(r=h.slice(0,f.index),a=h.slice(f.index+(f.bendpoint?1:0)),!r.length||!a.length)return;s=f.bendpoint?h[f.index]:o,Dp(e,r[r.length-1])||r.push(Op(s)),Dp(e,a[0])||a.unshift(Op(s))}c=i.source,p=i.target,t.canConnect(c,e,i)&&(n.reconnectEnd(i,e,r||o),l=i),t.canConnect(e,p,i)&&(l?u=n.connect(e,p,{type:i.type,waypoints:a}):(n.reconnectStart(i,e,a||o),u=i));var y=[].concat(l&&E(m,function(e){return e.source===l.source})||[],u&&E(d,function(e){return e.source===u.source})||[]);y.length&&n.removeElements(y)}ga.call(this,e),this.preExecute(\"elements.move\",function(e){var n=e.newParent,i=e.shapes,o=e.delta,r=i[0];if(r&&n){n&&n.waypoints&&(e.newParent=n=n.parent);var a,s=(a=r,{x:Math.round(a.x+a.width/2),y:Math.round(a.y+a.height/2)}),c={x:s.x+o.x,y:s.y+o.y},p=_(n.children,function(e){return t.canInsert(i,e)&&qa(e.waypoints,c)});p&&(e.targetFlow=p,e.position=c)}},!0),this.postExecuted(\"elements.move\",function(e){var t=e.shapes,n=e.targetFlow,o=e.position;n&&i(t[0],n,o)},!0),this.preExecute(\"shape.create\",function(e){var n=e.parent,i=e.shape;t.canInsert(i,n)&&(e.targetFlow=n,e.parent=n.parent)},!0),this.postExecuted(\"shape.create\",function(e){var t=e.shape,n=e.targetFlow,o=e.position;n&&i(t,n,o)},!0)}function Dp(e,t){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function Op(e){return W({},e)}function Lp(e,t,n,i){var o,r,a,s;return 0==(o=(i.y-n.y)*(t.x-e.x)-(i.x-n.x)*(t.y-e.y))?null:(r=e.y-n.y,a=e.x-n.x,s=((i.x-n.x)*r-(i.y-n.y)*a)/o,{x:Math.round(e.x+s*(t.x-e.x)),y:Math.round(e.y+s*(t.y-e.y))})}function jp(e){function t(e,t,n){var i,o={x:n.x,y:n.y-50},r={x:n.x-50,y:n.y},a=Lp(e,t,n,o),s=Lp(e,t,n,r);i=a&&s?Ip(a,n)>Ip(s,n)?s:a:a||s,e.original=i}e.on(\"bpmnElement.added\",function(e){var n,i,o=e.element;o.waypoints&&(t((i=(n=o).waypoints)[0],i[1],Co(n.source)),t(i[i.length-1],i[i.length-2],Co(n.target)))})}function Ip(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function zp(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function Fp(e){return Math.atan((e[1].y-e[0].y)/(e[1].x-e[0].x))}function $p(e,t){return zp({x:e.x-t.x,y:e.y-t.y})}Bp.$inject=[\"eventBus\",\"modeling\",\"spaceTool\"],s()(Bp,ga),s()(Np,ga),Np.$inject=[\"eventBus\",\"bpmnRules\",\"modeling\"],jp.$inject=[\"eventBus\"];var Vp=Math.sqrt,Hp=Math.min,Wp=Math.max,Gp=Math.abs;function qp(e){return Math.pow(e,2)}function Up(e,t){return Vp(qp(e.x-t.x)+qp(e.y-t.y))}function Kp(e,t,n,i){var o=t.x-e.x,r=t.y-e.y,a=n.x-e.x,s=n.y-e.y,c=o*o+r*r,p=(o*a+r*s)/c,l=p*p-(a*a+s*s-i*i)/c;if(l<0&&l>-1e-6&&(l=0),l<0)return[];var u=Vp(l),h=-p+u,d=-p-u,m={x:e.x-o*h,y:e.y-r*h};return 0===l?[m]:[m,{x:e.x-o*d,y:e.y-r*d}].filter(function(n){return function(e,t,n){return Yp(e.x,t.x,n.x)&&Yp(e.y,t.y,n.y)}(n,e,t)})}function Yp(e,t,n){return e>=Hp(t,n)-Xp&&e<=Wp(t,n)+Xp}var Xp=.1;function Zp(e,t){return Gp(e.x-t.x)<=Xp&&Gp(e.y-t.y)<=Xp}function Qp(e,t,n,i){var o=0,r=0,a=function(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}(e),s=function(e,t){var n,i,o,r,a,s,c,p,l,u,h,d,m=0;for(m=0;m<t.length-1;m++){if(Zp(n=t[m],i=t[m+1])?s=[n]:(o=Up(e,n),r=Up(e,i),s=Kp(n,i,e,Hp(o,r))),s.length<1)throw new Error(\"expected between [1, 2] circle -> line intersections\");1===s.length&&(c={type:\"bendpoint\",position:s[0],segmentIndex:m,bendpointIndex:Zp(n,s[0])?m:m+1}),2===s.length&&(h=s[0],d=s[1],c={type:\"segment\",position:a={x:(h.x+d.x)/2,y:(h.y+d.y)/2},segmentIndex:m,relativeLocation:Up(n,a)/Up(n,i)}),p=Up(c.position,e),(!u||l>p)&&(u=c,l=p)}return u}(a,n),c=s.segmentIndex,p=function(e,t,n,i){var o=n.segmentIndex,r=t.length-e.length;if(i.segmentMove){var a=i.segmentMove.segmentStartIndex,s=i.segmentMove.newSegmentStartIndex;return o===a?s:o>=s?o+r<s?s:o+r:o}if(i.bendpointMove){var c,p=i.bendpointMove.insert,l=i.bendpointMove.bendpointIndex;return 0===r?o:(o>=l&&(c=p?o+1:o-1),o<l&&(c=o,p&&\"bendpoint\"!==n.type&&l-1===o&&Jp(t,l)<n.relativeLocation&&c++),c)}return 0===r?o:i.connectionStart?0===o?0:null:i.connectionEnd&&o===e.length-2?t.length-2:null}(n,t,s,i);if(null===p)return{x:o,y:r};if(p<0||p>t.length-2)return{x:o,y:r};var l,u,h,d,m,f,y=el(n,c),g=el(t,p),v=s.position,b=(d=v,m=$p((h=y)[0],h[1]),f=$p(h[0],d),0===m?0:f/m),x=(l=g,u=Fp(y),Fp(l)-u);if(\"bendpoint\"===s.type){var _=t.length-n.length,w=s.bendpointIndex,E=n[w];if(-1!==t.indexOf(E))return{x:o,y:r};if(0===_){var S=t[w];return{x:S.x-s.position.x,y:S.y-s.position.y}}_<0&&0!==w&&w<n.length-1&&(b=Jp(n,w))}var P,C,T=(g[1].x-g[0].x)*b+g[0].x,R=(g[1].y-g[0].y)*b+g[0].y,M=(P={x:a.x-v.x,y:a.y-v.y},(C=x)?{x:Math.cos(C)*P.x-Math.sin(C)*P.y,y:Math.sin(C)*P.x+Math.cos(C)*P.y}:P);return Eo({x:o=T+M.x-a.x,y:r=R+M.y-a.y})}function Jp(e,t){var n=$p(e[t-1],e[t]);return n/(n+$p(e[t],e[t+1]))}function el(e,t){return[e[t],e[t+1]]}var tl={width:90,height:20},nl=\"name\",il=\"text\";function ol(e,t,n,i){ga.call(this,e),this.postExecute(\"element.updateProperties\",function(e){var n=e.context,o=n.element,r=n.properties;if(nl in r&&t.updateLabel(o,r[nl]),il in r&&Mi(o,\"bpmn:TextAnnotation\")){var a=i.getTextAnnotationBounds({x:o.x,y:o.y,width:o.width,height:o.height},r[il]||\"\");t.updateLabel(o,r.text,a)}}),this.postExecute([\"shape.create\",\"connection.create\"],function(e){var n=e.context,o=n.shape||n.connection,r=o.businessObject;if(co(o)&&r.name){var a=uo(o),s=i.getExternalLabelBounds(tl,r.name||\"\");t.createLabel(o,a,{id:r.id+\"_label\",businessObject:r,width:s.width,height:s.height})}}),this.postExecute(\"shape.delete\",function(e){var n=e.context,i=n.labelTarget,o=n.hints||{};i&&!1!==o.unsetLabel&&t.updateLabel(i,null,null,{removeShape:!1})}),this.postExecute([\"label.create\"],function(e){var t,i=e.context.shape;i.labelTarget&&Mi(i.labelTarget||i,\"bpmn:BaseElement\")&&((t=i.businessObject.di).label||(t.label=n.create(\"bpmndi:BPMNLabel\",{bounds:n.create(\"dc:Bounds\")})),W(t.label.bounds,{x:i.x,y:i.y,width:i.width,height:i.height}))}),this.postExecute([\"connection.layout\",\"connection.reconnectEnd\",\"connection.reconnectStart\",\"connection.updateWaypoints\"],function(e){var n,i=e.context.connection.label;i&&(n=function(e){var t=e.command,n=e.context,i=n.connection,o=i.label,r=W({},n.hints),a=n.newWaypoints||i.waypoints,s=n.oldWaypoints;return void 0===r.startChanged&&(r.startChanged=\"connection.reconnectStart\"===t),void 0===r.endChanged&&(r.endChanged=\"connection.reconnectEnd\"===t),Qp(o,a,s,r)}(e),t.moveShape(i,n))}),this.postExecute([\"shape.replace\"],function(e){var t=e.context,n=t.newShape,i=t.oldShape,o=Ai(n);o&&co(o)&&i.label&&n.label&&(n.label.x=i.label.x,n.label.y=i.label.y)})}s()(ol,ga),ol.$inject=[\"eventBus\",\"modeling\",\"bpmnFactory\",\"textRenderer\"];var rl=\"flow elements must be children of pools/participants\",al=\"participants cannot be pasted onto a non-empty process diagram\";function sl(e,t,n){function i(e,n,i){t.add({position:{x:e.x+5,y:e.y+5},type:\"error\",timeout:i||2e3,html:\"<div>\"+n+\"</div>\"})}e.on([\"shape.move.rejected\",\"create.rejected\"],function(e){var t=e.context,o=t.shape;Mi(t.target,\"bpmn:Collaboration\")&&Mi(o,\"bpmn:FlowNode\")&&i(e,n(rl))}),e.on([\"elements.paste.rejected\"],function(e){var t=e.context,o=t.position,r=t.target;Mi(r,\"bpmn:Collaboration\")&&i(o,n(rl)),Mi(r,\"bpmn:Process\")&&i(o,n(al),3e3)})}function cl(e,t,n){function i(e){var i,o,r=e.source,a=e.target;e.parent&&(Mi(e,\"bpmn:SequenceFlow\")&&(n.canConnectSequenceFlow(r,a)||(o=!0),n.canConnectMessageFlow(r,a)&&(i=\"bpmn:MessageFlow\")),Mi(e,\"bpmn:MessageFlow\")&&(n.canConnectMessageFlow(r,a)||(o=!0),n.canConnectSequenceFlow(r,a)&&(i=\"bpmn:SequenceFlow\")),Mi(e,\"bpmn:Association\")&&!n.canConnectAssociation(r,a)&&(o=!0),o&&t.removeConnection(e),i&&t.connect(r,a,{type:i,waypoints:e.waypoints.slice()}))}ga.call(this,e),this.postExecuted(\"elements.move\",function(e){S(e.closure.allConnections,i)},!0),this.postExecuted([\"connection.reconnectStart\",\"connection.reconnectEnd\"],function(e){i(e.context.connection)}),this.postExecuted(\"element.updateProperties\",function(e){var n,i=e.context,o=i.properties,r=i.element,a=r.businessObject;o.default&&(n=_(r.outgoing,L({id:r.businessObject.default.id})))&&t.updateProperties(n,{conditionExpression:void 0}),o.conditionExpression&&a.sourceRef.default===a&&t.updateProperties(r.source,{default:void 0})})}function pl(e,t){ga.call(this,e),this.preExecute(\"shape.delete\",function(e){var t=e.shape,n=t.parent;Mi(t,\"bpmn:Participant\")&&(e.collaborationRoot=n)},!0),this.postExecute(\"shape.delete\",function(e){var n=e.collaborationRoot;n&&!n.businessObject.participants.length&&t.makeProcess()},!0)}function ll(e,t,n,i,o,r){ga.call(this,e),this._bpmnReplace=t,this._elementRegistry=i,this._selection=o,this._modeling=r,this.postExecuted([\"elements.move\"],500,function(e){var t=e.context,i=t.newParent,o=t.newHost,r=[];S(t.closure.topLevel,function(e){r=Bi(e)?r.concat(e.children):r.concat(e)}),1===r.length&&o&&(i=o);var a=n.canReplace(r,i);a&&this.replaceElements(r,a.replacements,o)},this),this.postExecute([\"shape.replace\"],1500,function(e){var t,i=e.context,o=i.oldShape,r=i.newShape,a=o.attachers;a&&a.length&&(t=n.canReplace(a,r),this.replaceElements(a,t.replacements))},this),this.postExecuted([\"shape.replace\"],1500,function(e){var t=e.context,n=t.oldShape,i=t.newShape;r.unclaimId(n.businessObject.id,n.businessObject),r.updateProperties(i,{id:n.id})})}sl.$inject=[\"eventBus\",\"tooltips\",\"translate\"],s()(cl,ga),cl.$inject=[\"eventBus\",\"modeling\",\"bpmnRules\"],pl.$inject=[\"eventBus\",\"modeling\"],s()(pl,ga),s()(ll,ga),ll.prototype.replaceElements=function(e,t,n){var i=this._elementRegistry,o=this._bpmnReplace,r=this._selection,a=this._modeling;S(t,function(t){var r={type:t.newElementType},s=i.get(t.oldElementId);n&&Mi(s,\"bpmn:BoundaryEvent\")&&a.updateAttachment(s,null);var c=e.indexOf(s);e[c]=o.replaceElement(s,r,{select:!1}),n&&Mi(e[c],\"bpmn:BoundaryEvent\")&&a.updateAttachment(e[c],n)}),t&&r.select(e)},ll.$inject=[\"eventBus\",\"bpmnReplace\",\"bpmnRules\",\"elementRegistry\",\"selection\",\"modeling\"];var ul=1001;function hl(e,t){e.on(\"resize.start\",ul+500,function(e){var t=e.context,n=t.shape;(Mi(n,\"bpmn:Lane\")||Mi(n,\"bpmn:Participant\"))&&(t.balanced=!Io(e))}),e.on(\"resize.end\",ul,function(e){var n=e.context,i=n.shape,o=n.canExecute,r=n.newBounds;if(Mi(i,\"bpmn:Lane\")||Mi(i,\"bpmn:Participant\"))return o&&(r=wo(r),t.resizeLane(i,r,n.balanced)),!1})}function dl(e,t,n){ga.call(this,e),this.preExecute(\"shape.delete\",function(e){var i=e.context.shape;if(1===i.incoming.length&&1===i.outgoing.length){var o,r,a,s=i.incoming[0],c=i.outgoing[0];if(Mi(s,\"bpmn:SequenceFlow\")&&Mi(c,\"bpmn:SequenceFlow\"))if(t.canConnect(s.source,c.target,s)){var p=(o=s.waypoints,r=c.waypoints,(a=Lp(ml(o[o.length-2]),ml(o[o.length-1]),ml(r[1]),ml(r[0])))?[].concat(o.slice(0,o.length-1),[a],r.slice(1)):[ml(o[0]),ml(r[r.length-1])]);n.reconnectEnd(s,c.target,p)}}})}function ml(e){return e.original||e}hl.$inject=[\"eventBus\",\"modeling\"],s()(dl,ga),dl.$inject=[\"eventBus\",\"bpmnRules\",\"modeling\"];var fl=500;function yl(e,t,n,i){ga.call(this,e),this.executed([\"shape.toggleCollapse\"],fl,function(e){var t,n=e.context.shape;Mi(n,\"bpmn:SubProcess\")&&(n.collapsed?Ai(n).di.isExpanded=!1:((t=n.children).length&&t.forEach(function(e){\"label\"!==e.type||e.businessObject.name||(e.hidden=!0)}),Ai(n).di.isExpanded=!0))}),this.reverted([\"shape.toggleCollapse\"],fl,function(e){var t=e.context.shape;t.collapsed?Ai(t).di.isExpanded=!1:Ai(t).di.isExpanded=!0}),this.postExecuted([\"shape.toggleCollapse\"],fl,function(e){var i,o=e.context.shape,r=t._getDefaultSize(o);i=o.collapsed?function(e,t){return{x:e.x+(e.width-t.width)/2,y:e.y+(e.height-t.height)/2,width:t.width,height:t.height}}(o,r):function(e,t){var n,i,o=e.children,r=t;return(n=yc((i=o,i.filter(function(e){return!e.hidden})).concat([e])))?(r.width=Math.max(n.width,r.width),r.height=Math.max(n.height,r.height),r.x=n.x+(n.width-r.width)/2,r.y=n.y+(n.height-r.height)/2):(r.x=e.x+(e.width-r.width)/2,r.y=e.y+(e.height-r.height)/2),r}(o,r),n.resizeShape(o,i)})}function gl(e,t){ga.call(this,e),this.preExecute(\"elements.delete\",function(e){S(e.context.elements,function(e){t.unclaimId(e.businessObject.id,e.businessObject)})})}s()(yl,ga),yl.$inject=[\"eventBus\",\"elementFactory\",\"modeling\"],s()(gl,ga),gl.$inject=[\"eventBus\",\"modeling\"];var vl=500,bl=5e3;function xl(e,t,n){var i;function o(){if(!i)throw new Error(n(\"out of bounds release\"));return i}ga.call(this,e);var r=[\"spaceTool\",\"lane.add\",\"lane.resize\",\"lane.split\",\"elements.move\",\"elements.delete\",\"shape.create\",\"shape.delete\",\"shape.move\",\"shape.resize\"];this.preExecute(r,bl,function(e){(i=i||new _l).enter()}),this.postExecuted(r,vl,function(e){!function(){if(!i)throw new Error(n(\"out of bounds release\"));var e=i.leave();e&&(t.updateLaneRefs(i.flowNodes,i.lanes),i=null)}()}),this.preExecute([\"shape.create\",\"shape.move\",\"shape.delete\",\"shape.resize\"],function(e){var t=e.context.shape,n=o();t.labelTarget||(Mi(t,\"bpmn:Lane\")&&n.addLane(t),Mi(t,\"bpmn:FlowNode\")&&n.addFlowNode(t))})}function _l(){this.flowNodes=[],this.lanes=[],this.counter=0,this.addLane=function(e){this.lanes.push(e)},this.addFlowNode=function(e){this.flowNodes.push(e)},this.enter=function(){this.counter++},this.leave=function(){return this.counter--,!this.counter}}function wl(e,t){ga.call(this,e),this.preExecute(\"connection.delete\",function(e){var n=e.context.connection,i=n.source;(function(e,t){if(!Mi(e,\"bpmn:SequenceFlow\"))return!1;var n=Ai(t),i=Ai(e);return n.get(\"default\")===i})(n,i)&&t.updateProperties(i,{default:null})})}xl.$inject=[\"eventBus\",\"modeling\",\"translate\"],s()(xl,ga),s()(wl,ga),wl.$inject=[\"eventBus\",\"modeling\"];var El={__init__:[\"adaptiveLabelPositioningBehavior\",\"appendBehavior\",\"boundaryEventBehavior\",\"copyPasteBehavior\",\"createBoundaryEventBehavior\",\"createDataObjectBehavior\",\"dataStoreBehavior\",\"createParticipantBehavior\",\"dataInputAssociationBehavior\",\"deleteLaneBehavior\",\"dropOnFlowBehavior\",\"importDockingFix\",\"labelBehavior\",\"modelingFeedback\",\"removeElementBehavior\",\"removeParticipantBehavior\",\"replaceConnectionBehavior\",\"replaceElementBehaviour\",\"resizeLaneBehavior\",\"toggleElementCollapseBehaviour\",\"unclaimIdBehavior\",\"unsetDefaultFlowBehavior\",\"updateFlowNodeRefsBehavior\"],adaptiveLabelPositioningBehavior:[\"type\",gp],appendBehavior:[\"type\",xp],boundaryEventBehavior:[\"type\",_p],copyPasteBehavior:[\"type\",wp],createBoundaryEventBehavior:[\"type\",Ep],createDataObjectBehavior:[\"type\",Sp],createParticipantBehavior:[\"type\",Pp],dataInputAssociationBehavior:[\"type\",Tp],dataStoreBehavior:[\"type\",Ap],deleteLaneBehavior:[\"type\",Bp],dropOnFlowBehavior:[\"type\",Np],importDockingFix:[\"type\",jp],labelBehavior:[\"type\",ol],modelingFeedback:[\"type\",sl],replaceConnectionBehavior:[\"type\",cl],removeParticipantBehavior:[\"type\",pl],replaceElementBehaviour:[\"type\",ll],resizeLaneBehavior:[\"type\",hl],removeElementBehavior:[\"type\",dl],toggleElementCollapseBehaviour:[\"type\",yl],unclaimIdBehavior:[\"type\",gl],updateFlowNodeRefsBehavior:[\"type\",xl],unsetDefaultFlowBehavior:[\"type\",wl]};function Sl(e,t){var n=To(e,t,-15);return\"intersect\"!==n?n:null}var Pl=Math.abs,Cl=Math.min,Tl=Math.max;function Rl(e,t,n,i){var o=e[t];e[t]=void 0===o?n:i(n,o)}function Ml(e,t,n){return Rl(e,t,n,Cl)}function Al(e,t,n){return Rl(e,t,n,Tl)}var kl=60,Bl=300,Nl=20,Dl=50,Ol=20,Ll=20;function jl(e){xa.call(this,e)}function Il(e){return!e||ho(e)}function zl(e){do{if(Mi(e,\"bpmn:Process\"))return Ai(e);if(Mi(e,\"bpmn:Participant\"))return Ai(e).processRef||Ai(e)}while(e=e.parent)}function Fl(e){return Mi(e,\"bpmn:TextAnnotation\")}function $l(e){return Mi(e,\"bpmn:BoundaryEvent\")&&Wl(e,\"bpmn:CompensateEventDefinition\")}function Vl(e){return Ai(e).isForCompensation}function Hl(e){for(var t=e;t=t.parent;){if(Mi(t,\"bpmn:FlowElementsContainer\"))return Ai(t);if(Mi(t,\"bpmn:Participant\"))return Ai(t).processRef}return null}function Wl(e,t){return!!_(Ai(e).eventDefinitions||[],function(e){return Mi(e,t)})}function Gl(e,t){return(Ai(e).eventDefinitions||[]).every(function(e){return Mi(e,t)})}function ql(e){return e.waypoints}function Ul(e,t){return-1!==function(e){for(var t=[];e;)(e=e.parent)&&t.push(e);return t}(t).indexOf(e)}function Kl(e,t,n){if(Il(e)||Il(t))return null;if(!Mi(n,\"bpmn:DataAssociation\")){if(ou(e,t))return{type:\"bpmn:MessageFlow\"};if(ru(e,t))return{type:\"bpmn:SequenceFlow\"}}var i=au(e,t);return i||($l(e)&&Vl(t)?{type:\"bpmn:Association\",associationDirection:\"One\"}:!!iu(e,t)&&{type:\"bpmn:Association\"})}function Yl(e,t,n){return!!ho(e)||!(Mi(t,\"bpmn:Participant\")&&!ki(t))&&(Mi(e,\"bpmn:Participant\")?Mi(t,\"bpmn:Process\")||Mi(t,\"bpmn:Collaboration\"):Mi(e,\"bpmn:Lane\")?Mi(t,\"bpmn:Participant\")||Mi(t,\"bpmn:Lane\"):!Mi(e,\"bpmn:BoundaryEvent\")&&(Mi(e,\"bpmn:FlowElement\")&&!Mi(e,\"bpmn:DataStoreReference\")?Mi(t,\"bpmn:FlowElementsContainer\")?ki(t):ia(t,[\"bpmn:Participant\",\"bpmn:Lane\"]):ia(e,[\"bpmn:Artifact\",\"bpmn:DataAssociation\",\"bpmn:DataStoreReference\"])?ia(t,[\"bpmn:Collaboration\",\"bpmn:Lane\",\"bpmn:Participant\",\"bpmn:Process\",\"bpmn:SubProcess\"]):!!Mi(e,\"bpmn:MessageFlow\")&&(Mi(t,\"bpmn:Collaboration\")||e.source.parent==t||e.target.parent==t)))}function Xl(e){return!ho(e)&&Mi(e,\"bpmn:BoundaryEvent\")}function Zl(e){return Mi(e,\"bpmn:Lane\")}function Ql(e,t,n,i){if(Array.isArray(e)||(e=[e]),n)return!1;if(1!==e.length)return!1;var o=e[0];return!ho(o)&&(!!function(e){return Xl(e)||Mi(e,\"bpmn:IntermediateThrowEvent\")&&!e.parent}(o)&&(!t||!Bi(t)&&(!(!Mi(t,\"bpmn:Activity\")||Vl(t))&&(!(i&&!Sl(i,t))&&(!function(e){return Mi(e,\"bpmn:ReceiveTask\")&&_(e.incoming,function(e){return Mi(e.source,\"bpmn:EventBasedGateway\")})}(t)&&\"attach\")))))}function Jl(e,t,n){if(!t)return!1;var i={replacements:[]};return S(e,function(e){Bi(t)||Mi(e,\"bpmn:StartEvent\")&&\"label\"!==e.type&&Yl(e,t)&&(function(e){return e&&!1!==Ai(e).isInterrupting}(e)||i.replacements.push({oldElementId:e.id,newElementType:\"bpmn:StartEvent\"}),(function(e){return Ni(e,\"bpmn:ErrorEventDefinition\")}(e)||function(e){return Ni(e,\"bpmn:EscalationEventDefinition\")}(e)||function(e){return Ni(e,\"bpmn:CompensateEventDefinition\")}(e))&&i.replacements.push({oldElementId:e.id,newElementType:\"bpmn:StartEvent\"})),Mi(t,\"bpmn:Transaction\")||Wl(e,\"bpmn:CancelEventDefinition\")&&\"label\"!==e.type&&(Mi(e,\"bpmn:EndEvent\")&&Yl(e,t)&&i.replacements.push({oldElementId:e.id,newElementType:\"bpmn:EndEvent\"}),Mi(e,\"bpmn:BoundaryEvent\")&&Ql(e,t,null,n)&&i.replacements.push({oldElementId:e.id,newElementType:\"bpmn:BoundaryEvent\"}))}),!!i.replacements.length&&i}function eu(e,t){return!R(e,Xl)&&(!R(e,Zl)&&(!t||e.every(function(e){return Yl(e,t)})))}function tu(e,t,n,i){return!!t&&(ho(t)?null:n!==t&&((!n||!Ul(n,t))&&(Yl(e,t)||su(e,t,i))))}function nu(e,t){return Mi(e,\"bpmn:SubProcess\")?ki(e)&&(!t||t.width>=100&&t.height>=80):Mi(e,\"bpmn:Lane\")?!t||t.width>=130&&t.height>=60:Mi(e,\"bpmn:Participant\")?!t||t.width>=250&&t.height>=50:!!Fl(e)}function iu(e,t){return!ql(e)&&!ql(t)&&(!(!$l(e)||!Vl(t))||!Ul(t,e)&&!Ul(e,t)&&function(e,t){var n=Fl(e),i=Fl(t);return(n||i)&&n!==i}(e,t))}function ou(e,t){return Mi(i=e,\"bpmn:InteractionNode\")&&(!Mi(i,\"bpmn:Event\")||Mi(i,\"bpmn:ThrowEvent\")&&Gl(i,\"bpmn:MessageEventDefinition\"))&&function(e){return Mi(e,\"bpmn:InteractionNode\")&&!Vl(e)&&(!Mi(e,\"bpmn:Event\")||Mi(e,\"bpmn:CatchEvent\")&&Gl(e,\"bpmn:MessageEventDefinition\"))}(t)&&(n=t,!(zl(e)===zl(n)));var n,i}function ru(e,t){return Mi(r=e,\"bpmn:FlowNode\")&&!Mi(r,\"bpmn:EndEvent\")&&!Bi(r)&&!(Mi(r,\"bpmn:IntermediateThrowEvent\")&&Wl(r,\"bpmn:LinkEventDefinition\"))&&!$l(r)&&!Vl(r)&&function(e){return Mi(e,\"bpmn:FlowNode\")&&!Mi(e,\"bpmn:StartEvent\")&&!Mi(e,\"bpmn:BoundaryEvent\")&&!Bi(e)&&!(Mi(e,\"bpmn:IntermediateCatchEvent\")&&Wl(e,\"bpmn:LinkEventDefinition\"))&&!Vl(e)}(t)&&(n=t,i=Hl(e),o=Hl(n),i&&i===o)&&!(Mi(e,\"bpmn:EventBasedGateway\")&&!function(e){return Mi(e,\"bpmn:ReceiveTask\")||Mi(e,\"bpmn:IntermediateCatchEvent\")&&(Wl(e,\"bpmn:MessageEventDefinition\")||Wl(e,\"bpmn:TimerEventDefinition\")||Wl(e,\"bpmn:ConditionalEventDefinition\")||Wl(e,\"bpmn:SignalEventDefinition\"))}(t));var n,i,o,r}function au(e,t){return ia(e,[\"bpmn:DataObjectReference\",\"bpmn:DataStoreReference\"])&&ia(t,[\"bpmn:Activity\",\"bpmn:ThrowEvent\"])?{type:\"bpmn:DataInputAssociation\"}:!(!ia(t,[\"bpmn:DataObjectReference\",\"bpmn:DataStoreReference\"])||!ia(e,[\"bpmn:Activity\",\"bpmn:CatchEvent\"]))&&{type:\"bpmn:DataOutputAssociation\"}}function su(e,t,n){if(!t)return!1;if(Array.isArray(e)){if(1!==e.length)return!1;e=e[0]}return t.source!==e&&t.target!==e&&(ia(t,[\"bpmn:SequenceFlow\",\"bpmn:MessageFlow\"])&&!ho(t)&&Mi(e,\"bpmn:FlowNode\")&&!Mi(e,\"bpmn:BoundaryEvent\")&&Yl(e,t.parent))}function cu(e,t){return e&&t&&-1!==e.indexOf(t)}function pu(e,t){return!(Mi(t,\"bpmn:Lane\")&&!cu(e,t.parent))&&!(Mi(t,\"bpmn:BoundaryEvent\")&&!cu(e,t.host))}s()(jl,xa),jl.$inject=[\"eventBus\"],jl.prototype.init=function(){this.addRule(\"connection.start\",function(e){return function(e){if(Il(e))return null;return ia(e,[\"bpmn:FlowNode\",\"bpmn:InteractionNode\",\"bpmn:DataObjectReference\",\"bpmn:DataStoreReference\"])}(e.source)}),this.addRule(\"connection.create\",function(e){var t=e.source,n=e.target,i=e.hints||{},o=i.targetParent;if(i.targetAttach)return!1;o&&(n.parent=o);try{return Kl(t,n)}finally{o&&(n.parent=null)}}),this.addRule(\"connection.reconnectStart\",function(e){var t=e.connection;return Kl(e.hover||e.source,t.target,t)}),this.addRule(\"connection.reconnectEnd\",function(e){var t=e.connection;return Kl(t.source,e.hover||e.target,t)}),this.addRule(\"connection.updateWaypoints\",function(e){return null}),this.addRule(\"shape.resize\",function(e){return nu(e.shape,e.newBounds)}),this.addRule(\"elements.move\",function(e){var t=e.target,n=e.shapes,i=e.position;return Ql(n,t,null,i)||Jl(n,t,i)||eu(n,t)||su(n,t,i)}),this.addRule(\"shape.create\",function(e){return tu(e.shape,e.target,e.source,e.position)}),this.addRule(\"shape.attach\",function(e){return Ql(e.shape,e.target,null,e.position)}),this.addRule(\"element.copy\",function(e){return pu(e.collection,e.element)}),this.addRule(\"element.paste\",function(e){var t=e.parent,n=e.element,i=e.position,o=e.source,r=e.target;return o||r?Kl(o,r):Ql([n],t,null,i)||tu(n,t,null,i)}),this.addRule(\"elements.paste\",function(e){return function(e,t){var n=e[0];if(Mi(t,\"bpmn:Collaboration\"))return T(n,function(e){return\"bpmn:Participant\"===e.type});if(Mi(t,\"bpmn:Process\"))return!(R(n,function(e){return\"bpmn:Participant\"===e.type})&&t.children.length>0);if(Mi(t,\"bpmn:Participant\")&&!ki(t))return!1;if(Mi(t,\"bpmn:FlowElementsContainer\"))return ki(t);return ia(t,[\"bpmn:Collaboration\",\"bpmn:Lane\",\"bpmn:Participant\",\"bpmn:Process\",\"bpmn:SubProcess\"])}(e.tree,e.target)})},jl.prototype.canConnectMessageFlow=ou,jl.prototype.canConnectSequenceFlow=ru,jl.prototype.canConnectDataAssociation=au,jl.prototype.canConnectAssociation=iu,jl.prototype.canMove=eu,jl.prototype.canAttach=Ql,jl.prototype.canReplace=Jl,jl.prototype.canDrop=Yl,jl.prototype.canInsert=su,jl.prototype.canCreate=tu,jl.prototype.canConnect=Kl,jl.prototype.canResize=nu,jl.prototype.canCopy=pu;var lu={__depends__:[La],__init__:[\"bpmnRules\"],bpmnRules:[\"type\",jl]};function uu(e){ga.call(this,e);var t=this;this.preExecute([\"shape.create\",\"connection.create\"],function(e){var n=e.context,i=n.shape||n.connection,o=n.parent,r=t.getOrdering(i,o);r&&(void 0!==r.parent&&(n.parent=r.parent),n.parentIndex=r.index)}),this.preExecute([\"shape.move\",\"connection.move\"],function(e){var n=e.context,i=n.shape||n.connection,o=n.newParent||i.parent,r=t.getOrdering(i,o);r&&(void 0!==r.parent&&(n.newParent=r.parent),n.newParentIndex=r.index)})}function hu(e,t,n){uu.call(this,e);var i=[{type:\"bpmn:SubProcess\",order:{level:6}},{type:\"bpmn:SequenceFlow\",order:{level:3,containers:[\"bpmn:Participant\",\"bpmn:FlowElementsContainer\"]}},{type:\"bpmn:DataAssociation\",order:{level:9,containers:[\"bpmn:Collaboration\",\"bpmn:Process\"]}},{type:\"bpmn:MessageFlow\",order:{level:9,containers:[\"bpmn:Collaboration\"]}},{type:\"bpmn:Association\",order:{level:6,containers:[\"bpmn:Participant\",\"bpmn:FlowElementsContainer\",\"bpmn:Collaboration\"]}},{type:\"bpmn:BoundaryEvent\",order:{level:8}},{type:\"bpmn:FlowElement\",order:{level:5}},{type:\"bpmn:Participant\",order:{level:-2}},{type:\"bpmn:Lane\",order:{level:-1}}];function o(e){var t=e.order;return t||(e.order=t=function(e){if(e.labelTarget)return{level:10};var t=_(i,function(t){return ia(e,[t.type])});return t&&t.order||{level:1}}(e)),t}this.getOrdering=function(e,i){if(e.labelTarget)return{parent:t.getRootElement(),index:-1};var r=o(e);r.containers&&(i=function(e,t,i){for(var o=t;o&&!ia(o,i);)o=o.parent;if(!o)throw new Error(n(\"no parent for {element} in {parent}\",{element:e.id,parent:t.id}));return o}(e,i,r.containers));var a=i.children.indexOf(e),s=w(i.children,function(t){return!(!e.labelTarget&&t.labelTarget)&&r.level<o(t).level});return-1!==s&&-1!==a&&a<s&&(s-=1),{index:s,parent:i}}}uu.prototype.getOrdering=function(e,t){return null},s()(uu,ga),hu.$inject=[\"eventBus\",\"canvas\",\"translate\"],s()(hu,uu);var du={__depends__:[ro],__init__:[\"bpmnOrderingProvider\"],bpmnOrderingProvider:[\"type\",hu]};function mu(e,t){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[]},this._injector=t,this._eventBus=e,this._uid=1,e.on([\"diagram.destroy\",\"diagram.clear\"],function(){this.clear(!1)},this)}mu.$inject=[\"eventBus\",\"injector\"],mu.prototype.execute=function(e,t){if(!e)throw new Error(\"command required\");var n={command:e,context:t};this._pushAction(n),this._internalExecute(n),this._popAction(n)},mu.prototype.canExecute=function(e,t){var n={command:e,context:t},i=this._getHandler(e),o=this._fire(e,\"canExecute\",n);if(void 0===o){if(!i)return!1;i.canExecute&&(o=i.canExecute(t))}return o},mu.prototype.clear=function(e){this._stack.length=0,this._stackIdx=-1,!1!==e&&this._fire(\"changed\")},mu.prototype.undo=function(){var e,t=this._getUndoAction();if(t){for(this._pushAction(t);t&&(this._internalUndo(t),(e=this._getUndoAction())&&e.id===t.id);)t=e;this._popAction()}},mu.prototype.redo=function(){var e,t=this._getRedoAction();if(t){for(this._pushAction(t);t&&(this._internalExecute(t,!0),(e=this._getRedoAction())&&e.id===t.id);)t=e;this._popAction()}},mu.prototype.register=function(e,t){this._setHandler(e,t)},mu.prototype.registerHandler=function(e,t){if(!e||!t)throw new Error(\"command and handlerCls must be defined\");var n=this._injector.instantiate(t);this.register(e,n)},mu.prototype.canUndo=function(){return!!this._getUndoAction()},mu.prototype.canRedo=function(){return!!this._getRedoAction()},mu.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]},mu.prototype._getUndoAction=function(){return this._stack[this._stackIdx]},mu.prototype._internalUndo=function(e){var t=this,n=e.command,i=e.context,o=this._getHandler(n);this._atomicDo(function(){t._fire(n,\"revert\",e),o.revert&&t._markDirty(o.revert(i)),t._revertedAction(e),t._fire(n,\"reverted\",e)})},mu.prototype._fire=function(e,t,n){arguments.length<3&&(n=t,t=null);var i,o,r,a=t?[e+\".\"+t,t]:[e];for(n=this._eventBus.createEvent(n),i=0;(o=a[i])&&(r=this._eventBus.fire(\"commandStack.\"+o,n),!n.cancelBubble);i++);return r},mu.prototype._createId=function(){return this._uid++},mu.prototype._atomicDo=function(e){var t=this._currentExecution;t.atomic=!0;try{e()}finally{t.atomic=!1}},mu.prototype._internalExecute=function(e,t){var n=this,i=e.command,o=e.context,r=this._getHandler(i);if(!r)throw new Error(\"no command handler registered for <\"+i+\">\");this._pushAction(e),t||(this._fire(i,\"preExecute\",e),r.preExecute&&r.preExecute(o),this._fire(i,\"preExecuted\",e)),this._atomicDo(function(){n._fire(i,\"execute\",e),r.execute&&n._markDirty(r.execute(o)),n._executedAction(e,t),n._fire(i,\"executed\",e)}),t||(this._fire(i,\"postExecute\",e),r.postExecute&&r.postExecute(o),this._fire(i,\"postExecuted\",e)),this._popAction(e)},mu.prototype._pushAction=function(e){var t=this._currentExecution,n=t.actions,i=n[0];if(t.atomic)throw new Error(\"illegal invocation in <execute> or <revert> phase (action: \"+e.command+\")\");e.id||(e.id=i&&i.id||this._createId()),n.push(e)},mu.prototype._popAction=function(){var e=this._currentExecution,t=e.actions,n=e.dirty;t.pop(),t.length||(this._eventBus.fire(\"elements.changed\",{elements:N(\"id\",n)}),n.length=0,this._fire(\"changed\"))},mu.prototype._markDirty=function(e){var t=this._currentExecution;e&&(e=f(e)?e:[e],t.dirty=t.dirty.concat(e))},mu.prototype._executedAction=function(e,t){var n=++this._stackIdx;t||this._stack.splice(n,this._stack.length,e)},mu.prototype._revertedAction=function(e){this._stackIdx--},mu.prototype._getHandler=function(e){return this._handlerMap[e]},mu.prototype._setHandler=function(e,t){if(!e||!t)throw new Error(\"command and handler required\");if(this._handlerMap[e])throw new Error(\"overriding handler for command <\"+e+\">\");this._handlerMap[e]=t};var fu={commandStack:[\"type\",mu]},yu=new Qo(\"tt\");function gu(e,t){e.style.display=!1===t?\"none\":\"\"}var vu=\".djs-tooltip\";function bu(e,t){var n,i;this._eventBus=e,this._canvas=t,this._ids=yu,this._tooltipDefaults={show:{minZoom:.7,maxZoom:5}},this._tooltips={},this._tooltipRoot=(n=t.getContainer(),i=ue('<div class=\"djs-tooltip-container\" style=\"position: absolute; width: 0; height: 0;\" />'),n.insertBefore(i,n.firstChild),i);var o=this;le.bind(this._tooltipRoot,vu,\"mousedown\",function(e){e.stopPropagation()}),le.bind(this._tooltipRoot,vu,\"mouseover\",function(e){o.trigger(\"mouseover\",e)}),le.bind(this._tooltipRoot,vu,\"mouseout\",function(e){o.trigger(\"mouseout\",e)}),this._init()}bu.$inject=[\"eventBus\",\"canvas\"],bu.prototype.add=function(e){if(!e.position)throw new Error(\"must specifiy tooltip position\");if(!e.html)throw new Error(\"must specifiy tooltip html\");var t=this._ids.next();return e=W({},this._tooltipDefaults,e,{id:t}),this._addTooltip(e),e.timeout&&this.setTimeout(e),t},bu.prototype.trigger=function(e,t){var n=t.delegateTarget||t.target,i=this.get(q(n,\"data-tooltip-id\"));i&&(\"mouseover\"===e&&i.timeout&&this.clearTimeout(i),\"mouseout\"===e&&i.timeout&&(i.timeout=1e3,this.setTimeout(i)))},bu.prototype.get=function(e){return\"string\"!=typeof e&&(e=e.id),this._tooltips[e]},bu.prototype.clearTimeout=function(e){if(e=this.get(e)){var t=e.removeTimer;t&&(clearTimeout(t),e.removeTimer=null)}},bu.prototype.setTimeout=function(e){if(e=this.get(e)){this.clearTimeout(e);var t=this;e.removeTimer=setTimeout(function(){t.remove(e)},e.timeout)}},bu.prototype.remove=function(e){var t=this.get(e);t&&(be(t.html),be(t.htmlContainer),delete t.htmlContainer,delete this._tooltips[t.id])},bu.prototype.show=function(){gu(this._tooltipRoot)},bu.prototype.hide=function(){gu(this._tooltipRoot,!1)},bu.prototype._updateRoot=function(e){var t=e.scale||1,n=e.scale||1,i=\"matrix(\"+t+\",0,0,\"+n+\",\"+-1*e.x*t+\",\"+-1*e.y*n+\")\";this._tooltipRoot.style.transform=i,this._tooltipRoot.style[\"-ms-transform\"]=i},bu.prototype._addTooltip=function(e){var t,n=e.id,i=e.html,o=this._tooltipRoot;i.get&&i.constructor.prototype.jquery&&(i=i.get(0)),b(i)&&(i=ue(i)),(t=ue('<div data-tooltip-id=\"'+n+'\" class=\"djs-tooltip\" style=\"position: absolute\">')).appendChild(i),e.type&&Z(t).add(\"djs-tooltip-\"+e.type),e.className&&Z(t).add(e.className),e.htmlContainer=t,o.appendChild(t),this._tooltips[n]=e,this._updateTooltip(e)},bu.prototype._updateTooltip=function(e){var t,n,i,o=e.position,r=e.htmlContainer;t=r,n=o.x,i=o.y,W(t.style,{left:n+\"px\",top:i+\"px\"})},bu.prototype._updateTooltipVisibilty=function(e){S(this._tooltips,function(t){var n=t.show,i=t.htmlContainer,o=!0;n&&((n.minZoom>e.scale||n.maxZoom<e.scale)&&(o=!1),gu(i,o))})},bu.prototype._init=function(){var e=this;this._eventBus.on(\"canvas.viewbox.changing\",function(t){e.hide()}),this._eventBus.on(\"canvas.viewbox.changed\",function(t){var n;n=t.viewbox,e._updateRoot(n),e._updateTooltipVisibilty(n),e.show()})};var xu={__init__:[\"tooltips\"],tooltips:[\"type\",bu]};function _u(e,t){if(\"function\"!=typeof t)throw new Error(\"removeFn iterator must be a function\");if(e){for(var n;n=e[0];)t(n);return e}}var wu=250,Eu=1400;function Su(e,t,n){ga.call(this,t);var i=e.get(\"movePreview\",!1);t.on(\"shape.move.start\",Eu,function(e){var t=e.context,n=t.shapes,i=t.validatedShapes;t.shapes=Pu(n),t.validatedShapes=Pu(i)}),i&&t.on(\"shape.move.start\",wu,function(e){var t=e.context,n=t.shapes,o=[];S(n,function(e){S(e.labels,function(n){n.hidden||-1!==t.shapes.indexOf(n)||o.push(n),e.labelTarget&&o.push(e)})}),S(o,function(e){i.makeDraggable(t,e,!0)})}),this.preExecuted(\"elements.move\",Eu,function(e){var t=e.context.closure,n=t.enclosedElements,i=[];S(n,function(e){S(e.labels,function(e){n[e.id]||i.push(e)})}),t.addAll(i)}),this.preExecute([\"connection.delete\",\"shape.delete\"],function(e){var t=e.context;_u((t.connection||t.shape).labels,function(e){n.removeShape(e,{nested:!0})})}),this.execute(\"shape.delete\",function(e){var t=e.context,n=t.shape,i=n.labelTarget;i&&(t.labelTargetIndex=vt(i.labels,n),t.labelTarget=i,n.labelTarget=null)}),this.revert(\"shape.delete\",function(e){var t=e.context,n=t.shape,i=t.labelTarget,o=t.labelTargetIndex;i&&(gt(i.labels,n,o),n.labelTarget=i)})}function Pu(e){return E(e,function(t){return-1===e.indexOf(t.labelTarget)})}s()(Su,ga),Su.$inject=[\"injector\",\"eventBus\",\"modeling\"];var Cu={__init__:[\"labelSupport\"],labelSupport:[\"type\",Su]};function Tu(e,t,n){var i=Tr(t),o=Tr(n),r=Rr(e,i),a=r.x*(n.width/t.width),s=r.y*(n.height/t.height);return Eo({x:o.x+a,y:o.y+s})}function Ru(e,t,n){var i=Tr(e),o=Tr(t),r=Tr(n),a=Rr(e,i),s=Rr(i,o),c=s.x*(n.width/t.width),p=s.y*(n.height/t.height),l=r.x+c,u=r.y+p;return Eo({x:l+a.x-e.x,y:u+a.y-e.y})}var Mu=251,Au=1401;function ku(e,t,n,i){ga.call(this,t);var o=e.get(\"movePreview\",!1);t.on(\"shape.move.start\",Au,function(e){var t,n,i=e.context,o=i.shapes,r=i.validatedShapes;i.shapes=(n=Bu(t=o),D(\"id\",t,n)),i.validatedShapes=function(e){var t=B(e,\"id\");return E(e,function(e){for(;e;){if(e.host&&t[e.host.id])return!1;e=e.parent}return!0})}(r)}),o&&t.on(\"shape.move.start\",Mu,function(e){var t=e.context;S(Bu(t.shapes),function(e){o.makeDraggable(t,e,!0),S(e.labels,function(e){o.makeDraggable(t,e,!0)})})}),this.preExecuted(\"elements.move\",Au,function(e){var t=e.context,n=t.closure;S(Bu(t.shapes),function(e){n.add(e,n.topLevel[e.host.id])})}),this.postExecuted(\"elements.move\",function(e){var t=e.context,n=t.shapes,o=t.newHost;n.length>1||S(o?n:E(n,function(e){return!!e.host}),function(e){i.updateAttachment(e,o)})}),this.postExecuted(\"elements.move\",function(e){S(e.context.shapes,function(e){S(e.attachers,function(e){S(e.outgoing.slice(),function(e){n.allowed(\"connection.reconnectStart\",{connection:e,source:e.source,target:e.target})||i.removeConnection(e)}),S(e.incoming.slice(),function(e){n.allowed(\"connection.reconnectEnd\",{connection:e,source:e.source,target:e.target})||i.removeConnection(e)})})})}),this.postExecute(\"shape.create\",function(e){var t=e.context,n=t.shape,o=t.host;o&&i.updateAttachment(n,o)}),this.postExecute(\"shape.replace\",function(e){var t=e.context,o=t.oldShape,r=t.newShape;_u(o.attachers,function(e){\"attach\"===n.allowed(\"elements.move\",{target:r,shapes:[e]})?i.updateAttachment(e,r):i.removeShape(e)}),r.attachers.length&&S(r.attachers,function(e){var t=Ru(e,o,r);i.moveShape(e,t,e.parent)})}),this.postExecute(\"shape.resize\",function(e){var t=e.context,n=t.shape,o=t.oldBounds,r=t.newBounds;S(n.attachers,function(e){var t=Ru(e,o,r);i.moveShape(e,t,e.parent),S(e.labels,function(e){i.moveShape(e,t,e.parent)})})}),this.preExecute(\"shape.delete\",function(e){var t=e.context.shape;_u(t.attachers,function(e){i.removeShape(e)}),t.host&&i.updateAttachment(t,null)}),t.on(\"spaceTool.move\",function(e){var t=e.context,n=t.initialized,i=t.attachSupportInitialized;if(n&&!i){var o=t.movingShapes;S(E(o,function(e){var t=e.host;return t&&-1===o.indexOf(t)}),function(e){yt(o,e),S(e.labels,function(t){yt(o,e.label)})}),t.attachSupportInitialized=!0}})}function Bu(e){return l(M(e,function(e){return e.attachers||[]}))}s()(ku,ga),ku.$inject=[\"injector\",\"eventBus\",\"rules\",\"modeling\"];var Nu={__depends__:[La],__init__:[\"attachSupport\"],attachSupport:[\"type\",ku]};function Du(e,t){this._eventBus=e,this._dragging=t,this._tools=[],this._active=null}Du.$inject=[\"eventBus\",\"dragging\"],Du.prototype.registerTool=function(e,t){var n=this._tools;if(!t)throw new Error('A tool has to be registered with it\\'s \"events\"');n.push(e),this.bindEvents(e,t)},Du.prototype.isActive=function(e){return e&&this._active===e},Du.prototype.length=function(e){return this._tools.length},Du.prototype.setActive=function(e){var t=this._eventBus;this._active!==e&&(this._active=e,t.fire(\"tool-manager.update\",{tool:e}))},Du.prototype.bindEvents=function(e,t){var n=this._eventBus,i=this._dragging,o=[];n.on(t.tool+\".init\",function(t){if(!t.context.reactivate&&this.isActive(e))return this.setActive(null),void i.cancel();this.setActive(e)},this),S(t,function(e){o.push(e+\".ended\"),o.push(e+\".canceled\")}),n.on(o,250,function(e){var t=e.originalEvent;this._active&&(t&&oe(t.target,'.group[data-group=\"tools\"]')||this.setActive(null))},this)};var Ou={__depends__:[Ma],__init__:[\"toolManager\"],toolManager:[\"type\",Du]};function Lu(e,t){if(\"x\"===e){if(t>0)return\"e\";if(t<0)return\"w\"}if(\"y\"===e){if(t>0)return\"s\";if(t<0)return\"n\"}return null}var ju=Math.abs,Iu=Math.round,zu=1500,Fu={x:\"width\",y:\"height\"},$u={x:\"y\",y:\"x\"};function Vu(e,t,n,i,o,r){this._canvas=n,this._dragging=t,this._modeling=i,this._rules=o,this._toolManager=r;var a=this;r.registerTool(\"space\",{tool:\"spaceTool.selection\",dragging:\"spaceTool\"}),e.on(\"spaceTool.selection.end\",function(t){var n=t.originalEvent.target;(t.hover||n instanceof SVGElement)&&e.once(\"spaceTool.selection.ended\",function(){a.activateMakeSpace(t.originalEvent)})}),e.on(\"spaceTool.move\",zu,function(e){var t=e.context;t.initialized||(t.initialized=a.initializeMakeSpace(e,t))}),e.on(\"spaceTool.end\",function(t){var n=t.context,i=n.axis,o=n.direction,r=n.movingShapes,s=n.resizingShapes;if(n.initialized){var c={x:Iu(t.dx),y:Iu(t.dy)};c[$u[i]]=0;var p=!0;S(s,function(e){(\"w\"===o&&t.x>e.x+e.width||\"e\"===o&&t.x<e.x||\"n\"===o&&t.y>e.y+e.height||\"s\"===o&&t.y<e.y)&&(p=!1)}),p&&a.makeSpace(r,s,c,o),e.once(\"spaceTool.ended\",function(e){a.activateSelection(e.originalEvent,!0,!0)})}})}Vu.$inject=[\"eventBus\",\"dragging\",\"canvas\",\"modeling\",\"rules\",\"toolManager\"],Vu.prototype.activateSelection=function(e,t,n){this._dragging.init(e,\"spaceTool.selection\",{trapClick:!1,cursor:\"crosshair\",autoActivate:t,data:{context:{reactivate:n}}})},Vu.prototype.activateMakeSpace=function(e){this._dragging.init(e,\"spaceTool\",{autoActivate:!0,cursor:\"crosshair\",data:{context:{}}})},Vu.prototype.makeSpace=function(e,t,n,i){return this._modeling.createSpace(e,t,n,i)},Vu.prototype.initializeMakeSpace=function(e,t){var n=ju(e.dx)>ju(e.dy)?\"x\":\"y\",i=e[\"d\"+n],o=e[n]-i;if(ju(i)<5)return!1;i<0&&(i*=-1),Io(e)&&(i*=-1);var r=wt(this._canvas.getRootElement(),!0);return W(t,this.calculateAdjustments(r,n,i,o),{axis:n,direction:Lu(n,i)}),Er(\"resize-\"+(\"x\"===n?\"ew\":\"ns\")),!0},Vu.prototype.calculateAdjustments=function(e,t,n,i){var o=[],r=[],a=this._rules;return e.forEach(function(e){var s=e[t],c=s+e[Fu[t]];if(e.parent&&!e.waypoints)return n>0&&s>i?o.push(e):n<0&&c<i?o.push(e):s<i&&c>i&&a.allowed(\"shape.resize\",{shape:e})?r.push(e):void 0}),{movingShapes:o,resizingShapes:r}},Vu.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.activateSelection()},Vu.prototype.isActive=function(){var e=this._dragging.context();return e&&/^spaceTool/.test(e.prefix)};var Hu=\"djs-dragging\",Wu=\"djs-resizing\",Gu=250;function qu(e,t,n,i,o){function r(e,t){S(e,function(e){o.addDragger(e,t),n.addMarker(e,Hu)})}e.on(\"spaceTool.selection.start\",function(e){var t=n.getLayer(\"space\"),o=e.context,r=\"M 0,-10000 L 0,10000\",a=\"M -10000,0 L 10000,0\",s=Ie(\"g\");Ce(s,i.cls(\"djs-crosshair-group\",[\"no-events\"])),we(t,s);var c=Ie(\"path\");Ce(c,\"d\",r),ke(c).add(\"djs-crosshair\"),we(s,c);var p=Ie(\"path\");Ce(p,\"d\",a),ke(p).add(\"djs-crosshair\"),we(s,p),o.crosshairGroup=s}),e.on(\"spaceTool.selection.move\",function(e){Qt(e.context.crosshairGroup,e.x,e.y)}),e.on(\"spaceTool.selection.cleanup\",function(e){var t=e.context.crosshairGroup;t&&Ne(t)}),e.on(\"spaceTool.move\",Gu,function(e){var a=e.context,s=a.line,c=a.axis,p=a.movingShapes,l=a.resizingShapes;if(a.initialized){if(!a.dragGroup){var u=n.getLayer(\"space\");Ce(s=Ie(\"path\"),\"d\",\"M0,0 L0,0\"),ke(s).add(\"djs-crosshair\"),we(u,s),a.line=s;var h=Ie(\"g\");Ce(h,i.cls(\"djs-drag-group\",[\"no-events\"])),we(n.getDefaultLayer(),h),r(p,h),r(a.movingConnections=t.filter(function(e){var t=!1;S(p,function(n){S(n.outgoing,function(n){e===n&&(t=!0)})});var n=!1;S(p,function(t){S(t.incoming,function(t){e===t&&(n=!0)})});var i=!1;S(l,function(t){S(t.outgoing,function(t){e===t&&(i=!0)})});var o=!1;return S(l,function(t){S(t.incoming,function(t){e===t&&(o=!0)})}),function(e){return e.waypoints}(e)&&(t||i)&&(n||o)}),h),a.dragGroup=h}if(!a.frameGroup){var d=Ie(\"g\");Ce(d,i.cls(\"djs-frame-group\",[\"no-events\"])),we(n.getDefaultLayer(),d);var m=[];S(l,function(e){var t=o.addFrame(e,d);m.push({element:t,initialWidth:t.getBBox().width,initialHeight:t.getBBox().height}),n.addMarker(e,Wu)}),a.frameGroup=d,a.frames=m}Ce(s,{path:{x:\"M\"+e.x+\", -10000 L\"+e.x+\", 10000\",y:\"M -10000, \"+e.y+\" L 10000, \"+e.y}[c],display:\"\"});var f={x:e.dx,y:e.dy};f[{x:\"y\",y:\"x\"}[a.axis]]=0,Qt(a.dragGroup,f.x,f.y),S(a.frames,function(e){e.initialWidth+f.x>5&&Ce(e.element,{width:e.initialWidth+f.x}),e.initialHeight+f.y>5&&Ce(e.element,{height:e.initialHeight+f.y})})}}),e.on(\"spaceTool.cleanup\",function(e){var t=e.context,i=t.movingShapes,o=t.movingConnections,r=t.resizingShapes,a=t.line,s=t.dragGroup,c=t.frameGroup;S(i,function(e){n.removeMarker(e,Hu)}),S(o,function(e){n.removeMarker(e,Hu)}),s&&(Ne(a),Ne(s)),S(r,function(e){n.removeMarker(e,Wu)}),c&&Ne(c)})}qu.$inject=[\"eventBus\",\"elementRegistry\",\"canvas\",\"styles\",\"previewSupport\"];var Uu={__init__:[\"spaceToolPreview\"],__depends__:[Ma,La,Ou,ep],spaceTool:[\"type\",Vu],spaceToolPreview:[\"type\",qu]};function Ku(e){this._model=e}function Yu(e,t,n,i){ga.call(this,e),this._bpmnFactory=t,this._translate=i;var o=this;function r(e){S(e.context.oldRoot.children,function(e){Mi(e,\"bpmn:BaseElement\")&&o.updateParent(e)})}function a(e){var t=e.context.shape;Mi(t,\"bpmn:BaseElement\")&&o.updateBounds(t)}function s(e){o.updateConnection(e.context)}function c(e){o.updateConnectionWaypoints(e.context.connection)}function p(e){o.updateAttachment(e.context)}this.executed([\"connection.layout\",\"connection.create\",\"connection.reconnectEnd\",\"connection.reconnectStart\"],function(e){var t,i=e.context;i.cropped||((t=i.connection).waypoints=n.getCroppedWaypoints(t),i.cropped=!0)}),this.reverted([\"connection.layout\"],function(e){delete e.context.cropped}),this.executed([\"shape.move\",\"shape.create\",\"shape.delete\",\"connection.create\",\"connection.move\",\"connection.delete\"],Xu(function(e){var t=e.context;o.updateParent(t.shape||t.connection,t.oldParent)})),this.reverted([\"shape.move\",\"shape.create\",\"shape.delete\",\"connection.create\",\"connection.move\",\"connection.delete\"],Xu(function(e){var t=e.context,n=t.shape||t.connection,i=t.parent||t.newParent;o.updateParent(n,i)})),this.executed([\"canvas.updateRoot\"],r),this.reverted([\"canvas.updateRoot\"],r),this.executed([\"shape.move\",\"shape.create\",\"shape.resize\"],Xu(function(e){\"label\"!==e.context.shape.type&&a(e)})),this.reverted([\"shape.move\",\"shape.create\",\"shape.resize\"],Xu(function(e){\"label\"!==e.context.shape.type&&a(e)})),e.on(\"shape.changed\",function(e){\"label\"===e.element.type&&a({context:{shape:e.element}})}),this.executed([\"connection.create\",\"connection.move\",\"connection.delete\",\"connection.reconnectEnd\",\"connection.reconnectStart\"],Xu(s)),this.reverted([\"connection.create\",\"connection.move\",\"connection.delete\",\"connection.reconnectEnd\",\"connection.reconnectStart\"],Xu(s)),this.executed([\"connection.layout\",\"connection.move\",\"connection.updateWaypoints\",\"connection.reconnectEnd\",\"connection.reconnectStart\"],Xu(c)),this.reverted([\"connection.layout\",\"connection.move\",\"connection.updateWaypoints\",\"connection.reconnectEnd\",\"connection.reconnectStart\"],Xu(c)),this.executed([\"connection.reconnectEnd\",\"connection.reconnectStart\"],Xu(function(e){var t=e.context,n=t.connection,i=Ai(n),o=Ai(t.oldSource),r=Ai(t.oldTarget),a=Ai(n.source),s=Ai(n.target);o!==a&&r!==s&&(o&&o.default===i&&(t.default=o.default,o.default=void 0),i.sourceRef&&i.sourceRef.default&&!(Mi(s,\"bpmn:Activity\")||Mi(s,\"bpmn:EndEvent\")||Mi(s,\"bpmn:Gateway\")||Mi(s,\"bpmn:IntermediateThrowEvent\"))&&(t.default=i.sourceRef.default,i.sourceRef.default=void 0),o&&i.conditionExpression&&!Mi(a,\"bpmn:Activity\")&&!Mi(a,\"bpmn:Gateway\")&&(t.conditionExpression=i.conditionExpression,i.conditionExpression=void 0),r&&i.conditionExpression&&!(Mi(s,\"bpmn:Activity\")||Mi(s,\"bpmn:EndEvent\")||Mi(s,\"bpmn:Gateway\")||Mi(s,\"bpmn:IntermediateThrowEvent\"))&&(t.conditionExpression=i.conditionExpression,i.conditionExpression=void 0))})),this.reverted([\"connection.reconnectEnd\",\"connection.reconnectStart\"],Xu(function(e){var t=e.context,n=t.connection,i=Ai(n),o=Ai(n.source);t.default&&(Mi(o,\"bpmn:ExclusiveGateway\")||Mi(o,\"bpmn:InclusiveGateway\")||Mi(o,\"bpmn:Activity\"))&&(o.default=t.default),t.conditionExpression&&Mi(o,\"bpmn:Activity\")&&(i.conditionExpression=t.conditionExpression)})),this.executed([\"element.updateAttachment\"],Xu(p)),this.reverted([\"element.updateAttachment\"],Xu(p))}function Xu(e){return function(t){var n=t.context;Mi(n.shape||n.connection,\"bpmn:BaseElement\")&&e(t)}}function Zu(e,t,n){Ut.call(this),this._bpmnFactory=e,this._moddle=t,this._translate=n}function Qu(e,t,n){e[n]=t[n],delete t[n]}function Ju(e){this._modeling=e}Ku.$inject=[\"moddle\"],Ku.prototype._needsId=function(e){return ia(e,[\"bpmn:RootElement\",\"bpmn:FlowElement\",\"bpmn:MessageFlow\",\"bpmn:DataAssociation\",\"bpmn:Artifact\",\"bpmn:Participant\",\"bpmn:Lane\",\"bpmn:LaneSet\",\"bpmn:Process\",\"bpmn:Collaboration\",\"bpmndi:BPMNShape\",\"bpmndi:BPMNEdge\",\"bpmndi:BPMNDiagram\",\"bpmndi:BPMNPlane\",\"bpmn:Property\"])},Ku.prototype._ensureId=function(e){var t=(e.$type||\"\").replace(/^[^:]*:/g,\"\")+\"_\";!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e))},Ku.prototype.create=function(e,t){var n=this._model.create(e,t||{});return this._ensureId(n),n},Ku.prototype.createDiLabel=function(){return this.create(\"bpmndi:BPMNLabel\",{bounds:this.createDiBounds()})},Ku.prototype.createDiShape=function(e,t,n){return this.create(\"bpmndi:BPMNShape\",W({bpmnElement:e,bounds:this.createDiBounds(t)},n))},Ku.prototype.createDiBounds=function(e){return this.create(\"dc:Bounds\",e)},Ku.prototype.createDiWaypoints=function(e){var t=this;return M(e,function(e){return t.createDiWaypoint(e)})},Ku.prototype.createDiWaypoint=function(e){return this.create(\"dc:Point\",G(e,[\"x\",\"y\"]))},Ku.prototype.createDiEdge=function(e,t,n){return this.create(\"bpmndi:BPMNEdge\",W({bpmnElement:e},n))},Ku.prototype.createDiPlane=function(e){return this.create(\"bpmndi:BPMNPlane\",{bpmnElement:e})},s()(Yu,ga),Yu.$inject=[\"eventBus\",\"bpmnFactory\",\"connectionDocking\",\"translate\"],Yu.prototype.updateAttachment=function(e){var t=e.shape,n=t.businessObject,i=t.host;n.attachedToRef=i&&i.businessObject},Yu.prototype.updateParent=function(e,t){if(!(e instanceof Wt||Mi(e,\"bpmn:DataStoreReference\")&&e.parent&&Mi(e.parent,\"bpmn:Collaboration\"))){var n=e.parent,i=e.businessObject,o=n&&n.businessObject,r=o&&o.di;Mi(e,\"bpmn:FlowNode\")&&this.updateFlowNodeRefs(i,o,t&&t.businessObject),Mi(e,\"bpmn:DataOutputAssociation\")&&(o=e.source?e.source.businessObject:null),Mi(e,\"bpmn:DataInputAssociation\")&&(o=e.target?e.target.businessObject:null),this.updateSemanticParent(i,o),Mi(e,\"bpmn:DataObjectReference\")&&i.dataObjectRef&&this.updateSemanticParent(i.dataObjectRef,o),this.updateDiParent(i.di,r)}},Yu.prototype.updateBounds=function(e){var t=e.businessObject.di,n=e instanceof Wt?this._getLabel(t):t,i=n.bounds;i||(i=this._bpmnFactory.createDiBounds(),n.set(\"bounds\",i)),W(i,{x:e.x,y:e.y,width:e.width,height:e.height})},Yu.prototype.updateFlowNodeRefs=function(e,t,n){n!==t&&(Mi(n,\"bpmn:Lane\")&&yt(n.get(\"flowNodeRef\"),e),Mi(t,\"bpmn:Lane\")&&gt(t.get(\"flowNodeRef\"),e))},Yu.prototype.updateDiConnection=function(e,t,n){e.sourceElement&&e.sourceElement.bpmnElement!==t&&(e.sourceElement=t&&t.di),e.targetElement&&e.targetElement.bpmnElement!==n&&(e.targetElement=n&&n.di)},Yu.prototype.updateDiParent=function(e,t){if(t&&!Mi(t,\"bpmndi:BPMNPlane\")&&(t=t.$parent),e.$parent!==t){var n=(t||e.$parent).get(\"planeElement\");t?(n.push(e),e.$parent=t):(yt(n,e),e.$parent=null)}},Yu.prototype.getLaneSet=function(e){var t,n;return Mi(e,\"bpmn:Lane\")?((t=e.childLaneSet)||(t=this._bpmnFactory.create(\"bpmn:LaneSet\"),e.childLaneSet=t,t.$parent=e),t):(Mi(e,\"bpmn:Participant\")&&(e=e.processRef),(t=(n=e.get(\"laneSets\"))[0])||((t=this._bpmnFactory.create(\"bpmn:LaneSet\")).$parent=e,n.push(t)),t)},Yu.prototype.updateSemanticParent=function(e,t,n){var i,o=this._translate;if(e.$parent!==t){if(Mi(e,\"bpmn:Lane\"))t&&(t=this.getLaneSet(t)),i=\"lanes\";else if(Mi(e,\"bpmn:FlowElement\")){if(t)if(Mi(t,\"bpmn:Participant\"))t=t.processRef;else if(Mi(t,\"bpmn:Lane\"))do{t=t.$parent.$parent}while(Mi(t,\"bpmn:Lane\"));i=\"flowElements\"}else if(Mi(e,\"bpmn:Artifact\")){for(;t&&!Mi(t,\"bpmn:Process\")&&!Mi(t,\"bpmn:SubProcess\")&&!Mi(t,\"bpmn:Collaboration\");){if(Mi(t,\"bpmn:Participant\")){t=t.processRef;break}t=t.$parent}i=\"artifacts\"}else if(Mi(e,\"bpmn:MessageFlow\"))i=\"messageFlows\";else if(Mi(e,\"bpmn:Participant\")){i=\"participants\";var r,a=e.processRef;a&&(r=function(e){for(;e&&!Mi(e,\"bpmn:Definitions\");)e=e.$parent;return e}(e.$parent||t),e.$parent&&(yt(r.get(\"rootElements\"),a),a.$parent=null),t&&(gt(r.get(\"rootElements\"),a),a.$parent=r))}else Mi(e,\"bpmn:DataOutputAssociation\")?i=\"dataOutputAssociations\":Mi(e,\"bpmn:DataInputAssociation\")&&(i=\"dataInputAssociations\");if(!i)throw new Error(o(\"no parent for {element} in {parent}\",{element:e.id,parent:t.id}));var s;if(e.$parent&&yt(s=e.$parent.get(i),e),t?((s=t.get(i)).push(e),e.$parent=t):e.$parent=null,n){var c=n.get(i);yt(s,e),t&&(c||(c=[],t.set(i,c)),c.push(e))}}},Yu.prototype.updateConnectionWaypoints=function(e){e.businessObject.di.set(\"waypoint\",this._bpmnFactory.createDiWaypoints(e.waypoints))},Yu.prototype.updateConnection=function(e){var t,n=e.connection,i=Ai(n),o=Ai(n.source),r=Ai(n.target);if(Mi(i,\"bpmn:DataAssociation\"))Mi(i,\"bpmn:DataInputAssociation\")?(i.get(\"sourceRef\")[0]=o,t=e.parent||e.newParent||r,this.updateSemanticParent(i,r,parent.businessObject)):Mi(i,\"bpmn:DataOutputAssociation\")&&(t=e.parent||e.newParent||o,this.updateSemanticParent(i,o,t),i.targetRef=r);else{var a=Mi(i,\"bpmn:SequenceFlow\");i.sourceRef!==o&&(a&&(yt(i.sourceRef&&i.sourceRef.get(\"outgoing\"),i),o&&o.get(\"outgoing\")&&o.get(\"outgoing\").push(i)),i.sourceRef=o),i.targetRef!==r&&(a&&(yt(i.targetRef&&i.targetRef.get(\"incoming\"),i),r&&r.get(\"incoming\")&&r.get(\"incoming\").push(i)),i.targetRef=r)}this.updateConnectionWaypoints(n),this.updateDiConnection(i.di,o,r)},Yu.prototype._getLabel=function(e){return e.label||(e.label=this._bpmnFactory.createDiLabel()),e.label},s()(Zu,Ut),Zu.$inject=[\"bpmnFactory\",\"moddle\",\"translate\"],Zu.prototype.baseCreate=Ut.prototype.create,Zu.prototype.create=function(e,t){return\"label\"===e?this.baseCreate(e,W({type:\"label\"},ao,t)):this.createBpmnElement(e,t)},Zu.prototype.createBpmnElement=function(e,t){var n,i,o,r=this._translate,a=(t=t||{}).businessObject;if(!a){if(!t.type)throw new Error(r(\"no shape type specified\"));a=this._bpmnFactory.create(t.type)}return a.di||(a.di=\"root\"===e?this._bpmnFactory.createDiPlane(a,[],{id:a.id+\"_di\"}):\"connection\"===e?this._bpmnFactory.createDiEdge(a,[],{id:a.id+\"_di\"}):this._bpmnFactory.createDiShape(a,{},{id:a.id+\"_di\"})),t.colors&&(W(a.di,t.colors),delete t.colors),function(e,t,n){S(n,function(n){void 0!==t[n]&&Qu(e,t,n)})}(a,t,[\"processRef\",\"isInterrupting\",\"associationDirection\",\"isForCompensation\"]),t.isExpanded&&Qu(a.di,t,\"isExpanded\"),Mi(a,\"bpmn:ExclusiveGateway\")&&(a.di.isMarkerVisible=!0),t.eventDefinitionType&&(i=a.get(\"eventDefinitions\")||[],o=this._moddle.create(t.eventDefinitionType),\"bpmn:ConditionalEventDefinition\"===t.eventDefinitionType&&(o.condition=this._moddle.create(\"bpmn:FormalExpression\")),i.push(o),o.$parent=a,a.eventDefinitions=i,delete t.eventDefinitionType),n=this._getDefaultSize(a),t=W({businessObject:a,id:a.id},n,t),this.baseCreate(e,t)},Zu.prototype._getDefaultSize=function(e){return Mi(e,\"bpmn:SubProcess\")?ki(e)?{width:350,height:200}:{width:100,height:80}:Mi(e,\"bpmn:Task\")?{width:100,height:80}:Mi(e,\"bpmn:Gateway\")?{width:50,height:50}:Mi(e,\"bpmn:Event\")?{width:36,height:36}:Mi(e,\"bpmn:Participant\")?ki(e)?{width:600,height:250}:{width:400,height:100}:Mi(e,\"bpmn:Lane\")?{width:400,height:100}:Mi(e,\"bpmn:DataObjectReference\")?{width:36,height:50}:Mi(e,\"bpmn:DataStoreReference\")?{width:50,height:50}:Mi(e,\"bpmn:TextAnnotation\")?{width:100,height:30}:{width:100,height:80}},Zu.prototype.createParticipantShape=function(e){var t={type:\"bpmn:Participant\"};return e||(t.processRef=this._bpmnFactory.create(\"bpmn:Process\")),this.createShape(t)},Ju.$inject=[\"modeling\"],Ju.prototype.preExecute=function(e){var t=e.source;if(!t)throw new Error(\"source required\");var n=e.target||t.parent,i=e.shape;i=e.shape=this._modeling.createShape(i,e.position,n,{attach:e.attach}),e.shape=i},Ju.prototype.postExecute=function(e){var t,n,i=e.connectionParent||e.shape.parent;t=e.source,n=e.shape,R(t.outgoing,function(e){return e.target===n})||this._modeling.connect(e.source,e.shape,e.connection,i)};var eh=Math.round;function th(e){this._canvas=e}function nh(e,t){this._canvas=e,this._modeling=t}function ih(e,t,n){var i=ch(e)[0];return Tu(i.original||i,n,t)}function oh(e,t,n){var i=ch(e),o=i[i.length-1];return Tu(o.original||o,n,t)}function rh(e,t,n){return ih(e,t,sh(t,n))}function ah(e,t,n){return oh(e,t,sh(t,n))}function sh(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height}}function ch(e){var t=e.waypoints;if(!t.length)throw new Error(\"connection#\"+e.id+\": no waypoints\");return t}function ph(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}function lh(e){this._modeling=e}function uh(e){this._modeling=e,this._helper=new lh(e)}function hh(e){this._modeling=e}function dh(e,t){this._modeling=e,this._rules=t}function mh(e){this._modeling=e}function fh(e){this._modeling=e}function yh(e){th.call(this,e)}th.$inject=[\"canvas\"],th.prototype.execute=function(e){var t=e.shape,n=e.position,i=e.parent,o=e.parentIndex;if(!i)throw new Error(\"parent required\");if(!n)throw new Error(\"position required\");return void 0!==n.width?W(t,n):W(t,{x:n.x-eh(t.width/2),y:n.y-eh(t.height/2)}),this._canvas.addShape(t,i,o),t},th.prototype.revert=function(e){this._canvas.removeShape(e.shape)},nh.$inject=[\"canvas\",\"modeling\"],nh.prototype.preExecute=function(e){var t=this._modeling,n=e.shape;_u(n.incoming,function(e){t.removeConnection(e,{nested:!0})}),_u(n.outgoing,function(e){t.removeConnection(e,{nested:!0})}),_u(n.children,function(e){e.waypoints?t.removeConnection(e,{nested:!0}):t.removeShape(e,{nested:!0})})},nh.prototype.execute=function(e){var t=this._canvas,n=e.shape,i=n.parent;return e.oldParent=i,e.oldParentIndex=vt(i.children,n),t.removeShape(n),n},nh.prototype.revert=function(e){var t=this._canvas,n=e.shape,i=e.oldParent,o=e.oldParentIndex;return gt(i.children,n,o),t.addShape(n,i),n},ph.prototype.add=function(e,t){return this.addAll([e],t)},ph.prototype.addAll=function(e,t){return W(this,function(e,t,n){d(t)&&(t=!0),y(t)&&(n=t,t=!0);var i=Pt((n=n||{}).allShapes),o=Pt(n.allConnections),r=Pt(n.enclosedElements),a=Pt(n.enclosedConnections),s=Pt(n.topLevel,t&&B(e,function(e){return e.id}));function c(e){s[e.source.id]&&s[e.target.id]&&(s[e.id]=[e]),i[e.source.id]&&i[e.target.id]&&(a[e.id]=r[e.id]=e),o[e.id]=e}return xt(e,function(e){if(r[e.id]=e,!e.waypoints)return i[e.id]=e,S(e.incoming,c),S(e.outgoing,c),e.children;a[e.id]=o[e.id]=e}),{allShapes:i,allConnections:o,topLevel:s,enclosedConnections:a,enclosedElements:r}}(e,!!t,this)),this},lh.prototype.moveRecursive=function(e,t,n){return e?this.moveClosure(this.getClosure(e),t,n):[]},lh.prototype.moveClosure=function(e,t,n,i,o){var r=this._modeling,a=e.allShapes,s=e.allConnections,c=e.enclosedConnections,p=e.topLevel,l=!1;o&&o.parent===n&&(l=!0),S(a,function(e){r.moveShape(e,t,p[e.id]&&!l&&n,{recurse:!1,layout:!1})}),S(s,function(e){var i=!!a[e.source.id],o=!!a[e.target.id];c[e.id]&&i&&o?r.moveConnection(e,t,p[e.id]&&!l&&n):r.layoutConnection(e,{connectionStart:i&&rh(e,e.source,t),connectionEnd:o&&ah(e,e.target,t)})})},lh.prototype.getClosure=function(e){return(new ph).addAll(e,!0)},uh.$inject=[\"modeling\"],uh.prototype.execute=function(e){var t=e.shape,n=e.delta,i=e.newParent||t.parent,o=e.newParentIndex,r=t.parent;return e.oldBounds=G(t,[\"x\",\"y\",\"width\",\"height\"]),e.oldParent=r,e.oldParentIndex=yt(r.children,t),gt(i.children,t,o),W(t,{parent:i,x:t.x+n.x,y:t.y+n.y}),t},uh.prototype.postExecute=function(e){var t=e.shape,n=e.delta,i=e.hints,o=this._modeling;!1!==i.layout&&(S(t.incoming,function(e){o.layoutConnection(e,{connectionEnd:ah(e,t,n)})}),S(t.outgoing,function(e){o.layoutConnection(e,{connectionStart:rh(e,t,n)})})),!1!==i.recurse&&this.moveChildren(e)},uh.prototype.revert=function(e){var t=e.shape,n=e.oldParent,i=e.oldParentIndex,o=e.delta;return gt(n.children,t,i),W(t,{parent:n,x:t.x-o.x,y:t.y-o.y}),t},uh.prototype.moveChildren=function(e){var t=e.delta,n=e.shape;this._helper.moveRecursive(n.children,t,null)},uh.prototype.getNewParent=function(e){return e.newParent||e.shape.parent},hh.$inject=[\"modeling\"],hh.prototype.execute=function(e){var t=e.shape,n=e.newBounds,i=e.minBounds;if(void 0===n.x||void 0===n.y||void 0===n.width||void 0===n.height)throw new Error(\"newBounds must have {x, y, width, height} properties\");if(i&&(n.width<i.width||n.height<i.height))throw new Error(\"width and height cannot be less than minimum height and width\");if(!i&&n.width<10||n.height<10)throw new Error(\"width and height cannot be less than 10px\");return e.oldBounds={width:t.width,height:t.height,x:t.x,y:t.y},W(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t},hh.prototype.postExecute=function(e){var t=e.shape,n=e.oldBounds,i=this._modeling;S(t.incoming,function(e){i.layoutConnection(e,{connectionEnd:oh(e,t,n)})}),S(t.outgoing,function(e){i.layoutConnection(e,{connectionStart:ih(e,t,n)})})},hh.prototype.revert=function(e){var t=e.shape,n=e.oldBounds;return W(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t},dh.$inject=[\"modeling\",\"rules\"],dh.prototype.preExecute=function(e){var t,n=this,i=this._modeling,o=this._rules,r=e.oldShape,a=e.newData,s=e.hints;function c(e,t,n,i){return o.allowed(e,{source:t,target:n,connection:i})}var p,l={x:a.x,y:a.y};t=e.newShape=e.newShape||n.createShape(a,l,r.parent,s),r.host&&i.updateAttachment(t,r.host),!1!==s.moveChildren&&(p=r.children.slice(),i.moveElements(p,{x:0,y:0},t));var u=r.incoming.slice(),h=r.outgoing.slice();S(u,function(e){var i=e.waypoints,o=i[i.length-1];c(\"connection.reconnectEnd\",e.source,t,e)&&n.reconnectEnd(e,t,o)}),S(h,function(e){var i=e.waypoints[0],o=e.target;c(\"connection.reconnectStart\",t,o,e)&&n.reconnectStart(e,t,i)})},dh.prototype.postExecute=function(e){var t=this._modeling,n=e.oldShape,i=e.newShape;S(i.incoming,function(e){t.layoutConnection(e,{endChanged:!0})}),S(i.outgoing,function(e){t.layoutConnection(e,{startChanged:!0})}),t.removeShape(n)},dh.prototype.execute=function(e){},dh.prototype.revert=function(e){},dh.prototype.createShape=function(e,t,n,i){return this._modeling.createShape(e,t,n,i)},dh.prototype.reconnectStart=function(e,t,n){this._modeling.reconnectStart(e,t,n)},dh.prototype.reconnectEnd=function(e,t,n){this._modeling.reconnectEnd(e,t,n)},mh.$inject=[\"modeling\"],mh.prototype.execute=function(e){var t,n=e.shape,i=n.children;return e.oldChildrenVisibility=(t={},i.forEach(function(e){t[e.id]=e.hidden}),t),n.collapsed=!n.collapsed,function(e,t){e.forEach(function(e){e.hidden=t})}(i,n.collapsed),[n].concat(i)},mh.prototype.revert=function(e){var t,n=e.shape,i=e.oldChildrenVisibility,o=n.children;return t=i,o.forEach(function(e){e.hidden=t[e.id]}),n.collapsed=!n.collapsed,[n].concat(o)},fh.$inject=[\"modeling\"],fh.prototype.preExecute=function(e){var t=this._modeling,n=e.resizingShapes,i=e.delta,o=e.direction;S(n,function(e){var n=function(e,t,n){var i=n.x,o=n.y;switch(t){case\"n\":return{x:e.x,y:e.y+o,width:e.width,height:e.height-o};case\"s\":return{x:e.x,y:e.y,width:e.width,height:e.height+o};case\"w\":return{x:e.x+i,y:e.y,width:e.width-i,height:e.height};case\"e\":return{x:e.x,y:e.y,width:e.width+i,height:e.height};default:throw new Error(\"unrecognized direction: \"+t)}}(e,o,i);t.resizeShape(e,n)})},fh.prototype.postExecute=function(e){var t=this._modeling,n=e.movingShapes,i=e.delta;t.moveElements(n,i,void 0,{autoResize:!1,attach:!1})},fh.prototype.execute=function(e){},fh.prototype.revert=function(e){},s()(yh,th),yh.$inject=[\"canvas\"];var gh=th.prototype.execute;yh.prototype.execute=function(e){var t=e.shape;return function(e){[\"width\",\"height\"].forEach(function(t){void 0===e[t]&&(e[t]=0)})}(t),t.labelTarget=e.labelTarget,gh.call(this,e)};var vh=th.prototype.revert;function bh(e,t){this._canvas=e,this._layouter=t}function xh(e,t){this._canvas=e,this._modeling=t}function _h(){}function wh(e,t){this._layouter=e,this._canvas=t}function Eh(){}function Sh(){}function Ph(e){this._helper=new lh(e)}function Ch(e,t){this._modeling=e,this._elementRegistry=t}function Th(e){this._modeling=e}yh.prototype.revert=function(e){return e.shape.labelTarget=null,vh.call(this,e)},bh.$inject=[\"canvas\",\"layouter\"],bh.prototype.execute=function(e){var t=e.connection,n=e.source,i=e.target,o=e.parent,r=e.parentIndex,a=e.hints;if(!n||!i)throw new Error(\"source and target required\");if(!o)throw new Error(\"parent required\");return t.source=n,t.target=i,t.waypoints||(t.waypoints=this._layouter.layoutConnection(t,a)),this._canvas.addConnection(t,o,r),t},bh.prototype.revert=function(e){var t=e.connection;this._canvas.removeConnection(t),t.source=null,t.target=null},xh.$inject=[\"canvas\",\"modeling\"],xh.prototype.execute=function(e){var t=e.connection,n=t.parent;return e.parent=n,e.parentIndex=vt(n.children,t),e.source=t.source,e.target=t.target,this._canvas.removeConnection(t),t.source=null,t.target=null,t},xh.prototype.revert=function(e){var t=e.connection,n=e.parent,i=e.parentIndex;return t.source=e.source,t.target=e.target,gt(n.children,t,i),this._canvas.addConnection(t,n),t},_h.prototype.execute=function(e){var t=e.connection,n=e.delta,i=e.newParent||t.parent,o=e.newParentIndex,r=t.parent;return e.oldParent=r,e.oldParentIndex=yt(r.children,t),gt(i.children,t,o),t.parent=i,S(t.waypoints,function(e){e.x+=n.x,e.y+=n.y,e.original&&(e.original.x+=n.x,e.original.y+=n.y)}),t},_h.prototype.revert=function(e){var t=e.connection,n=t.parent,i=e.oldParent,o=e.oldParentIndex,r=e.delta;return yt(n.children,t),gt(i.children,t,o),t.parent=i,S(t.waypoints,function(e){e.x-=r.x,e.y-=r.y,e.original&&(e.original.x-=r.x,e.original.y-=r.y)}),t},wh.$inject=[\"layouter\",\"canvas\"],wh.prototype.execute=function(e){var t=e.connection;return W(e,{oldWaypoints:t.waypoints}),t.waypoints=this._layouter.layoutConnection(t,e.hints),t},wh.prototype.revert=function(e){var t=e.connection;return t.waypoints=e.oldWaypoints,t},Eh.prototype.execute=function(e){var t=e.connection,n=e.newWaypoints;return e.oldWaypoints=t.waypoints,t.waypoints=n,t},Eh.prototype.revert=function(e){var t=e.connection,n=e.oldWaypoints;return t.waypoints=n,t},Sh.$inject=[],Sh.prototype.execute=function(e){var t,n=e.newSource,i=e.newTarget,o=e.connection,r=e.dockingOrPoints,a=o.waypoints;if(!n&&!i)throw new Error(\"newSource or newTarget are required\");if(n&&i)throw new Error(\"must specify either newSource or newTarget\");return e.oldWaypoints=a,f(r)?t=r:(t=a.slice()).splice(n?0:-1,1,r),n&&(e.oldSource=o.source,o.source=n),i&&(e.oldTarget=o.target,o.target=i),o.waypoints=t,o},Sh.prototype.revert=function(e){var t=e.newSource,n=e.newTarget,i=e.connection;return t&&(i.source=e.oldSource),n&&(i.target=e.oldTarget),i.waypoints=e.oldWaypoints,i},Ph.$inject=[\"modeling\"],Ph.prototype.preExecute=function(e){e.closure=this._helper.getClosure(e.shapes)},Ph.prototype.postExecute=function(e){var t,n=e.hints;n&&n.primaryShape&&(t=n.primaryShape,n.oldParent=t.parent),this._helper.moveClosure(e.closure,e.delta,e.newParent,e.newHost,t)},Ch.$inject=[\"modeling\",\"elementRegistry\"],Ch.prototype.postExecute=function(e){var t=this._modeling,n=this._elementRegistry;S(e.elements,function(e){n.get(e.id)&&(e.waypoints?t.removeConnection(e):t.removeShape(e))})},Th.$inject=[\"modeling\"];var Rh={x:\"y\",y:\"x\"};function Mh(e,t){this._modeling=e,this._canvas=t}function Ah(e){this._modeling=e}function kh(e,t){return yt(e&&e.attachers,t)}function Bh(e,t,n){if(e){var i=e.attachers;i||(e.attachers=i=[]),gt(i,t,n)}}function Nh(e,t){S(t,function(t){e[t]&&delete e[t]})}function Dh(e,t,n,i,o,r){this._eventBus=e,this._canvas=t,this._selection=n,this._elementFactory=i,this._modeling=o,this._rules=r}function Oh(e,t,n){this._eventBus=e,this._elementFactory=t,this._commandStack=n;var i=this;e.on(\"diagram.init\",function(){i.registerHandlers(n)})}Th.prototype.preExecute=function(e){var t=this._modeling,n=e.groups,i=e.axis,o=e.dimension;function r(e,t){e.range.min=Math.min(t[i],e.range.min),e.range.max=Math.max(t[i]+t[o],e.range.max)}function a(e){return e[i]+e[o]/2}function s(e){return e.length-1}function c(e){return e.max-e.min}var p,l,u=n[0],h=s(n),d=n[h],m=0;S(n,function(e,p){var l,u,d;e.elements.length<2?p&&p!==n.length-1&&(r(e,e.elements[0]),m+=c(e.range)):(u=(l=O(e.elements,i))[0],p===h&&(u=l[s(l)]),d=a(u),e.range=null,S(l,function(n){!function(e,n){var o={y:0};o[i]=e-a(n),o[i]&&(o[Rh[i]]=0,t.moveElements([n],o,n.parent))}(d,n),null!==e.range?r(e,n):e.range={min:n[i],max:n[i]+n[o]}}),p&&p!==n.length-1&&(m+=c(e.range)))}),l=Math.abs(d.range.min-u.range.max),(p=Math.round((l-m)/(n.length-1)))<n.length-1||S(n,function(e,r){var a,s={};e!==u&&e!==d&&(a=n[r-1],e.range.max=0,S(e.elements,function(n,r){s[Rh[i]]=0,s[i]=a.range.max-n[i]+p,e.range.min!==n[i]&&(s[i]+=n[i]-e.range.min),s[i]&&t.moveElements([n],s,n.parent),e.range.max=Math.max(n[i]+n[o],r?e.range.max:0)}))})},Th.prototype.postExecute=function(e){},Mh.$inject=[\"modeling\",\"canvas\"],Mh.prototype.preExecute=function(e){var t=this._modeling,n=e.elements,i=e.alignment;S(n,function(e){var n={x:0,y:0};i.left?n.x=i.left-e.x:i.right?n.x=i.right-e.width-e.x:i.center?n.x=i.center-Math.round(e.width/2)-e.x:i.top?n.y=i.top-e.y:i.bottom?n.y=i.bottom-e.height-e.y:i.middle&&(n.y=i.middle-Math.round(e.height/2)-e.y),t.moveElements([e],n,e.parent)})},Mh.prototype.postExecute=function(e){},Ah.$inject=[\"modeling\"],Ah.prototype.execute=function(e){var t=e.shape,n=e.newHost,i=t.host;return e.oldHost=i,e.attacherIdx=kh(i,t),Bh(n,t),t.host=n,t},Ah.prototype.revert=function(e){var t=e.shape,n=e.newHost,i=e.oldHost,o=e.attacherIdx;return t.host=i,kh(n,t),Bh(i,t,o),t},Dh.$inject=[\"eventBus\",\"canvas\",\"selection\",\"elementFactory\",\"modeling\",\"rules\"],Dh.prototype.preExecute=function(e){var t=this._eventBus,n=this,i=e.tree,o=e.topParent,r=e.position;i.createdElements={},i.labels=[],S(i,function(e,a){var s=parseInt(a,10);isNaN(s)||(s||(e=M(e,function(e){return e.parent=o,e})),S(e=O(e,\"priority\"),function(e){var a,c=e.id,p=e.parent,l={},u=W({},e);if(s&&(u.parent=n._getCreatedElement(p,i)),p)if(t.fire(\"element.paste\",{createdElements:i.createdElements,descriptor:u}),p=u.parent,u.waypoints)(u=n._createConnection(u,p,r,i))&&(i.createdElements[c]={element:u,descriptor:e});else{if(u.parent!==o&&(l.root=!1),u.host&&(l.attach=!0,p=n._getCreatedElement(u.host,i)),u.labelTarget)return i.labels.push(u);a={x:Math.round(r.x+u.delta.x+u.width/2),y:Math.round(r.y+u.delta.y+u.height/2)},Nh(u,[\"id\",\"parent\",\"delta\",\"host\",\"priority\"]),(u=n._createShape(u,p,a,l))&&(i.createdElements[c]={element:u,descriptor:e})}}))})},Dh.prototype.postExecute=function(e){var t=this._modeling,n=this._selection,i=this,o=e.tree,r=o.labels,a=[];S(r,function(e){var n,r,a,s=i._getCreatedElement(e.labelTarget,o);s&&(n=s.labels)&&n.length&&(r={x:s.x,y:s.y},s.waypoints&&(r=s.waypoints[0]),S(n,function(n){a={x:Math.round(r.x-n.x+e.delta.x),y:Math.round(r.y-n.y+e.delta.y)},t.moveShape(n,a,s.parent)}))}),S(o[0],function(e){var t=e.id,n=o.createdElements[t];n&&a.push(n.element)}),n.select(a)},Dh.prototype._createConnection=function(e,t,n,i){var o,r,a=this._modeling,s=this._rules;return e.waypoints=M(e.waypoints,function(t,i){return{x:Math.round(n.x+e.delta[i].x),y:Math.round(n.y+e.delta[i].y)}}),o=this._getCreatedElement(e.source,i),r=this._getCreatedElement(e.target,i),o&&r&&s.allowed(\"element.paste\",{source:o,target:r})?(Nh(e,[\"id\",\"parent\",\"delta\",\"source\",\"target\",\"width\",\"height\",\"priority\"]),a.createConnection(o,r,e,t)):null},Dh.prototype._createShape=function(e,t,n,i,o){var r=this._modeling,a=this._elementFactory;if(!this._rules.allowed(\"element.paste\",{element:e,position:n,parent:t}))return null;var s=a.createShape(e);return r.createShape(s,n,t,i,o),s},Dh.prototype._getCreatedElement=function(e,t){return t.createdElements[e]&&t.createdElements[e].element},Oh.$inject=[\"eventBus\",\"elementFactory\",\"commandStack\"],Oh.prototype.getHandlers=function(){return{\"shape.append\":Ju,\"shape.create\":th,\"shape.delete\":nh,\"shape.move\":uh,\"shape.resize\":hh,\"shape.replace\":dh,\"shape.toggleCollapse\":mh,spaceTool:fh,\"label.create\":yh,\"connection.create\":bh,\"connection.delete\":xh,\"connection.move\":_h,\"connection.layout\":wh,\"connection.updateWaypoints\":Eh,\"connection.reconnectStart\":Sh,\"connection.reconnectEnd\":Sh,\"elements.move\":Ph,\"elements.delete\":Ch,\"elements.distribute\":Th,\"elements.align\":Mh,\"element.updateAttachment\":Ah,\"elements.paste\":Dh}},Oh.prototype.registerHandlers=function(e){S(this.getHandlers(),function(t,n){e.registerHandler(n,t)})},Oh.prototype.moveShape=function(e,t,n,i,o){\"object\"==typeof i&&(o=i,i=null);var r={shape:e,delta:t,newParent:n,newParentIndex:i,hints:o||{}};this._commandStack.execute(\"shape.move\",r)},Oh.prototype.updateAttachment=function(e,t){var n={shape:e,newHost:t};this._commandStack.execute(\"element.updateAttachment\",n)},Oh.prototype.moveElements=function(e,t,n,i){var o,r=(i=i||{}).attach,a=n;!0===r?(o=n,a=n.parent):!1===r&&(o=null);var s={shapes:e,delta:t,newParent:a,newHost:o,hints:i};this._commandStack.execute(\"elements.move\",s)},Oh.prototype.moveConnection=function(e,t,n,i,o){\"object\"==typeof i&&(o=i,i=void 0);var r={connection:e,delta:t,newParent:n,newParentIndex:i,hints:o||{}};this._commandStack.execute(\"connection.move\",r)},Oh.prototype.layoutConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute(\"connection.layout\",n)},Oh.prototype.createConnection=function(e,t,n,i,o,r){\"object\"==typeof n&&(r=o,o=i,i=n,n=void 0);var a={source:e,target:t,parent:o,parentIndex:n,connection:i=this._create(\"connection\",i),hints:r};return this._commandStack.execute(\"connection.create\",a),a.connection},Oh.prototype.createShape=function(e,t,n,i,o){\"number\"!=typeof i&&(o=i,i=void 0);var r,a,s=(o=o||{}).attach;e=this._create(\"shape\",e),s?(r=n.parent,a=n):r=n;var c={position:t,shape:e,parent:r,parentIndex:i,host:a,hints:o};return this._commandStack.execute(\"shape.create\",c),c.shape},Oh.prototype.createLabel=function(e,t,n,i){n=this._create(\"label\",n);var o={labelTarget:e,position:t,parent:i||e.parent,shape:n};return this._commandStack.execute(\"label.create\",o),o.shape},Oh.prototype.appendShape=function(e,t,n,i,o){o=o||{};var r={source:e,position:n,target:i,shape:t=this._create(\"shape\",t),connection:o.connection,connectionParent:o.connectionParent,attach:o.attach};return this._commandStack.execute(\"shape.append\",r),r.shape},Oh.prototype.removeElements=function(e){var t={elements:e};this._commandStack.execute(\"elements.delete\",t)},Oh.prototype.distributeElements=function(e,t,n){var i={groups:e,axis:t,dimension:n};this._commandStack.execute(\"elements.distribute\",i)},Oh.prototype.removeShape=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute(\"shape.delete\",n)},Oh.prototype.removeConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute(\"connection.delete\",n)},Oh.prototype.replaceShape=function(e,t,n){var i={oldShape:e,newData:t,hints:n||{}};return this._commandStack.execute(\"shape.replace\",i),i.newShape},Oh.prototype.pasteElements=function(e,t,n){var i={tree:e,topParent:t,position:n};this._commandStack.execute(\"elements.paste\",i)},Oh.prototype.alignElements=function(e,t){var n={elements:e,alignment:t};this._commandStack.execute(\"elements.align\",n)},Oh.prototype.resizeShape=function(e,t,n){var i={shape:e,newBounds:t,minBounds:n};this._commandStack.execute(\"shape.resize\",i)},Oh.prototype.createSpace=function(e,t,n,i){var o={movingShapes:e,resizingShapes:t,delta:n,direction:i};this._commandStack.execute(\"spaceTool\",o)},Oh.prototype.updateWaypoints=function(e,t,n){var i={connection:e,newWaypoints:t,hints:n||{}};this._commandStack.execute(\"connection.updateWaypoints\",i)},Oh.prototype.reconnectStart=function(e,t,n){var i={connection:e,newSource:t,dockingOrPoints:n};this._commandStack.execute(\"connection.reconnectStart\",i)},Oh.prototype.reconnectEnd=function(e,t,n){var i={connection:e,newTarget:t,dockingOrPoints:n};this._commandStack.execute(\"connection.reconnectEnd\",i)},Oh.prototype.connect=function(e,t,n,i){return this.createConnection(e,t,n||{},e.parent,i)},Oh.prototype._create=function(e,t){return t instanceof $t?t:this._elementFactory.create(e,t)},Oh.prototype.toggleCollapse=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute(\"shape.toggleCollapse\",n)};var Lh=\"id\",jh=\"di\",Ih={width:0,height:0};function zh(e,t,n,i,o){this._elementRegistry=e,this._moddle=t,this._translate=n,this._modeling=i,this._textRenderer=o}function Fh(e,t){return Lh in e&&e[Lh]!==t[Lh]}function $h(e,t){S(t,function(t,n){var i;n!==jh?e.set(n,t):e.di&&(i=e.di,S(t,function(e,t){i.set(t,e)}))})}zh.$inject=[\"elementRegistry\",\"moddle\",\"translate\",\"modeling\",\"textRenderer\"],zh.prototype.execute=function(e){var t=e.element,n=[t],i=this._translate;if(!t)throw new Error(i(\"element required\"));var o=this._elementRegistry,r=this._moddle.ids,a=t.businessObject,s=function(e){var t=W({},e);return Vh.forEach(function(n){n in e&&(t[n]=Ai(t[n]))}),t}(e.properties),c=e.oldProperties||function(e,t){return C(A(t),function(n,i){var o;return n[i]=i!==jh?e.get(i):(o=e.di,C(A(t.di),function(e,t){return e[t]=o.get(t),e},{})),n},{})}(a,s);return Fh(s,a)&&(r.unclaim(a[Lh]),o.updateId(t,s[Lh]),r.claim(s[Lh],a)),\"default\"in s&&(s.default&&n.push(o.get(s.default.id)),a.default&&n.push(o.get(a.default.id))),$h(a,s),e.oldProperties=c,e.changed=n,n},zh.prototype.postExecute=function(e){var t=e.element.label,n=t&&Ai(t).name;if(n){var i=this._textRenderer.getExternalLabelBounds(t,n);this._modeling.resizeShape(t,i,Ih)}},zh.prototype.revert=function(e){var t=e.element,n=e.properties,i=e.oldProperties,o=t.businessObject,r=this._elementRegistry,a=this._moddle.ids;return $h(o,i),Fh(n,o)&&(a.unclaim(n[Lh]),r.updateId(t,i[Lh]),a.claim(i[Lh],o)),e.changed};var Vh=[\"default\"];function Hh(e,t){this._canvas=e,this._modeling=t}function Wh(e,t){this._modeling=e,this._spaceTool=t}function Gh(e,t){this._modeling=e,this._translate=t}function qh(e,t){this._modeling=e,this._spaceTool=t}Hh.$inject=[\"canvas\",\"modeling\"],Hh.prototype.execute=function(e){var t=this._canvas,n=e.newRoot,i=n.businessObject,o=t.getRootElement(),r=o.businessObject,a=r.$parent,s=r.di;t.setRootElement(n,!0),gt(a.rootElements,i),i.$parent=a,yt(a.rootElements,r),r.$parent=null,r.di=null,s.bpmnElement=i,i.di=s,e.oldRoot=o},Hh.prototype.revert=function(e){var t=this._canvas,n=e.newRoot.businessObject,i=e.oldRoot,o=i.businessObject,r=n.$parent,a=n.di;t.setRootElement(i,!0),yt(r.rootElements,n),n.$parent=null,gt(r.rootElements,o),o.$parent=r,n.di=null,a.bpmnElement=o,o.di=a},Wh.$inject=[\"modeling\",\"spaceTool\"],Wh.prototype.preExecute=function(e){var t=this._spaceTool,n=this._modeling,i=e.shape,o=e.location,r=_c(i),a=r===i,s=a?i:i.parent;xc(s).length||n.createShape({type:\"bpmn:Lane\"},{x:i.x+30,y:i.y,width:i.width-30,height:i.height},s);var c=[];xt(r,function(e){return c.push(e),e===i?[]:E(e.children,function(e){return e!==i})});var p=\"top\"===o?-120:120,l=\"top\"===o?i.y:i.y+i.height,u=l+(\"top\"===o?10:-10),h=\"top\"===o?\"n\":\"s\",d=t.calculateAdjustments(c,\"y\",p,u);t.makeSpace(d.movingShapes,d.resizingShapes,{x:0,y:p},h),e.newLane=n.createShape({type:\"bpmn:Lane\"},{x:i.x+(a?30:0),y:l-(\"top\"===o?120:0),width:i.width-(a?30:0),height:120},s)},Gh.$inject=[\"modeling\",\"translate\"],Gh.prototype.preExecute=function(e){var t=this._modeling,n=this._translate,i=e.shape,o=e.count,r=xc(i),a=r.length;if(a>o)throw new Error(n(\"more than {count} child lanes\",{count:o}));var s,c,p,l,u,h=Math.round(i.height/o);for(u=0;u<o;u++)s=i.y+u*h,c=u===o-1?i.height-h*u:h,p={x:i.x+30,y:s,width:i.width-30,height:c},u<a?t.resizeShape(r[u],p):(l={type:\"bpmn:Lane\"},t.createShape(l,p,i))},qh.$inject=[\"modeling\",\"spaceTool\"],qh.prototype.preExecute=function(e){var t=e.shape,n=e.newBounds;!1!==e.balanced?this.resizeBalanced(t,n):this.resizeSpace(t,n)},qh.prototype.resizeBalanced=function(e,t){var n=this._modeling,i=wc(e,t);n.resizeShape(e,t),i.forEach(function(e){n.resizeShape(e.shape,e.newBounds)})},qh.prototype.resizeSpace=function(e,t){var n,i,o,r,a,s=this._spaceTool,c=So(e),p=hc(So(t),c),l=_c(e),u=[],h=[];xt(l,function(e){return u.push(e),(Mi(e,\"bpmn:Lane\")||Mi(e,\"bpmn:Participant\"))&&h.push(e),e.children}),(p.bottom||p.top)&&(n=p.bottom||p.top,i=e.y+(p.bottom?e.height:0)+(p.bottom?-10:10),o=p.bottom?\"s\":\"n\",r=p.top>0||p.bottom<0?-n:n,a=s.calculateAdjustments(u,\"y\",r,i),s.makeSpace(a.movingShapes,a.resizingShapes,{x:0,y:n},o)),(p.left||p.right)&&(n=p.right||p.left,i=e.x+(p.right?e.width:0)+(p.right?-10:100),o=p.right?\"e\":\"w\",r=p.left>0||p.right<0?-n:n,a=s.calculateAdjustments(h,\"x\",r,i),s.makeSpace(a.movingShapes,a.resizingShapes,{x:n,y:0},o))};function Uh(e){this._elementRegistry=e}function Kh(e){this._moddle=e}Uh.$inject=[\"elementRegistry\"],Uh.prototype.computeUpdates=function(e,t){var n={},i=[],o={},r=[];function a(e){n[e.id]||(r.push(e),n[e.id]=e)}function s(e){return e.parent?function(e){var t=_c(e);return o[t.id]||(o[t.id]=bc(t)),o[t.id]}(e).filter(function(t){return n=e,i=So(t),o=n.x+n.width/2,r=n.y+n.height/2,o>i.left&&o<i.right&&r>i.top&&r<i.bottom;var n,i,o,r}).map(function(e){return e.businessObject}):[]}return t.forEach(function(e){var t=_c(e);t&&!n[t.id]&&(t.children.filter(function(e){return Mi(e,\"bpmn:FlowNode\")}).forEach(a),n[t.id]=t)}),e.forEach(a),r.forEach(function(e){var t=e.businessObject,n=t.get(\"lanes\").slice(),o=s(e);i.push({flowNode:t,remove:n,add:o})}),t.forEach(function(e){var t=e.businessObject;e.parent||t.get(\"flowNodeRef\").forEach(function(e){i.push({flowNode:e,remove:[t],add:[]})})}),i},Uh.prototype.execute=function(e){var t=e.updates;t||(t=e.updates=this.computeUpdates(e.flowNodeShapes,e.laneShapes)),t.forEach(function(e){var t=e.flowNode,n=t.get(\"lanes\");e.remove.forEach(function(e){yt(n,e),yt(e.get(\"flowNodeRef\"),t)}),e.add.forEach(function(e){gt(n,e),gt(e.get(\"flowNodeRef\"),t)})})},Uh.prototype.revert=function(e){e.updates.forEach(function(e){var t=e.flowNode,n=t.get(\"lanes\");e.add.forEach(function(e){yt(n,e),yt(e.get(\"flowNodeRef\"),t)}),e.remove.forEach(function(e){gt(n,e),gt(e.get(\"flowNodeRef\"),t)})})},Kh.$inject=[\"moddle\"],Kh.prototype.execute=function(e){var t=this._moddle.ids,n=e.id,i=e.element;e.claiming?t.claim(n,i):t.unclaim(n)},Kh.prototype.revert=function(e){var t=this._moddle.ids,n=e.id,i=e.element;e.claiming?t.unclaim(n):t.claim(n,i)};var Yh={fill:void 0,stroke:void 0};function Xh(e){this._commandStack=e}Xh.$inject=[\"commandStack\"],Xh.prototype.postExecute=function(e){var t=e.elements,n=e.colors||Yh,i=this,o={};\"fill\"in n&&W(o,{fill:n.fill}),\"stroke\"in n&&W(o,{stroke:n.stroke}),S(t,function(e){i._commandStack.execute(\"element.updateProperties\",{element:e,properties:{di:o}})})};var Zh={width:0,height:0};function Qh(e,t){function n(e,t){var n=e.label||e,i=e.labelTarget||e;return function(e,t,n){var i=e.businessObject,o=cp(i);o&&(i[o]=t)}(n,t),[n,i]}this.preExecute=function(t){var n=t.element,i=n.businessObject,o=t.newLabel;if(!ho(n)&&co(n)&&!po(n)&&!Jh(o)){var r=uo(n);r={x:r.x,y:r.y+7},e.createLabel(n,r,{id:i.id+\"_label\",businessObject:i})}},this.execute=function(e){return e.oldLabel=pp(e.element),n(e.element,e.newLabel)},this.revert=function(e){return n(e.element,e.oldLabel)},this.postExecute=function(n){var i=n.element,o=i.label||i,r=n.newLabel,a=n.newBounds,s=n.hints||{};if(ho(o)&&Jh(r))!1!==s.removeShape&&e.removeShape(o,{unsetLabel:!1});else if(co(i)||Mi(i,\"bpmn:TextAnnotation\")){var c=Ai(o),p=c.name||c.text;p&&(void 0===a&&(a=t.getExternalLabelBounds(o,p)),a&&e.resizeShape(o,a,Zh))}}}function Jh(e){return!e||!e.trim()}function ed(e,t,n,i){Oh.call(this,e,t,n),this._bpmnRules=i}function td(){}Qh.$inject=[\"modeling\",\"textRenderer\"],s()(ed,Oh),ed.$inject=[\"eventBus\",\"elementFactory\",\"commandStack\",\"bpmnRules\"],ed.prototype.getHandlers=function(){var e=Oh.prototype.getHandlers.call(this);return e[\"element.updateProperties\"]=zh,e[\"canvas.updateRoot\"]=Hh,e[\"lane.add\"]=Wh,e[\"lane.resize\"]=qh,e[\"lane.split\"]=Gh,e[\"lane.updateRefs\"]=Uh,e[\"id.updateClaim\"]=Kh,e[\"element.setColor\"]=Xh,e[\"element.updateLabel\"]=Qh,e},ed.prototype.updateLabel=function(e,t,n,i){this._commandStack.execute(\"element.updateLabel\",{element:e,newLabel:t,newBounds:n,hints:i||{}})},ed.prototype.connect=function(e,t,n,i){var o=this._bpmnRules;if(n||(n=o.canConnect(e,t)),n)return this.createConnection(e,t,n,e.parent,i)},ed.prototype.updateProperties=function(e,t){this._commandStack.execute(\"element.updateProperties\",{element:e,properties:t})},ed.prototype.resizeLane=function(e,t,n){this._commandStack.execute(\"lane.resize\",{shape:e,newBounds:t,balanced:n})},ed.prototype.addLane=function(e,t){var n={shape:e,location:t};return this._commandStack.execute(\"lane.add\",n),n.newLane},ed.prototype.splitLane=function(e,t){this._commandStack.execute(\"lane.split\",{shape:e,count:t})},ed.prototype.makeCollaboration=function(){var e=this._create(\"root\",{type:\"bpmn:Collaboration\"}),t={newRoot:e};return this._commandStack.execute(\"canvas.updateRoot\",t),e},ed.prototype.updateLaneRefs=function(e,t){this._commandStack.execute(\"lane.updateRefs\",{flowNodeShapes:e,laneShapes:t})},ed.prototype.makeProcess=function(){var e={newRoot:this._create(\"root\",{type:\"bpmn:Process\"})};this._commandStack.execute(\"canvas.updateRoot\",e)},ed.prototype.claimId=function(e,t){this._commandStack.execute(\"id.updateClaim\",{id:e,element:t,claiming:!0})},ed.prototype.unclaimId=function(e,t){this._commandStack.execute(\"id.updateClaim\",{id:e,element:t})},ed.prototype.setColor=function(e,t){e.length||(e=[e]),this._commandStack.execute(\"element.setColor\",{elements:e,colors:t})},td.prototype.layoutConnection=function(e,t){return[(t=t||{}).connectionStart||Co(e.source),t.connectionEnd||Co(e.target)]};var nd=20,id=5,od=Math.round,rd=20,ad={\"h:h\":20,\"v:v\":20,\"h:v\":-10,\"v:h\":-10};function sd(e,t,n){var i,o,r,a=To(t,e,id),s=n.split(\":\")[0],c=od((t.x-e.x)/2+e.x),p=od((t.y-e.y)/2+e.y),l=(r=a,{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/left|right/,v:/top|bottom/}[s].test(r)),u=/h|r|l/.test(s),h=!1;return l?(i=u?{x:c,y:e.y}:{x:e.x,y:p},o=u?\"h:h\":\"v:v\"):(o=u?\"h:v\":\"v:h\",function(e,t){return!{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/./,v:/./}[t].test(e)}(a,s)?u?(h=p===e.y,i={x:e.x+nd*(/l/.test(s)?-1:1),y:h?p+nd:p}):i={x:(h=c===e.x)?c+nd:c,y:e.y+nd*(/t/.test(s)?-1:1)}:i={x:c,y:p}),{waypoints:pd(e,i,o).concat(i),directions:o,turnNextDirections:h}}function cd(e){return e.split(\":\").reverse().join(\":\")}function pd(e,t,n){if(!function(e){return e&&/^h|v|t|r|b|l:h|v|t|r|b|l$/.test(e)}(n=n||\"h:h\"))throw new Error(\"unknown directions: <\"+n+\">: must be specified as <start>:<end> with start/end in { h,v,t,r,b,l }\");if(md(n)){var i=function(e,t,n){return sd(e,t,n)}(e,t,n),o=function(e,t,n){var i=sd(t,e,cd(n));return{waypoints:i.waypoints.slice().reverse(),directions:cd(i.directions),turnNextDirections:i.turnNextDirections}}(e,t,n),r=function(e,t){var n=e.directions.split(\":\")[1],i=t.directions.split(\":\")[0];e.turnNextDirections&&(n=\"h\"==n?\"v\":\"h\"),t.turnNextDirections&&(i=\"h\"==i?\"v\":\"h\");var o=n+\":\"+i;return{waypoints:pd(e.waypoints[e.waypoints.length-1],t.waypoints[0],o),directions:o}}(i,o);return[].concat(i.waypoints,r.waypoints,o.waypoints)}return function(e,t,n){var i=od((t.x-e.x)/2+e.x),o=od((t.y-e.y)/2+e.y);if(\"h:v\"===n)return[{x:t.x,y:e.y}];if(\"v:h\"===n)return[{x:e.x,y:t.y}];if(\"h:h\"===n)return[{x:i,y:e.y},{x:i,y:t.y}];if(\"v:v\"===n)return[{x:e.x,y:o},{x:t.x,y:o}];throw new Error(\"invalid directions: can only handle varians of [hv]:[hv]\")}(e,t,n)}function ld(e,t,n,i,o){var r=P(o&&o.preferredLayouts||[],\"straight\")[0]||\"h:h\",a=To(e,t,ad[r]||0),s=function(e,t){if(md(t))return t;switch(e){case\"intersect\":return\"t:t\";case\"top\":case\"bottom\":return\"v:v\";case\"left\":case\"right\":return\"h:h\";default:return t}}(a,r);n=n||Co(e),i=i||Co(t);var c=s.split(\":\");return function(e,t,n){var i=pd(e,t,n);return i.unshift(e),i.push(t),yd(i)}(fd(n,e,c[0],function(e){return{top:\"bottom\",bottom:\"top\",left:\"right\",right:\"left\",\"top-left\":\"bottom-right\",\"bottom-right\":\"top-left\",\"top-right\":\"bottom-left\",\"bottom-left\":\"top-right\"}[e]}(a)),fd(i,t,c[1],a),s)}function ud(e,t,n,i,o,r){var a;return f(n)&&(o=n,r=i,n=Co(e),i=Co(t)),o=o||[],-1!==(r=W({preferredLayouts:[]},r)).preferredLayouts.indexOf(\"straight\")&&(a=function(e,t,n,i,o){var r,a,s={};if(a=To(e,t),!/^(top|bottom|left|right)$/.test(a))return null;/top|bottom/.test(a)&&(r=\"x\");/left|right/.test(a)&&(r=\"y\");return\"target\"===o.preserveDocking?hd(r,i,e)?(s[r]=i[r],[{x:void 0!==s.x?s.x:n.x,y:void 0!==s.y?s.y:n.y,original:{x:void 0!==s.x?s.x:n.x,y:void 0!==s.y?s.y:n.y}},{x:i.x,y:i.y}]):null:hd(r,n,t)?(s[r]=n[r],[{x:n.x,y:n.y},{x:void 0!==s.x?s.x:i.x,y:void 0!==s.y?s.y:i.y,original:{x:void 0!==s.x?s.x:i.x,y:void 0!==s.y?s.y:i.y}}]):null}(e,t,n,i,r)),a||(r.connectionEnd?a=(a=dd(t,e,i,o.slice().reverse()))&&a.reverse():r.connectionStart?a=dd(e,t,n,o):o&&o.length&&(a=o)),a||(a=ld(e,t,n,i,r)),a}function hd(e,t,n){return function(e,t,n){return e>=t&&e<=n}(t[e],n[e],n[e]+n[{x:\"width\",y:\"height\"}[e]])}function dd(e,t,n,i){if(function(e,t,n){return n.length<3||!(n.length>4)&&!!_(n,function(e,t){var i=n[t-1];return i&&mo(e,i)<3})}(0,0,i))return null;var o,r=i[0],a=i.slice();return a[0]=n,a[1]=function(e,t,n){switch(go(t,e)){case\"v\":return{x:e.x,y:n.y};case\"h\":return{x:n.x,y:e.y}}return{x:e.x,y:e.y}}(a[1],r,n),(o=function(e,t,n){var i;for(i=e.length-2;0!==i;i--)if(vo(e[i],t,rd)||vo(e[i],n,rd))return e.slice(i);return e}(a,e,t))!==a?dd(e,t,n,o):a}function md(e){return e&&/t|r|b|l/.test(e)}function fd(e,t,n,i){if(\"h\"===n&&(n=/left/.test(i)?\"l\":\"r\"),\"v\"===n&&(n=/top/.test(i)?\"t\":\"b\"),\"t\"===n)return{original:e,x:e.x,y:t.y};if(\"r\"===n)return{original:e,x:t.x+t.width,y:e.y};if(\"b\"===n)return{original:e,x:e.x,y:t.y+t.height};if(\"l\"===n)return{original:e,x:t.x,y:e.y};throw new Error(\"unexpected dockingDirection: <\"+n+\">\")}function yd(e){return e.reduce(function(t,n,i){return fo(t[t.length-1],e[i+1],n,0)||t.push(n),t},[])}function gd(){}function vd(e,t){return Mi(t,\"bpmn:Participant\")?\"source\":Mi(e,\"bpmn:Participant\")?\"target\":_d(t)?\"source\":_d(e)?\"target\":Mi(t,\"bpmn:Event\")?\"target\":Mi(e,\"bpmn:Event\")?\"source\":null}function bd(e,t){return e?e.original||e:Co(t)}function xd(e){var t=e.source,n=e.target;return Mi(n,\"bpmn:Activity\")&&Mi(t,\"bpmn:BoundaryEvent\")&&n.businessObject.isForCompensation}function _d(e){return Mi(e,\"bpmn:SubProcess\")&&ki(e)}function wd(e,t){return e===t}s()(gd,td),gd.prototype.layoutConnection=function(e,t){t=t||{};var n,i,o=e.source,r=e.target,a=e.waypoints,s=t.connectionStart,c=t.connectionEnd;return s||(s=bd(a&&a[0],o)),c||(c=bd(a&&a[a.length-1],r)),(Mi(e,\"bpmn:Association\")||Mi(e,\"bpmn:DataAssociation\"))&&a&&!xd(e)?[].concat([s],a.slice(1,-1),[c]):(Mi(e,\"bpmn:MessageFlow\")?n=function(e,t){return{preferredLayouts:[\"straight\",\"v:v\"],preserveDocking:vd(e,t)}}(o,r):(Mi(e,\"bpmn:SequenceFlow\")||xd(e))&&(n=o===r?{preferredLayouts:[\"b:l\"]}:Mi(o,\"bpmn:BoundaryEvent\")?{preferredLayouts:Rd(o,r)}:Mi(o,\"bpmn:Gateway\")?{preferredLayouts:[\"v:h\"]}:Mi(r,\"bpmn:Gateway\")?{preferredLayouts:[\"h:v\"]}:{preferredLayouts:[\"h:h\"]}),n&&(i=yd(ud(o,r,s,c,a,n=W(n,t)))),i||[s,c])};var Ed={top:\"bottom\",\"top-right\":\"bottom-left\",\"top-left\":\"bottom-right\",right:\"left\",bottom:\"top\",\"bottom-right\":\"top-left\",\"bottom-left\":\"top-right\",left:\"right\"},Sd={top:\"t\",right:\"r\",bottom:\"b\",left:\"l\"};function Pd(e){var t=/right|left/.exec(e);return t&&t[0]}function Cd(e){var t=/top|bottom/.exec(e);return t&&t[0]}function Td(e){return\"right\"===e||\"left\"===e}function Rd(e,t){var n,i,o,r,a=Co(e),s=Co(t),c=(i=(n=e).host,To(Co(n),i,-10)),p=wd(e.host,t),l=-1!==[\"top\",\"right\",\"bottom\",\"left\"].indexOf(c),u=Td(c),h=To(s,a,{x:e.width/2+t.width/2,y:e.height/2+t.height/2});return[(l?Sd[u?Pd(c):Cd(c)]:p||wd(Cd(c),Cd(h))||(o=Pd(c),r=Pd(h),Ed[o]===r)?Sd[Cd(c)]:Sd[Pd(c)])+\":\"+(l?p||(u?function(e,t){var n=Pd(e),i=Ed[n];return-1!==t.indexOf(i)}(c,h):function(e,t){var n=Cd(e),i=Ed[n];return-1!==t.indexOf(i)}(c,h))?u?\"h\":\"v\":u?\"v\":\"h\":Td(h)||wd(Cd(c),Cd(h))&&Pd(h)?\"h\":\"v\")]}function Md(e){return W({original:e.point.original||e.point},e.actual)}function Ad(e,t){this._elementRegistry=e,this._graphicsFactory=t}Ad.$inject=[\"elementRegistry\",\"graphicsFactory\"],Ad.prototype.getCroppedWaypoints=function(e,t,n){t=t||e.source,n=n||e.target;var i=this.getDockingPoint(e,t,!0),o=this.getDockingPoint(e,n),r=e.waypoints.slice(i.idx+1,o.idx);return r.unshift(Md(i)),r.push(Md(o)),r},Ad.prototype.getDockingPoint=function(e,t,n){var i,o,r=e.waypoints;return{point:o=r[i=n?0:r.length-1],actual:this._getIntersection(t,e,n)||o,idx:i}},Ad.prototype._getIntersection=function(e,t,n){return Ro(this._getShapePath(e),this._getConnectionPath(t),n)},Ad.prototype._getConnectionPath=function(e){return this._graphicsFactory.getConnectionPath(e)},Ad.prototype._getShapePath=function(e){return this._graphicsFactory.getShapePath(e)},Ad.prototype._getGfx=function(e){return this._elementRegistry.getGraphics(e)};var kd={__init__:[\"modeling\",\"bpmnUpdater\"],__depends__:[El,lu,du,Us,fu,xu,Cu,Nu,Zo,Qc,Uu],bpmnFactory:[\"type\",Ku],bpmnUpdater:[\"type\",Yu],elementFactory:[\"type\",Zu],modeling:[\"type\",ed],layouter:[\"type\",gd],connectionDocking:[\"type\",Ad]},Bd=500,Nd=1250,Dd=1500,Od=Math.round;function Ld(e,t,n,i,o){function r(e,t,n,i){return o.allowed(\"elements.move\",{shapes:e,delta:t,position:n,target:i})}function a(e,n,i){if(!n.waypoints&&n.parent){var o=function(e){return{x:e.x+Od(e.width/2),y:e.y+Od(e.height/2)}}(n);return t.init(e,o,\"shape.move\",{cursor:\"grabbing\",autoActivate:i,data:{shape:n,context:{}}}),!0}}e.on(\"shape.move.start\",Dd,function(e){var t,n,o=e.context,r=e.shape,a=i.get().slice();-1===a.indexOf(r)&&(a=[r]),n=B(t=a,\"id\"),W(o,{shapes:a=E(t,function(e){for(;e=e.parent;)if(n[e.id])return!1;return!0}),validatedShapes:a,shape:r})}),e.on(\"shape.move.start\",Nd,function(e){var t=e.context,n=t.validatedShapes;if(!(t.canExecute=r(n)))return!1}),e.on(\"shape.move.move\",Bd,function(e){var t,n=e.context,i=n.validatedShapes,o=e.hover,a={x:e.dx,y:e.dy};t=r(i,a,{x:e.x,y:e.y},o),n.delta=a,n.canExecute=t,n.target=null!==t?o:null}),e.on(\"shape.move.end\",function(e){var t=e.context,i=t.delta,o=t.canExecute,r=\"attach\"===o,a=t.shapes;if(!o)return!1;i.x=Od(i.x),i.y=Od(i.y),n.moveElements(a,i,t.target,{primaryShape:t.shape,attach:r})}),e.on(\"element.mousedown\",function(e){var t=Do(e);if(!t)throw new Error(\"must supply DOM mousedown event\");return a(t,e.element)}),this.start=a}Ld.$inject=[\"eventBus\",\"dragging\",\"modeling\",\"selection\",\"rules\"];var jd=499,Id=\"djs-dragging\",zd=\"drop-ok\",Fd=\"drop-not-ok\",$d=\"new-parent\",Vd=\"attach-ok\";function Hd(e,t,n,i,o){function r(e){return function(e){return E(e,function(t){return!function(e){return e.waypoints}(t)||_(e,L({id:t.source.id}))&&_(e,L({id:t.target.id}))})}(a(e))}function a(e){var t=wt(e,!0),n=M(t,function(e){return(e.incoming||[]).concat(e.outgoing||[])});return l(t.concat(n))}function s(e,t){[Vd,zd,Fd,$d].forEach(function(i){i===t?n.addMarker(e,i):n.removeMarker(e,i)})}e.on(\"shape.move.start\",jd,function(e){var t=e.context,s=t.shapes,c=t.allDraggedElements,p=r(s);if(!t.dragGroup){var u=Ie(\"g\");Ce(u,i.cls(\"djs-drag-group\",[\"no-events\"])),we(n.getDefaultLayer(),u),t.dragGroup=u}p.forEach(function(e){o.addDragger(e,t.dragGroup)}),S(c=c?l([c,a(s)]):a(s),function(e){n.addMarker(e,Id)}),t.allDraggedElements=c,t.differentParents=1!==A(B(s,function(e){return e.parent&&e.parent.id})).length}),e.on(\"shape.move.move\",jd,function(e){var t=e.context,n=t.dragGroup,i=t.target,o=t.shape.parent,r=t.canExecute;i&&(\"attach\"===r?s(i,Vd):t.canExecute&&i&&i.id!==o.id?s(i,$d):s(i,t.canExecute?zd:Fd)),Qt(n,e.dx,e.dy)}),e.on([\"shape.move.out\",\"shape.move.cleanup\"],function(e){var t=e.context.target;t&&s(t,null)}),e.on(\"shape.move.cleanup\",function(e){var t=e.context,i=t.allDraggedElements,o=t.dragGroup;S(i,function(e){n.removeMarker(e,Id)}),o&&De(o)}),this.makeDraggable=function(e,t,i){o.addDragger(t,e.dragGroup),i&&n.addMarker(t,Id),e.allDraggedElements?e.allDraggedElements.push(t):e.allDraggedElements=[t]}}Hd.$inject=[\"eventBus\",\"elementRegistry\",\"canvas\",\"styles\",\"previewSupport\"];var Wd={__depends__:[Vo,Zo,Go,La,Ma,ep],__init__:[\"move\",\"movePreview\"],move:[\"type\",Ld],movePreview:[\"type\",Hd]};function Gd(e,t){this._eventBus=e,this._canvas=t,this._providers=[];var n=this;e.on(\"tool-manager.update\",function(e){var t=e.tool;n.updateToolHighlight(t)}),e.on(\"i18n.changed\",function(){n._update()}),e.on(\"diagram.init\",function(){n._diagramInitialized=!0,n._providers.length&&(n._init(),n._update())})}Gd.$inject=[\"eventBus\",\"canvas\"],Gd.prototype.registerProvider=function(e){this._providers.push(e),this._diagramInitialized&&(this._container||this._init(),this._update())},Gd.prototype.getEntries=function(){var e={};return S(this._providers,function(t){S(t.getPaletteEntries(),function(t,n){e[n]=t})}),e},Gd.prototype._init=function(){var e=this._canvas,t=this._eventBus,n=e.getContainer(),i=this._container=ue(Gd.HTML_MARKUP),o=this;n.appendChild(i),le.bind(i,\".djs-palette-toggle, .entry\",\"click\",function(e){var t=e.delegateTarget;if(ye(t,\".djs-palette-toggle\"))return o.toggle();o.trigger(\"click\",e)}),ce.bind(i,\"mousedown\",function(e){e.stopPropagation()}),le.bind(i,\".entry\",\"dragstart\",function(e){o.trigger(\"dragstart\",e)}),t.on(\"canvas.resized\",this._layoutChanged,this),t.fire(\"palette.create\",{container:i})},Gd.prototype._toggleState=function(e){e=e||{};var t,n=this._getParentContainer(),i=this._container,o=this._eventBus,r=Z(i);t=\"twoColumn\"in e?e.twoColumn:this._needsCollapse(n.clientHeight,this._entries||{}),r.toggle(\"two-column\",t),\"open\"in e&&r.toggle(\"open\",e.open),o.fire(\"palette.changed\",{twoColumn:t,open:this.isOpen()})},Gd.prototype._update=function(){var e=ge(\".djs-palette-entries\",this._container),t=this._entries=this.getEntries();J(e),S(t,function(t,n){var i=t.group||\"default\",o=ge(\"[data-group=\"+i+\"]\",e);o||(o=ue('<div class=\"group\" data-group=\"'+i+'\"></div>'),e.appendChild(o));var r,a,s,c=t.html||(t.separator?'<hr class=\"separator\" />':'<div class=\"entry\" draggable=\"true\"></div>'),p=ue(c);o.appendChild(p),t.separator||(q(p,\"data-action\",n),t.title&&q(p,\"title\",t.title),t.className&&(r=p,a=t.className,s=Z(r),(f(a)?a:a.split(/\\s+/g)).forEach(function(e){s.add(e)})),t.imageUrl&&p.appendChild(ue('<img src=\"'+t.imageUrl+'\">')))}),this.open()},Gd.prototype.trigger=function(e,t,n){var i,o,r,a=this._entries,s=t.delegateTarget||t.target;if(!s)return t.preventDefault();(i=a[q(s,\"data-action\")])&&(o=i.action,r=t.originalEvent||t,v(o)?\"click\"===e&&o(r,n):o[e]&&o[e](r,n),t.preventDefault())},Gd.prototype._layoutChanged=function(){this._toggleState({})},Gd.prototype._needsCollapse=function(e,t){return e<46*Object.keys(t).length+50},Gd.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})},Gd.prototype.open=function(){this._toggleState({open:!0})},Gd.prototype.toggle=function(e){this.isOpen()?this.close():this.open()},Gd.prototype.isActiveTool=function(e){return e&&this._activeTool===e},Gd.prototype.updateToolHighlight=function(e){var t;this._toolsContainer||(t=ge(\".djs-palette-entries\",this._container),this._toolsContainer=ge(\"[data-group=tools]\",t)),S(this._toolsContainer.children,function(t){var n=t.getAttribute(\"data-action\");if(n){var i=Z(t);n=n.replace(\"-tool\",\"\"),i.contains(\"entry\")&&n===e?i.add(\"highlighted-entry\"):i.remove(\"highlighted-entry\")}})},Gd.prototype.isOpen=function(){return Z(this._container).has(\"open\")},Gd.prototype._getParentContainer=function(){return this._canvas.getContainer()},Gd.HTML_MARKUP='<div class=\"djs-palette\"><div class=\"djs-palette-entries\"></div><div class=\"djs-palette-toggle\"></div></div>';var qd={__init__:[\"palette\"],palette:[\"type\",Gd]};function Ud(e,t,n,i,o,r){this._selection=o,this._dragging=n;var a=this,s=function(e){var n,i=t.getDefaultLayer();Ce(n=e.frame=Ie(\"rect\"),{class:\"djs-lasso-overlay\",width:1,height:1,x:0,y:0}),we(i,n)},c=function(e){var t=e.frame,n=e.bbox;Ce(t,{x:n.x,y:n.y,width:n.width,height:n.height})},p=function(e){e.frame&&Ne(e.frame)};r.registerTool(\"lasso\",{tool:\"lasso.selection\",dragging:\"lasso\"}),e.on(\"lasso.selection.end\",function(t){var n=t.originalEvent.target;(t.hover||n instanceof SVGElement)&&e.once(\"lasso.selection.ended\",function(){a.activateLasso(t.originalEvent,!0)})}),e.on(\"lasso.end\",function(e){var t=Kd(e),n=i.filter(function(e){return e});a.select(n,t)}),e.on(\"lasso.start\",function(e){var t=e.context;t.bbox=Kd(e),s(t)}),e.on(\"lasso.move\",function(e){var t=e.context;t.bbox=Kd(e),c(t)}),e.on(\"lasso.cleanup\",function(e){var t=e.context;p(t)}),e.on(\"element.mousedown\",1500,function(e){if(function(e){var t=Do(e)||e;return jo(e)&&t.shiftKey}(e))return a.activateLasso(e.originalEvent),!0})}function Kd(e){var t={x:e.x-e.dx,y:e.y-e.dy},n={x:e.x,y:e.y};return t.x<=n.x&&t.y<n.y||t.x<n.x&&t.y<=n.y?{x:t.x,y:t.y,width:n.x-t.x,height:n.y-t.y}:t.x>=n.x&&t.y<n.y||t.x>n.x&&t.y<=n.y?{x:n.x,y:t.y,width:t.x-n.x,height:n.y-t.y}:t.x<=n.x&&t.y>n.y||t.x<n.x&&t.y>=n.y?{x:t.x,y:n.y,width:n.x-t.x,height:t.y-n.y}:t.x>=n.x&&t.y>n.y||t.x>n.x&&t.y>=n.y?{x:n.x,y:n.y,width:t.x-n.x,height:t.y-n.y}:{x:n.x,y:n.y,width:0,height:0}}Ud.$inject=[\"eventBus\",\"canvas\",\"dragging\",\"elementRegistry\",\"selection\",\"toolManager\"],Ud.prototype.activateLasso=function(e,t){this._dragging.init(e,\"lasso\",{autoActivate:t,cursor:\"crosshair\",data:{context:{}}})},Ud.prototype.activateSelection=function(e){this._dragging.init(e,\"lasso.selection\",{trapClick:!1,cursor:\"crosshair\",data:{context:{}}})},Ud.prototype.select=function(e,t){var n=function(e,t){var n={};return S(e,function(e){var i=e;i.waypoints&&(i=Et(i)),!g(t.y)&&i.x>t.x&&(n[e.id]=e),!g(t.x)&&i.y>t.y&&(n[e.id]=e),i.x>t.x&&i.y>t.y&&(g(t.width)&&g(t.height)&&i.width+i.x<t.width+t.x&&i.height+i.y<t.height+t.y?n[e.id]=e:g(t.width)&&g(t.height)||(n[e.id]=e))}),n}(e,t);this._selection.select(k(n))},Ud.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.activateSelection()},Ud.prototype.isActive=function(){var e=this._dragging.context();return e&&/^lasso/.test(e.prefix)};var Yd={__depends__:[Ou],__init__:[\"lassoTool\"],lassoTool:[\"type\",Ud]},Xd=1500;function Zd(e,t,n,i){this._dragging=n,i.registerTool(\"hand\",{tool:\"hand\",dragging:\"hand.move\"}),e.on(\"element.mousedown\",Xd,function(e){if(Io(e))return this.activateMove(e.originalEvent),!1},this),e.on(\"hand.end\",function(t){var n=t.originalEvent.target;if(!(t.hover||n instanceof SVGElement))return!1;e.once(\"hand.ended\",function(){this.activateMove(t.originalEvent,{reactivate:!0})},this)},this),e.on(\"hand.move.move\",function(e){var n=t.viewbox().scale;t.scroll({dx:e.dx*n,dy:e.dy*n})}),e.on(\"hand.move.end\",function(t){var n=t.context.reactivate;return!Io(t)&&n&&e.once(\"hand.move.ended\",function(e){this.activateHand(e.originalEvent,!0,!0)},this),!1},this)}Zd.$inject=[\"eventBus\",\"canvas\",\"dragging\",\"toolManager\"],Zd.prototype.activateMove=function(e,t,n){\"object\"==typeof t&&(n=t,t=!1),this._dragging.init(e,\"hand.move\",{autoActivate:t,cursor:\"grab\",data:{context:n||{}}})},Zd.prototype.activateHand=function(e,t,n){this._dragging.init(e,\"hand\",{trapClick:!1,autoActivate:t,cursor:\"grab\",data:{context:{reactivate:n}}})},Zd.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.activateHand()},Zd.prototype.isActive=function(){var e=this._dragging.context();return e&&/^hand/.test(e.prefix)};var Qd={__depends__:[Ou],__init__:[\"handTool\"],handTool:[\"type\",Zd]},Jd=\"connect-ok\",em=\"connect-not-ok\";function tm(e,t,n,i,o,r){var a=this;this._dragging=t,this._rules=r,o.registerTool(\"global-connect\",{tool:\"global-connect\",dragging:\"global-connect.drag\"}),e.on(\"global-connect.hover\",function(e){var t=e.context,n=e.hover,o=t.canStartConnect=a.canStartConnect(n);null!==o&&(t.startTarget=n,i.addMarker(n,o?Jd:em))}),e.on([\"global-connect.out\",\"global-connect.cleanup\"],function(e){var t=e.context.startTarget,n=e.context.canStartConnect;t&&i.removeMarker(t,n?Jd:em)}),e.on([\"global-connect.ended\"],function(t){var i=t.context.startTarget,o={x:t.x,y:t.y};if(a.canStartConnect(i))return e.once(\"element.out\",function(){e.once([\"connect.ended\",\"connect.canceled\"],function(){e.fire(\"global-connect.drag.ended\")}),n.start(null,i,o)}),!1})}tm.$inject=[\"eventBus\",\"dragging\",\"connect\",\"canvas\",\"toolManager\",\"rules\"],tm.prototype.start=function(e){this._dragging.init(e,\"global-connect\",{trapClick:!1,data:{context:{}}})},tm.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.start()},tm.prototype.isActive=function(){var e=this._dragging.context();return e&&/^global-connect/.test(e.prefix)},tm.prototype.canStartConnect=function(e){return this._rules.allowed(\"connection.start\",{source:e})};var nm={__depends__:[Ts,La,Ma,Ou],globalConnect:[\"type\",tm]};function im(e,t,n,i,o,r,a,s){this._palette=e,this._create=t,this._elementFactory=n,this._spaceTool=i,this._lassoTool=o,this._handTool=r,this._globalConnect=a,this._translate=s,e.registerProvider(this)}im.$inject=[\"palette\",\"create\",\"elementFactory\",\"spaceTool\",\"lassoTool\",\"handTool\",\"globalConnect\",\"translate\"],im.prototype.getPaletteEntries=function(e){var t={},n=this._create,i=this._elementFactory,o=this._spaceTool,r=this._lassoTool,a=this._handTool,s=this._globalConnect,c=this._translate;function p(e,t,o,r,a){function s(t){var o=i.createShape(W({type:e},a));a&&(o.businessObject.di.isExpanded=a.isExpanded),n.start(t,o)}var p=e.replace(/^bpmn:/,\"\");return{group:t,className:o,title:r||c(\"Create {type}\",{type:p}),action:{dragstart:s,click:s}}}function l(e,t){n.start(e,i.createParticipantShape(t))}return W(t,{\"hand-tool\":{group:\"tools\",className:\"bpmn-icon-hand-tool\",title:c(\"Activate the hand tool\"),action:{click:function(e){a.activateHand(e)}}},\"lasso-tool\":{group:\"tools\",className:\"bpmn-icon-lasso-tool\",title:c(\"Activate the lasso tool\"),action:{click:function(e){r.activateSelection(e)}}},\"space-tool\":{group:\"tools\",className:\"bpmn-icon-space-tool\",title:c(\"Activate the create/remove space tool\"),action:{click:function(e){o.activateSelection(e)}}},\"global-connect-tool\":{group:\"tools\",className:\"bpmn-icon-connection-multi\",title:c(\"Activate the global connect tool\"),action:{click:function(e){s.toggle(e)}}},\"tool-separator\":{group:\"tools\",separator:!0},\"create.start-event\":p(\"bpmn:StartEvent\",\"event\",\"bpmn-icon-start-event-none\"),\"create.intermediate-event\":p(\"bpmn:IntermediateThrowEvent\",\"event\",\"bpmn-icon-intermediate-event-none\",c(\"Create Intermediate/Boundary Event\")),\"create.end-event\":p(\"bpmn:EndEvent\",\"event\",\"bpmn-icon-end-event-none\"),\"create.exclusive-gateway\":p(\"bpmn:ExclusiveGateway\",\"gateway\",\"bpmn-icon-gateway-none\",c(\"Create Gateway\")),\"create.task\":p(\"bpmn:Task\",\"activity\",\"bpmn-icon-task\"),\"create.data-object\":p(\"bpmn:DataObjectReference\",\"data-object\",\"bpmn-icon-data-object\"),\"create.data-store\":p(\"bpmn:DataStoreReference\",\"data-store\",\"bpmn-icon-data-store\"),\"create.subprocess-expanded\":p(\"bpmn:SubProcess\",\"activity\",\"bpmn-icon-subprocess-expanded\",c(\"Create expanded SubProcess\"),{isExpanded:!0}),\"create.participant-expanded\":{group:\"collaboration\",className:\"bpmn-icon-participant\",title:c(\"Create Pool/Participant\"),action:{dragstart:l,click:l}}}),t};var om={__depends__:[qd,Ds,Uu,Yd,Qd,nm,ro],__init__:[\"paletteProvider\"],paletteProvider:[\"type\",im]},rm=250;function am(e,t,n,i,o){ga.call(this,e),e.on(\"shape.move.move\",rm,function(e){var r=e.context,a=r.canExecute;r.visualReplacements||(r.visualReplacements={}),a.replacements?function(e){S(e.canExecute.replacements,function(r){var a=r.oldElementId,s={type:r.newElementType};if(!e.visualReplacements[a]){var c=t.get(a);W(s,{x:c.x,y:c.y});var p=n.createShape(s);i.addShape(p,c.parent);var l=ge('[data-element-id=\"'+Va()(c.id)+'\"]',e.dragGroup);l&&Ce(l,{display:\"none\"});var u=o.addDragger(p,e.dragGroup);e.visualReplacements[a]=u,i.removeShape(p)}})}(r):function(e){var t=e.visualReplacements;S(t,function(n,i){var o=ge('[data-element-id=\"'+Va()(i)+'\"]',e.dragGroup);o&&Ce(o,{display:\"inline\"}),n.remove(),t[i]&&delete t[i]})}(r)})}am.$inject=[\"eventBus\",\"elementRegistry\",\"elementFactory\",\"canvas\",\"previewSupport\"],s()(am,ga);var sm={__depends__:[ep],__init__:[\"bpmnReplacePreview\"],bpmnReplacePreview:[\"type\",am]},cm=Math.abs,pm=Math.round;function lm(e){return{x:e.x,y:e.y}}function um(e,t){return!e||isNaN(e.x)||isNaN(e.y)?t:{x:pm(e.x+e.width/2),y:pm(e.y+e.height/2)}}function hm(e){return{x:e.x+e.width,y:e.y+e.height}}function dm(e,t){var n=e.snapped;return!!n&&(\"string\"==typeof t?n[t]:n.x&&n.y)}function mm(e,t,n){if(\"string\"!=typeof t)throw new Error(\"axis must be in [x, y]\");if(\"number\"!=typeof n&&!1!==n)throw new Error(\"value must be Number or false\");var i,o=e[t],r=e.snapped=e.snapped||{};return!1===n?r[t]=!1:(r[t]=!0,i=n-o,e[t]+=i,e[\"d\"+t]+=i),o}function fm(){this._targets={},this._snapOrigins={},this._snapLocations=[],this._defaultSnaps={}}function ym(e){this._snapValues={}}fm.prototype.getSnapOrigin=function(e){return this._snapOrigins[e]},fm.prototype.setSnapOrigin=function(e,t){this._snapOrigins[e]=t,-1===this._snapLocations.indexOf(e)&&this._snapLocations.push(e)},fm.prototype.addDefaultSnap=function(e,t){var n=this._defaultSnaps[e];n||(n=this._defaultSnaps[e]=[]),n.push(t)},fm.prototype.getSnapLocations=function(){return this._snapLocations},fm.prototype.setSnapLocations=function(e){this._snapLocations=e},fm.prototype.pointsForTarget=function(e){var t=e.id||e,n=this._targets[t];return n||(n=this._targets[t]=new ym).initDefaults(this._defaultSnaps),n},ym.prototype.add=function(e,t){var n=this._snapValues[e];n||(n=this._snapValues[e]={x:[],y:[]}),-1===n.x.indexOf(t.x)&&n.x.push(t.x),-1===n.y.indexOf(t.y)&&n.y.push(t.y)},ym.prototype.snap=function(e,t,n,i){var o=this._snapValues[t];return o&&function(e,t,n){var i,o;for(n=void 0===n?10:n,i=0;i<t.length;i++)if(o=t[i],cm(o-e)<=n)return o}(e[n],o[n],i)},ym.prototype.initDefaults=function(e){var t=this;S(e||{},function(e,n){S(e,function(e){t.add(n,e)})})};var gm=1250;function vm(e,t){this._canvas=t;var n=this;e.on([\"shape.move.start\",\"create.start\"],function(e){n.initSnap(e)}),e.on([\"shape.move.move\",\"shape.move.end\",\"create.move\",\"create.end\"],gm,function(e){e.originalEvent&&e.originalEvent.ctrlKey||dm(e)||n.snap(e)}),e.on([\"shape.move.cleanup\",\"create.cleanup\"],function(e){n.hide()}),this._asyncHide=$(V(this.hide,this),1e3)}vm.$inject=[\"eventBus\",\"canvas\"],vm.prototype.initSnap=function(e){var t=e.context,n=t.shape,i=t.snapContext;i||(i=t.snapContext=new fm);var o=um(n,e);return i.setSnapOrigin(\"mid\",{x:o.x-e.x,y:o.y-e.y}),i},vm.prototype.snap=function(e){var t=e.context,n=t.snapContext,i=t.shape,o=t.target,r=n.getSnapLocations();if(o){var a=n.pointsForTarget(o);a.initialized||(this.addTargetSnaps(a,i,o),a.initialized=!0);var s={x:dm(e,\"x\"),y:dm(e,\"y\")};S(r,function(t){var i=n.getSnapOrigin(t),o={x:e.x+i.x,y:e.y+i.y};if(S([\"x\",\"y\"],function(e){var n;s[e]||void 0!==(n=a.snap(o,t,e,7))&&(s[e]={value:n,originValue:n-i[e]})}),s.x&&s.y)return!1}),this.showSnapLine(\"vertical\",s.x&&s.x.value),this.showSnapLine(\"horizontal\",s.y&&s.y.value),S([\"x\",\"y\"],function(t){var n=s[t];\"object\"==typeof n&&mm(e,t,n.originValue)})}},vm.prototype._createLine=function(e){var t=this._canvas.getLayer(\"snap\"),n=Ie(\"path\");return Ce(n,{d:\"M0,0 L0,0\"}),ke(n).add(\"djs-snap-line\"),we(t,n),{update:function(t){Ce(n,\"number\"!=typeof t?{display:\"none\"}:\"horizontal\"===e?{d:\"M-100000,\"+t+\" L+100000,\"+t,display:\"\"}:{d:\"M \"+t+\",-100000 L \"+t+\", +100000\",display:\"\"})}}},vm.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine(\"horizontal\"),vertical:this._createLine(\"vertical\")}},vm.prototype.showSnapLine=function(e,t){var n=this.getSnapLine(e);n&&n.update(t),this._asyncHide()},vm.prototype.getSnapLine=function(e){return this._snapLines||this._createSnapLines(),this._snapLines[e]},vm.prototype.hide=function(){S(this._snapLines,function(e){e.update()})},vm.prototype.addTargetSnaps=function(e,t,n){S(this.getSiblings(t,n),function(t){e.add(\"mid\",um(t))})},vm.prototype.getSiblings=function(e,t){return t&&E(t.children,function(t){return!t.hidden&&!t.labelTarget&&t.host!==e&&t!==e})};var bm=Math.round,xm=1500;function _m(e,t,n,i){vm.call(this,e,t),e.on(\"create.start\",function(e){var n=e.context,i=n.shape,o=t.getRootElement();Mi(i,\"bpmn:Participant\")&&Mi(o,\"bpmn:Process\")&&wm(n,i,o.children)}),e.on([\"create.move\",\"create.end\"],xm,function(e){var t=e.context,n=t.shape,i=t.participantSnapBox;!dm(e)&&i&&function(e,t,n,i){i=i||0;var o=t.width/2-i,r=t.height/2,a={x:n.x-o-i,y:n.y-r},s={x:n.x+o+i,y:n.y+r},c=e,p=hm(e);a.x>=c.x?mm(n,\"x\",c.x+i+o):s.x<=p.x&&mm(n,\"x\",p.x-i-o);a.y>=c.y?mm(n,\"y\",c.y+r):s.y<=p.y&&mm(n,\"y\",p.y-r)}(i,n,e)}),e.on(\"shape.move.start\",function(e){var n=e.context,i=n.shape,o=t.getRootElement();Mi(i,\"bpmn:Participant\")&&Mi(o,\"bpmn:Process\")&&wm(n,i,o.children)}),e.on([\"create.move\",\"create.end\",\"shape.move.move\",\"shape.move.end\"],xm,function(e){var t=e.context,i=t.target,o=t.shape;i&&!dm(e)&&function(e,t,i){return\"attach\"===n.canAttach([e],t,null,i)}(o,i,e)&&function(e,t,n){var i=So(n),o=Sl(e,n);/top/.test(o)?mm(e,\"y\",i.top):/bottom/.test(o)&&mm(e,\"y\",i.bottom);/left/.test(o)?mm(e,\"x\",i.left):/right/.test(o)&&mm(e,\"x\",i.right)}(e,0,i)}),e.on([\"shape.move.hover\",\"shape.move.move\",\"shape.move.end\",\"create.hover\",\"create.move\",\"create.end\"],xm,function(e){var t=e.context.shape,n=e.hover;Mi(n,\"bpmn:Lane\")&&!ia(t,[\"bpmn:Lane\",\"bpmn:Participant\"])&&(e.hover=_c(n),e.hoverGfx=i.getGraphics(e.hover))}),e.on([\"connect.move\",\"connect.hover\",\"connect.end\"],xm,function(e){var t=e.context,i=t.source,o=t.target,r=function(e,t){return n.canConnect(e,t)}(i,o)||{};t.initialSourcePosition||(t.initialSourcePosition=t.sourcePosition),!o||\"bpmn:Association\"!==r.type&&\"bpmn:DataOutputAssociation\"!==r.type&&\"bpmn:DataInputAssociation\"!==r.type&&\"bpmn:SequenceFlow\"!==r.type?\"bpmn:MessageFlow\"===r.type?(Mi(i,\"bpmn:Event\")&&(t.sourcePosition=um(i)),Mi(o,\"bpmn:Event\")&&Em(e,um(o))):t.sourcePosition=t.initialSourcePosition:(t.sourcePosition=um(i),Em(e,um(o)))}),e.on(\"resize.start\",xm,function(e){var t,n,i,o,r,a,s,c,p,l,u=e.context,h=u.shape;Mi(h,\"bpmn:SubProcess\")&&ki(h)&&(u.minDimensions={width:140,height:120}),Mi(h,\"bpmn:Participant\")&&(u.minDimensions={width:300,height:150}),(Mi(h,\"bpmn:Lane\")||Mi(h,\"bpmn:Participant\"))&&(u.resizeConstraints=(t=h,n=u.direction,i=u.balanced,o=_c(t),r=!0,a=!0,s=bc(o,[o]),c=So(t),p={},l={},/e/.test(n)?l.right=c.left+Bl:/w/.test(n)&&(l.left=c.right-Bl),s.forEach(function(e){var t=So(e);/n/.test(n)&&(t.top<c.top-10&&(r=!1),i&&Pl(c.top-t.bottom)<10&&Al(p,\"top\",t.top+kl),Pl(c.top-t.top)<5&&Ml(l,\"top\",t.bottom-kl)),/s/.test(n)&&(t.bottom>c.bottom+10&&(a=!1),i&&Pl(c.bottom-t.top)<10&&Ml(p,\"bottom\",t.bottom-kl),Pl(c.bottom-t.bottom)<5&&Al(l,\"bottom\",t.top+kl))}),o.children.filter(function(e){return!e.hidden&&!e.waypoints&&(Mi(e,\"bpmn:FlowElement\")||Mi(e,\"bpmn:Artifact\"))}).forEach(function(e){var t=So(e);r&&/n/.test(n)&&Ml(l,\"top\",t.top-Ol),/e/.test(n)&&Al(l,\"right\",t.right+Nl),a&&/s/.test(n)&&Al(l,\"bottom\",t.bottom+Ll),/w/.test(n)&&Ml(l,\"left\",t.left-Dl)}),{min:l,max:p})),Mi(h,\"bpmn:TextAnnotation\")&&(u.minDimensions={width:50,height:30})})}function wm(e,t,n){if(n.length){var i=Et(n.filter(function(e){return!e.labelTarget&&!e.waypoints}));i.x-=50,i.y-=20,i.width+=70,i.height+=40,t.width=Math.max(t.width,i.width),t.height=Math.max(t.height,i.height),e.participantSnapBox=i}}function Em(e,t){mm(e,\"x\",t.x),mm(e,\"y\",t.y)}s()(_m,vm),_m.$inject=[\"eventBus\",\"canvas\",\"bpmnRules\",\"elementRegistry\"],_m.prototype.initSnap=function(e){var t,n,i,o,r,a=e.context,s=e.shape;r=vm.prototype.initSnap.call(this,e),Mi(s,\"bpmn:Participant\")&&r.setSnapLocations([\"top-left\",\"bottom-right\",\"mid\"]),s&&(t=um(s,e),i=lm(n={width:s.width,height:s.height,x:isNaN(s.x)?bm(t.x-s.width/2):s.x,y:isNaN(s.y)?bm(t.y-s.height/2):s.y}),o=hm(n),r.setSnapOrigin(\"top-left\",{x:i.x-e.x,y:i.y-e.y}),r.setSnapOrigin(\"bottom-right\",{x:o.x-e.x,y:o.y-e.y}),S(s.outgoing,function(t){var n=t.waypoints[0];n=n.original||n,r.setSnapOrigin(t.id+\"-docking\",{x:n.x-e.x,y:n.y-e.y})}),S(s.incoming,function(t){var n=t.waypoints[t.waypoints.length-1];n=n.original||n,r.setSnapOrigin(t.id+\"-docking\",{x:n.x-e.x,y:n.y-e.y})}));var c=a.source;c&&r.addDefaultSnap(\"mid\",um(c))},_m.prototype.addTargetSnaps=function(e,t,n){Mi(t,\"bpmn:BoundaryEvent\")&&\"label\"!==t.type&&(n=n.parent),Mi(n,\"bpmn:SequenceFlow\")&&this.addTargetSnaps(e,t,n.parent);var i=this.getSiblings(t,n)||[];S(i,function(t){Mi(t,\"bpmn:Lane\")||(t.waypoints?S(t.waypoints.slice(1,-1),function(n,i){var o=t.waypoints[i+2],r=t.waypoints[i];if(!o||!r)throw new Error(\"waypoints must exist\");o.x!==n.x&&o.y!==n.y&&r.x!==n.x&&r.y!==n.y||e.add(\"mid\",n)}):(e.add(\"mid\",um(t)),Mi(t,\"bpmn:Participant\")&&(e.add(\"top-left\",lm(t)),e.add(\"bottom-right\",hm(t)))))}),S(t.incoming,function(t){-1===i.indexOf(t.source)&&e.add(\"mid\",um(t.source));var n=t.waypoints[0];e.add(t.id+\"-docking\",n.original||n)}),S(t.outgoing,function(t){-1===i.indexOf(t.target)&&e.add(\"mid\",um(t.target));var n=t.waypoints[t.waypoints.length-1];e.add(t.id+\"-docking\",n.original||n)})};var Sm={__init__:[\"snapping\"],snapping:[\"type\",_m]};function Pm(e,t,n,i){this._open=!1,this._results=[],this._eventMaps=[],this._canvas=e,this._eventBus=t,this._overlays=n,this._selection=i,this._container=ue(Pm.BOX_HTML),this._searchInput=ge(Pm.INPUT_SELECTOR,this._container),this._resultsContainer=ge(Pm.RESULTS_CONTAINER_SELECTOR,this._container),this._canvas.getContainer().appendChild(this._container),t.on([\"canvas.destroy\",\"diagram.destroy\"],this.close,this)}function Cm(e,t,n){var i=function(e){var t=\"\";return e.forEach(function(e){e.matched?t+='<strong class=\"'+Pm.RESULT_HIGHLIGHT_CLASS+'\">'+e.matched+\"</strong>\":t+=e.normal}),\"\"!==t?t:null}(t),o=ue(n);o.innerHTML=i,e.appendChild(o)}Pm.$inject=[\"canvas\",\"eventBus\",\"overlays\",\"selection\"],Pm.prototype._bindEvents=function(){var e=this;function t(t,n,i,o){e._eventMaps.push({el:t,type:i,listener:le.bind(t,n,i,o)})}t(document,\"html\",\"click\",function(t){e.close()}),t(this._container,Pm.INPUT_SELECTOR,\"click\",function(e){e.stopPropagation(),e.delegateTarget.focus()}),t(this._container,Pm.RESULT_SELECTOR,\"mouseover\",function(t){t.stopPropagation(),e._scrollToNode(t.delegateTarget),e._preselect(t.delegateTarget)}),t(this._container,Pm.RESULT_SELECTOR,\"click\",function(t){t.stopPropagation(),e._select(t.delegateTarget)}),t(this._container,Pm.INPUT_SELECTOR,\"keydown\",function(e){38===e.keyCode&&e.preventDefault(),40===e.keyCode&&e.preventDefault()}),t(this._container,Pm.INPUT_SELECTOR,\"keyup\",function(t){if(27===t.keyCode)return e.close();if(13===t.keyCode){var n=e._getCurrentResult();return n?e._select(n):e.close()}return 38===t.keyCode?e._scrollToDirection(!0):40===t.keyCode?e._scrollToDirection():void(37!==t.keyCode&&39!==t.keyCode&&e._search(t.delegateTarget.value))})},Pm.prototype._unbindEvents=function(){this._eventMaps.forEach(function(e){le.unbind(e.el,e.type,e.listener)})},Pm.prototype._search=function(e){var t=this;if(this._clearResults(),e&&\"\"!==e){var n=this._searchProvider.find(e);if(n.length){n.forEach(function(e){var n=e.element.id,i=t._createResultNode(e,n);t._results[n]={element:e.element,node:i}});var i=ge(Pm.RESULT_SELECTOR,this._resultsContainer);this._scrollToNode(i),this._preselect(i)}}},Pm.prototype._scrollToDirection=function(e){var t=this._getCurrentResult();if(t){var n=e?t.previousElementSibling:t.nextElementSibling;n&&(this._scrollToNode(n),this._preselect(n))}},Pm.prototype._scrollToNode=function(e){if(e&&e!==this._getCurrentResult()){var t=e.offsetTop,n=this._resultsContainer.scrollTop,i=t-this._resultsContainer.clientHeight+e.clientHeight;t<n?this._resultsContainer.scrollTop=t:n<i&&(this._resultsContainer.scrollTop=i)}},Pm.prototype._clearResults=function(){J(this._resultsContainer),this._results=[],this._resetOverlay(),this._eventBus.fire(\"searchPad.cleared\")},Pm.prototype._getCurrentResult=function(){return ge(Pm.RESULT_SELECTED_SELECTOR,this._resultsContainer)},Pm.prototype._createResultNode=function(e,t){var n=ue(Pm.RESULT_HTML);return e.primaryTokens.length>0&&Cm(n,e.primaryTokens,Pm.RESULT_PRIMARY_HTML),Cm(n,e.secondaryTokens,Pm.RESULT_SECONDARY_HTML),q(n,Pm.RESULT_ID_ATTRIBUTE,t),this._resultsContainer.appendChild(n),n},Pm.prototype.registerProvider=function(e){this._searchProvider=e},Pm.prototype.open=function(){if(!this._searchProvider)throw new Error(\"no search provider registered\");this.isOpen()||(this._bindEvents(),this._open=!0,Z(this._container).add(\"open\"),this._searchInput.focus(),this._eventBus.fire(\"searchPad.opened\"))},Pm.prototype.close=function(){this.isOpen()&&(this._unbindEvents(),this._open=!1,Z(this._container).remove(\"open\"),this._clearResults(),this._searchInput.value=\"\",this._searchInput.blur(),this._resetOverlay(),this._eventBus.fire(\"searchPad.closed\"))},Pm.prototype.toggle=function(){this.isOpen()?this.close():this.open()},Pm.prototype.isOpen=function(){return this._open},Pm.prototype._preselect=function(e){var t=this._getCurrentResult();if(e!==t){t&&Z(t).remove(Pm.RESULT_SELECTED_CLASS);var n=q(e,Pm.RESULT_ID_ATTRIBUTE),i=this._results[n].element;Z(e).add(Pm.RESULT_SELECTED_CLASS),this._resetOverlay(i),this._centerViewbox(i),this._selection.select(i),this._eventBus.fire(\"searchPad.preselected\",i)}},Pm.prototype._select=function(e){var t=q(e,Pm.RESULT_ID_ATTRIBUTE),n=this._results[t].element;this.close(),this._resetOverlay(),this._centerViewbox(n),this._selection.select(n),this._eventBus.fire(\"searchPad.selected\",n)},Pm.prototype._centerViewbox=function(e){var t=this._canvas.viewbox(),n=Et(e),i={x:n.x+n.width/2-t.outer.width/2,y:n.y+n.height/2-t.outer.height/2,width:t.outer.width,height:t.outer.height};this._canvas.viewbox(i),this._canvas.zoom(t.scale)},Pm.prototype._resetOverlay=function(e){if(this._overlayId&&this._overlays.remove(this._overlayId),e){var t=function(e){var t=e.width+12,n=e.height+12,i=[\"width: \"+t+\"px\",\"height: \"+n+\"px\"].join(\"; \");return{position:{bottom:n-6,right:t-6},show:!0,html:'<div style=\"'+i+'\" class=\"'+Pm.OVERLAY_CLASS+'\"></div>'}}(Et(e));this._overlayId=this._overlays.add(e,t)}},Pm.CONTAINER_SELECTOR=\".djs-search-container\",Pm.INPUT_SELECTOR=\".djs-search-input input\",Pm.RESULTS_CONTAINER_SELECTOR=\".djs-search-results\",Pm.RESULT_SELECTOR=\".djs-search-result\",Pm.RESULT_SELECTED_CLASS=\"djs-search-result-selected\",Pm.RESULT_SELECTED_SELECTOR=\".\"+Pm.RESULT_SELECTED_CLASS,Pm.RESULT_ID_ATTRIBUTE=\"data-result-id\",Pm.RESULT_HIGHLIGHT_CLASS=\"djs-search-highlight\",Pm.OVERLAY_CLASS=\"djs-search-overlay\",Pm.BOX_HTML='<div class=\"djs-search-container djs-draggable djs-scrollable\"><div class=\"djs-search-input\"><input type=\"text\"/></div><div class=\"djs-search-results\"></div></div>',Pm.RESULT_HTML='<div class=\"djs-search-result\"></div>',Pm.RESULT_PRIMARY_HTML='<div class=\"djs-search-result-primary\"></div>',Pm.RESULT_SECONDARY_HTML='<p class=\"djs-search-result-secondary\"></p>';var Tm={__depends__:[or,Zo],searchPad:[\"type\",Pm]};function Rm(e,t,n){this._elementRegistry=e,this._canvas=n,t.registerProvider(this)}function Mm(e){return E(e,function(e){return!!e.matched}).length>0}function Am(e,t){var n=[],i=e;if(!e)return n;e=e.toLowerCase(),t=t.toLowerCase();var o=e.indexOf(t);return o>-1?(0!==o&&n.push({normal:i.substr(0,o)}),n.push({matched:i.substr(o,t.length)}),t.length+o<e.length&&n.push({normal:i.substr(t.length+o,e.length)})):n.push({normal:i}),n}Rm.$inject=[\"elementRegistry\",\"searchPad\",\"canvas\"],Rm.prototype.find=function(e){var t=this._canvas.getRootElement(),n=this._elementRegistry.filter(function(e){return!e.labelTarget});return n=E(n,function(e){return e!==t}),n=O(n=E(n=M(n,function(t){return{primaryTokens:Am(pp(t),e),secondaryTokens:Am(t.id,e),element:t}}),function(e){return Mm(e.primaryTokens)||Mm(e.secondaryTokens)}),function(e){return pp(e.element)+e.element.id})};var km={__depends__:[Tm],__init__:[\"bpmnSearch\"],bpmnSearch:[\"type\",Rm]};function Bm(e){ur.call(this,e),this.on(\"import.parse.complete\",function(e){e.error||this._collectIds(e.definitions,e.context)},this),this.on(\"diagram.destroy\",function(){this.get(\"moddle\").ids.clear()},this)}function Nm(e,t,n){e.invoke(Ec,this);var i=V(this.getContextPadEntries,this);this.getContextPadEntries=function(e){var o=i(e);function r(e,n,i){t.start(e,n,i)}return ia(e.businessObject,[\"custom:triangle\",\"custom:circle\"])&&W(o,{connect:{group:\"connect\",className:\"bpmn-icon-connection-multi\",title:n(\"Connect using custom connection\"),action:{click:r,dragstart:r}}}),o}}function Dm(e,t){Zu.call(this,e,t);var n=this;this.create=function(e,i){var o=i.type;return\"label\"===e?n.baseCreate(e,W({type:\"label\"},ao,i)):/^custom:/.test(o)?(i.businessObject||(i.businessObject={type:o},i.id&&W(i.businessObject,{id:i.id})),/:connection$/.test(o)||W(i,n._getCustomElementSize(o)),\"$model\"in i.businessObject||Object.defineProperty(i.businessObject,\"$model\",{value:t}),\"$instanceOf\"in i.businessObject||Object.defineProperty(i.businessObject,\"$instanceOf\",{value:function(e){return this.type===e}}),\"get\"in i.businessObject||Object.defineProperty(i.businessObject,\"get\",{value:function(e){return this[e]}}),\"set\"in i.businessObject||Object.defineProperty(i.businessObject,\"set\",{value:function(e,t){return this[e]=t}}),n.baseCreate(e,i)):n.createBpmnElement(e,i)}}function Om(e,t){uu.call(this,e),this.getOrdering=function(e,n){if(\"custom:connection\"===e.type)return{parent:t.getRootElement(),index:-1}}}function Lm(e,t,n,i,o){this._create=t,this._elementFactory=n,this._spaceTool=i,this._lassoTool=o,e.registerProvider(this)}function jm(e,t){pt.call(this,e,2e3);var n=t.computeStyle;this.drawTriangle=function(e,t){var i,o;i=[t/2,0,t,t,0,t],o=n(o,{stroke:\"#3CAA82\",strokeWidth:2,fill:\"#3CAA82\"});var r=Ie(\"polygon\");return Ce(r,{points:i}),Ce(r,o),we(e,r),r},this.getTrianglePath=function(e){var t=e.x,n=e.y,i=e.width;return lt([[\"M\",t+i/2,n],[\"l\",i/2,e.height],[\"l\",-i,0],[\"z\"]])},this.drawCircle=function(e,t,i){var o=t/2,r=i/2,a=n(a,{stroke:\"#4488aa\",strokeWidth:4,fill:\"white\"}),s=Ie(\"circle\");return Ce(s,{cx:o,cy:r,r:Math.round((t+i)/4)}),Ce(s,a),we(e,s),s},this.getCirclePath=function(e){var t=e.x+e.width/2,n=e.y+e.height/2,i=e.width/2;return lt([[\"M\",t,n],[\"m\",0,-i],[\"a\",i,i,0,1,1,0,2*i],[\"a\",i,i,0,1,1,0,-2*i],[\"z\"]])},this.drawCustomConnection=function(e,t){var i=n(i,{stroke:\"#ff471a\",strokeWidth:2});return we(e,ht(t.waypoints,i))},this.getCustomConnectionPath=function(e){var t=e.waypoints.map(function(e){return e.original||e}),n=[[\"M\",t[0].x,t[0].y]];return t.forEach(function(e,t){0!==t&&n.push([\"L\",e.x,e.y])}),lt(n)}}s()(Bm,ur),Bm.Viewer=ur,Bm.NavigatedViewer=zr,Bm.prototype.createDiagram=function(e){return this.importXML('<?xml version=\"1.0\" encoding=\"UTF-8\"?><bpmn:definitions xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:bpmn=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:dc=\"http://www.omg.org/spec/DD/20100524/DC\" targetNamespace=\"http://bpmn.io/schema/bpmn\" id=\"Definitions_1\"><bpmn:process id=\"Process_1\" isExecutable=\"false\"><bpmn:startEvent id=\"StartEvent_1\"/></bpmn:process><bpmndi:BPMNDiagram id=\"BPMNDiagram_1\"><bpmndi:BPMNPlane id=\"BPMNPlane_1\" bpmnElement=\"Process_1\"><bpmndi:BPMNShape id=\"_BPMNShape_StartEvent_2\" bpmnElement=\"StartEvent_1\"><dc:Bounds height=\"36.0\" width=\"36.0\" x=\"173.0\" y=\"102.0\"/></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>',e)},Bm.prototype._createModdle=function(e){var t=ur.prototype._createModdle.call(this,e);return t.ids=new p.a([32,36,1]),t},Bm.prototype._collectIds=function(e,t){var n,i=e.$model.ids;for(n in i.clear(),t.elementsById)i.claim(n,t.elementsById[n])},Bm.prototype._interactionModules=[_r,kr,Xr,Ir],Bm.prototype._modelingModules=[na,ya,Da,Ea,ms,Pc,Bc,jc,Vc,Wc,Xc,yp,kd,Wd,om,sm,sp,Sm,km],Bm.prototype._modules=[].concat(Bm.prototype._modules,Bm.prototype._interactionModules,Bm.prototype._modelingModules),s()(Nm,Ec),Nm.$inject=[\"injector\",\"connect\",\"translate\"],s()(Dm,Zu),Dm.$inject=[\"bpmnFactory\",\"moddle\"],Dm.prototype._getCustomElementSize=function(e){var t={__default:{width:100,height:80},\"custom:triangle\":{width:40,height:40},\"custom:circle\":{width:140,height:140}};return t[e]||t.__default},Om.$inject=[\"eventBus\",\"canvas\"],s()(Om,uu),Lm.$inject=[\"palette\",\"create\",\"elementFactory\",\"spaceTool\",\"lassoTool\"],Lm.prototype.getPaletteEntries=function(e){var t={},n=this._create,i=this._elementFactory,o=this._spaceTool,r=this._lassoTool;function a(e,t,o,r,a){function s(t){var o=i.createShape(W({type:e},a));a&&(o.businessObject.di.isExpanded=a.isExpanded),n.start(t,o)}var c=e.replace(/^bpmn:/,\"\");return{group:t,className:o,title:r||\"Create \"+c,action:{dragstart:s,click:s}}}function s(e,t){n.start(e,i.createParticipantShape(t))}return W(t,{\"custom-triangle\":a(\"custom:triangle\",\"custom\",\"icon-custom-triangle\"),\"custom-circle\":a(\"custom:circle\",\"custom\",\"icon-custom-circle\"),\"custom-separator\":{group:\"custom\",separator:!0},\"lasso-tool\":{group:\"tools\",className:\"bpmn-icon-lasso-tool\",title:\"Activate the lasso tool\",action:{click:function(e){r.activateSelection(e)}}},\"space-tool\":{group:\"tools\",className:\"bpmn-icon-space-tool\",title:\"Activate the create/remove space tool\",action:{click:function(e){o.activateSelection(e)}}},\"tool-separator\":{group:\"tools\",separator:!0},\"create.start-event\":a(\"bpmn:StartEvent\",\"event\",\"bpmn-icon-start-event-none\"),\"create.intermediate-event\":a(\"bpmn:IntermediateThrowEvent\",\"event\",\"bpmn-icon-intermediate-event-none\"),\"create.end-event\":a(\"bpmn:EndEvent\",\"event\",\"bpmn-icon-end-event-none\"),\"create.exclusive-gateway\":a(\"bpmn:ExclusiveGateway\",\"gateway\",\"bpmn-icon-gateway-xor\"),\"create.task\":a(\"bpmn:Task\",\"activity\",\"bpmn-icon-task\"),\"create.subprocess-expanded\":a(\"bpmn:SubProcess\",\"activity\",\"bpmn-icon-subprocess-expanded\",\"Create expanded SubProcess\",{isExpanded:!0}),\"create.participant-expanded\":{group:\"collaboration\",className:\"bpmn-icon-participant\",title:\"Create Pool/Participant\",action:{dragstart:s,click:s}}}),t},s()(jm,pt),jm.$inject=[\"eventBus\",\"styles\"],jm.prototype.canRender=function(e){return/^custom:/.test(e.type)},jm.prototype.drawShape=function(e,t){var n=t.type;return\"custom:triangle\"===n?this.drawTriangle(e,t.width):\"custom:circle\"===n?this.drawCircle(e,t.width,t.height):void 0},jm.prototype.getShapePath=function(e){var t=e.type;return\"custom:triangle\"===t?this.getTrianglePath(e):\"custom:circle\"===t?this.getCirclePath(e):void 0},jm.prototype.drawConnection=function(e,t){if(\"custom:connection\"===t.type)return this.drawCustomConnection(e,t)},jm.prototype.getConnectionPath=function(e){if(\"custom:connection\"===e.type)return this.getCustomConnectionPath(e)};function Im(e){return e&&/^custom:/.test(e.type)}function zm(e){xa.call(this,e)}function Fm(e,t,n){function i(e){var t=e.context.shape,i=t.businessObject;if(Vm(t)){var o=t.parent,r=n._customElements;o?gt(r,i):yt(r,i),W(i,G(t,[\"x\",\"y\"]))}}function o(e){var t=e.context.connection,i=t.source,o=t.target,r=t.businessObject,a=t.parent,s=n._customElements;a?gt(s,r):yt(s,r),W(r,{waypoints:$m(t)}),i&&o&&W(r,{source:i.id,target:o.id})}ga.call(this,e),this.executed([\"shape.create\",\"shape.move\",\"shape.delete\"],Hm(i)),this.reverted([\"shape.create\",\"shape.move\",\"shape.delete\"],Hm(i)),this.executed([\"connection.create\",\"connection.reconnectStart\",\"connection.reconnectEnd\",\"connection.updateWaypoints\",\"connection.delete\",\"connection.layout\",\"connection.move\"],Hm(o)),this.reverted([\"connection.create\",\"connection.reconnectStart\",\"connection.reconnectEnd\",\"connection.updateWaypoints\",\"connection.delete\",\"connection.layout\",\"connection.move\"],Hm(o)),this.postExecute(\"canvas.updateRoot\",function(e){var n=e.context,i=n.oldRoot,o=n.newRoot,r=i.children.filter(Vm);r.length&&t.moveElements(r,{x:0,y:0},o)})}function $m(e){return e.waypoints.map(function(e){return{x:e.x,y:e.y}})}function Vm(e){return e&&/custom:/.test(e.type)}function Hm(e){return function(t){var n=t.context;Vm(n.shape||n.connection)&&e(t)}}s()(zm,xa),zm.$inject=[\"eventBus\"],zm.prototype.init=function(){function e(e,t){if(Im(e))return Mi(t,\"bpmn:Process\")||Mi(t,\"bpmn:Participant\")||Mi(t,\"bpmn:Collaboration\")}function t(e,t){if(Im(e)||Im(t))return Im(e)?!!Mi(t,\"bpmn:Task\")&&{type:\"custom:connection\"}:Im(t)?!!Mi(e,\"bpmn:Task\")&&{type:\"custom:connection\"}:void 0}this.addRule(\"elements.move\",1500,function(t){var n,i=t.target;return C(t.shapes,function(t,o){return void 0===n&&(n=Im(o)),n===Im(o)&&!1!==t&&e(o,i)},void 0)}),this.addRule(\"shape.create\",1500,function(t){var n=t.target;return e(t.shape,n)}),this.addRule(\"shape.resize\",1500,function(e){if(Im(e.shape))return!1}),this.addRule(\"connection.create\",1500,function(e){return t(e.source,e.target)}),this.addRule(\"connection.reconnectStart\",1500,function(e){var n=e.connection;return t(e.hover||e.source,n.target)}),this.addRule(\"connection.reconnectEnd\",1500,function(e){var n=e.connection;return t(n.source,e.hover||e.target)})},s()(Fm,ga),Fm.$inject=[\"eventBus\",\"modeling\",\"bpmnjs\"];var Wm={__init__:[\"contextPadProvider\",\"customOrderingProvider\",\"customRenderer\",\"customRules\",\"customUpdater\",\"paletteProvider\"],contextPadProvider:[\"type\",Nm],customOrderingProvider:[\"type\",Om],customRenderer:[\"type\",jm],customRules:[\"type\",zm],customUpdater:[\"type\",Fm],elementFactory:[\"type\",Dm],paletteProvider:[\"type\",Lm]};function Gm(e){Bm.call(this,e),this._customElements=[]}s()(Gm,Bm),Gm.prototype._modules=[].concat(Gm.prototype._modules,[Wm]),Gm.prototype._addCustomShape=function(e){this._customElements.push(e);var t=this.get(\"canvas\"),n=this.get(\"elementFactory\"),i=W({businessObject:e},e),o=n.create(\"shape\",i);return t.addShape(o)},Gm.prototype._addCustomConnection=function(e){this._customElements.push(e);var t=this.get(\"canvas\"),n=this.get(\"elementFactory\"),i=this.get(\"elementRegistry\"),o=W({businessObject:e},e),r=n.create(\"connection\",W(o,{source:i.get(e.source),target:i.get(e.target)}),i.get(e.source).parent);return t.addConnection(r)},Gm.prototype.addCustomElements=function(e){if(!f(e))throw new Error(\"argument must be an array\");var t=[],n=[];e.forEach(function(e){\"custom:connection\"===e.type?n.push(e):t.push(e)}),t.forEach(this._addCustomShape,this),n.forEach(this._addCustomConnection,this)},Gm.prototype.getCustomElements=function(){return this._customElements};var qm=new Gm({container:\"#canvas\",keyboard:{bindTo:document}});qm.importXML(o.a,function(e){e&&console.error(\"something went wrong:\",e),qm.get(\"canvas\").zoom(\"fit-viewport\"),qm.addCustomElements(r)}),window.bpmnjs=qm}]);","extractedComments":[]}